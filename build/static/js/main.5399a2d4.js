/*! For license information please see main.5399a2d4.js.LICENSE.txt */
(()=>{"use strict";var e={43:(e,t,n)=>{e.exports=n(202)},153:(e,t,n)=>{var r=n(43),o=Symbol.for("react.element"),a=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,i=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,d=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)s.call(t,r)&&!l.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:o,type:e,key:c,ref:d,props:a,_owner:i.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},202:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}function v(){}function x(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var b=x.prototype=new v;b.constructor=x,m(b,y.prototype),b.isPureReactComponent=!0;var w=Array.isArray,k=Object.prototype.hasOwnProperty,_={current:null},j={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,r){var o,a={},s=null,i=null;if(null!=t)for(o in void 0!==t.ref&&(i=t.ref),void 0!==t.key&&(s=""+t.key),t)k.call(t,o)&&!j.hasOwnProperty(o)&&(a[o]=t[o]);var l=arguments.length-2;if(1===l)a.children=r;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];a.children=c}if(e&&e.defaultProps)for(o in l=e.defaultProps)void 0===a[o]&&(a[o]=l[o]);return{$$typeof:n,type:e,key:s,ref:i,props:a,_owner:_.current}}function N(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function E(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function P(e,t,o,a,s){var i=typeof e;"undefined"!==i&&"boolean"!==i||(e=null);var l=!1;if(null===e)l=!0;else switch(i){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return s=s(l=e),e=""===a?"."+E(l,0):a,w(s)?(o="",null!=e&&(o=e.replace(C,"$&/")+"/"),P(s,t,o,"",function(e){return e})):null!=s&&(N(s)&&(s=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(s,o+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(C,"$&/")+"/")+e)),t.push(s)),1;if(l=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var d=a+E(i=e[c],c);l+=P(i,t,o,d,s)}else if(d=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof d)for(e=d.call(e),c=0;!(i=e.next()).done;)l+=P(i=i.value,t,o,d=a+E(i,c++),s);else if("object"===i)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function T(e,t,n){if(null==e)return e;var r=[],o=0;return P(e,r,"","",function(e){return t.call(n,e,o++)}),r}function L(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},O={transition:null},A={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:O,ReactCurrentOwner:_};function I(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:T,forEach:function(e,t,n){T(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return T(e,function(){t++}),t},toArray:function(e){return T(e,function(e){return e})||[]},only:function(e){if(!N(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=o,t.Profiler=s,t.PureComponent=x,t.StrictMode=a,t.Suspense=d,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=A,t.act=I,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var o=m({},e.props),a=e.key,s=e.ref,i=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,i=_.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)k.call(t,c)&&!j.hasOwnProperty(c)&&(o[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)o.children=r;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];o.children=l}return{$$typeof:n,type:e.type,key:a,ref:s,props:o,_owner:i}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:i,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=N,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:L}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=I,t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.3.1"},210:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(n(829)),a=r(n(736)),s=n(745);class i{constructor(e){let{headers:t={},schema:n,fetch:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=e,this.headers=Object.assign(Object.assign({},s.DEFAULT_HEADERS),t),this.schemaName=n,this.fetch=r}from(e){const t=new URL("".concat(this.url,"/").concat(e));return new o.default(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new i(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{head:r=!1,get:o=!1,count:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=new URL("".concat(this.url,"/rpc/").concat(e));let l;r||o?(t=r?"HEAD":"GET",Object.entries(n).filter(e=>{let[t,n]=e;return void 0!==n}).map(e=>{let[t,n]=e;return[t,Array.isArray(n)?"{".concat(n.join(","),"}"):"".concat(n)]}).forEach(e=>{let[t,n]=e;i.searchParams.append(t,n)})):(t="POST",l=n);const c=Object.assign({},this.headers);return s&&(c.Prefer="count=".concat(s)),new a.default({method:t,url:i,headers:c,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}}t.default=i},234:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,o=e[r];if(!(0<a(o,t)))break e;e[r]=t,e[n]=o,n=r}}function r(e){return 0===e.length?null:e[0]}function o(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,o=e.length,s=o>>>1;r<s;){var i=2*(r+1)-1,l=e[i],c=i+1,d=e[c];if(0>a(l,n))c<o&&0>a(d,l)?(e[r]=d,e[c]=n,r=c):(e[r]=l,e[i]=n,r=i);else{if(!(c<o&&0>a(d,n)))break e;e[r]=d,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var i=Date,l=i.now();t.unstable_now=function(){return i.now()-l}}var c=[],d=[],u=1,h=null,p=3,f=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,x="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(d);null!==t;){if(null===t.callback)o(d);else{if(!(t.startTime<=e))break;o(d),t.sortIndex=t.expirationTime,n(c,t)}t=r(d)}}function w(e){if(g=!1,b(e),!m)if(null!==r(c))m=!0,O(k);else{var t=r(d);null!==t&&A(w,t.startTime-e)}}function k(e,n){m=!1,g&&(g=!1,v(N),N=-1),f=!0;var a=p;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!P());){var s=h.callback;if("function"===typeof s){h.callback=null,p=h.priorityLevel;var i=s(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof i?h.callback=i:h===r(c)&&o(c),b(n)}else o(c);h=r(c)}if(null!==h)var l=!0;else{var u=r(d);null!==u&&A(w,u.startTime-n),l=!1}return l}finally{h=null,p=a,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var _,j=!1,S=null,N=-1,C=5,E=-1;function P(){return!(t.unstable_now()-E<C)}function T(){if(null!==S){var e=t.unstable_now();E=e;var n=!0;try{n=S(!0,e)}finally{n?_():(j=!1,S=null)}}else j=!1}if("function"===typeof x)_=function(){x(T)};else if("undefined"!==typeof MessageChannel){var L=new MessageChannel,R=L.port2;L.port1.onmessage=T,_=function(){R.postMessage(null)}}else _=function(){y(T,0)};function O(e){S=e,j||(j=!0,_())}function A(e,n){N=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,O(k))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,o,a){var s=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?s+a:s:a=s,e){case 1:var i=-1;break;case 2:i=250;break;case 5:i=1073741823;break;case 4:i=1e4;break;default:i=5e3}return e={id:u++,callback:o,priorityLevel:e,startTime:a,expirationTime:i=a+i,sortIndex:-1},a>s?(e.sortIndex=a,n(d,e),null===r(c)&&e===r(d)&&(g?(v(N),N=-1):g=!0,A(w,a-s))):(e.sortIndex=i,n(c,e),m||f||(m=!0,O(k))),e},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},286:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(n(630)),a=r(n(611));t.default=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:"undefined"===typeof fetch?this.fetch=o.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=Object.assign({},this.headers),this.headers[e]=t,this}then(e,t){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),"GET"!==this.method&&"HEAD"!==this.method&&(this.headers["Content-Type"]="application/json");let n=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async e=>{var t,n,r;let o=null,s=null,i=null,l=e.status,c=e.statusText;if(e.ok){if("HEAD"!==this.method){const t=await e.text();""===t||(s="text/csv"===this.headers.Accept||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?t:JSON.parse(t))}const r=null===(t=this.headers.Prefer)||void 0===t?void 0:t.match(/count=(exact|planned|estimated)/),a=null===(n=e.headers.get("content-range"))||void 0===n?void 0:n.split("/");r&&a&&a.length>1&&(i=parseInt(a[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(s)&&(s.length>1?(o={code:"PGRST116",details:"Results contain ".concat(s.length," rows, application/vnd.pgrst.object+json requires 1 row"),hint:null,message:"JSON object requested, multiple (or no) rows returned"},s=null,i=null,l=406,c="Not Acceptable"):s=1===s.length?s[0]:null)}else{const t=await e.text();try{o=JSON.parse(t),Array.isArray(o)&&404===e.status&&(s=[],o=null,l=200,c="OK")}catch(d){404===e.status&&""===t?(l=204,c="No Content"):o={message:t}}if(o&&this.isMaybeSingle&&(null===(r=null===o||void 0===o?void 0:o.details)||void 0===r?void 0:r.includes("0 rows"))&&(o=null,l=200,c="OK"),o&&this.shouldThrowOnError)throw new a.default(o)}return{error:o,data:s,count:i,status:l,statusText:c}});return this.shouldThrowOnError||(n=n.catch(e=>{var t,n,r;return{error:{message:"".concat(null!==(t=null===e||void 0===e?void 0:e.name)&&void 0!==t?t:"FetchError",": ").concat(null===e||void 0===e?void 0:e.message),details:"".concat(null!==(n=null===e||void 0===e?void 0:e.stack)&&void 0!==n?n:""),hint:"",code:"".concat(null!==(r=null===e||void 0===e?void 0:e.code)&&void 0!==r?r:"")},data:null,count:null,status:0,statusText:""}})),n.then(e,t)}returns(){return this}overrideTypes(){return this}}},374:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(n(286));class a extends o.default{select(e){let t=!1;const n=(null!==e&&void 0!==e?e:"*").split("").map(e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e){let{ascending:t=!0,nullsFirst:n,foreignTable:r,referencedTable:o=r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=o?"".concat(o,".order"):"order",s=this.url.searchParams.get(a);return this.url.searchParams.set(a,"".concat(s?"".concat(s,","):"").concat(e,".").concat(t?"asc":"desc").concat(void 0===n?"":n?".nullsfirst":".nullslast")),this}limit(e){let{foreignTable:t,referencedTable:n=t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r="undefined"===typeof n?"limit":"".concat(n,".limit");return this.url.searchParams.set(r,"".concat(e)),this}range(e,t){let{foreignTable:n,referencedTable:r=n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o="undefined"===typeof r?"offset":"".concat(r,".offset"),a="undefined"===typeof r?"limit":"".concat(r,".limit");return this.url.searchParams.set(o,"".concat(e)),this.url.searchParams.set(a,"".concat(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return"GET"===this.method?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain(){let{analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:r=!1,wal:o=!1,format:a="text"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var s;const i=[e?"analyze":null,t?"verbose":null,n?"settings":null,r?"buffers":null,o?"wal":null].filter(Boolean).join("|"),l=null!==(s=this.headers.Accept)&&void 0!==s?s:"application/json";return this.headers.Accept="application/vnd.pgrst.plan+".concat(a,'; for="').concat(l,'"; options=').concat(i,";"),this}rollback(){var e;return(null!==(e=this.headers.Prefer)&&void 0!==e?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}t.default=a},391:(e,t,n)=>{var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},400:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.version=void 0,t.version="0.0.0-automated"},579:(e,t,n)=>{e.exports=n(153)},611:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});class n extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}t.default=n},630:(e,t,n)=>{n.r(t),n.d(t,{Headers:()=>s,Request:()=>i,Response:()=>l,default:()=>a,fetch:()=>o});var r=function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("unable to locate global object")}();const o=r.fetch,a=r.fetch.bind(r),s=r.Headers,i=r.Request,l=r.Response},730:(e,t,n)=>{var r=n(43),o=n(853);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,i={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(i[e]=t,e=0;e<t.length;e++)s.add(t[e])}var d=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),u=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function m(e,t,n,r,o,a,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=s}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new m(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new m(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new m(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new m(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new m(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)});var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function x(e,t,n,r){var o=g.hasOwnProperty(t)?g[t]:null;(null!==o?0!==o.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,o,r)&&(n=null),r||null===o?function(e){return!!u.call(f,e)||!u.call(p,e)&&(h.test(e)?f[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=null===n?3!==o.type&&"":n:(t=o.attributeName,r=o.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(o=o.type)||4===o&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)});var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),k=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),C=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var A=Symbol.iterator;function I(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=A&&e[A]||e["@@iterator"])?e:null}var F,M=Object.assign;function D(e){if(void 0===F)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);F=t&&t[1]||""}return"\n"+F+e}var B=!1;function z(e,t){if(!e||B)return"";B=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var o=c.stack.split("\n"),a=r.stack.split("\n"),s=o.length-1,i=a.length-1;1<=s&&0<=i&&o[s]!==a[i];)i--;for(;1<=s&&0<=i;s--,i--)if(o[s]!==a[i]){if(1!==s||1!==i)do{if(s--,0>--i||o[s]!==a[i]){var l="\n"+o[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=s&&0<=i);break}}}finally{B=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?D(e):""}function U(e){switch(e.tag){case 5:return D(e.type);case 16:return D("Lazy");case 13:return D("Suspense");case 19:return D("SuspenseList");case 0:case 2:case 15:return e=z(e.type,!1);case 11:return e=z(e.type.render,!1);case 1:return e=z(e.type,!0);default:return""}}function q(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case _:return"Fragment";case k:return"Portal";case S:return"Profiler";case j:return"StrictMode";case P:return"Suspense";case T:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case N:return(e._context.displayName||"Context")+".Provider";case E:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case L:return null!==(t=e.displayName||null)?t:q(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return q(e(t))}catch(n){}}return null}function H(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return q(t);case 8:return t===j?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function V(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var o=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function J(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function $(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var n=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function G(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=V(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Y(e,t){null!=(t=t.checked)&&x(e,"checked",t,!1)}function X(e,t){Y(e,t);var n=V(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,V(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&$(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+V(n),t=null,o=0;o<e.length;o++){if(e[o].value===n)return e[o].selected=!0,void(r&&(e[o].defaultSelected=!0));null!==t||e[o].disabled||(t=e[o])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function oe(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:V(n)}}function ae(e,t){var n=V(t.value),r=V(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function se(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ie(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ie(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,de,ue=(de=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return de(e,t)})}:de);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),o=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}Object.keys(pe).forEach(function(e){fe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]})});var ye=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function xe(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var ke=null,_e=null,je=null;function Se(e){if(e=bo(e)){if("function"!==typeof ke)throw Error(a(280));var t=e.stateNode;t&&(t=ko(t),ke(e.stateNode,e.type,t))}}function Ne(e){_e?je?je.push(e):je=[e]:_e=e}function Ce(){if(_e){var e=_e,t=je;if(je=_e=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Ee(e,t){return e(t)}function Pe(){}var Te=!1;function Le(e,t,n){if(Te)return e(t,n);Te=!0;try{return Ee(e,t,n)}finally{Te=!1,(null!==_e||null!==je)&&(Pe(),Ce())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=ko(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Oe=!1;if(d)try{var Ae={};Object.defineProperty(Ae,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",Ae,Ae),window.removeEventListener("test",Ae,Ae)}catch(de){Oe=!1}function Ie(e,t,n,r,o,a,s,i,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(d){this.onError(d)}}var Fe=!1,Me=null,De=!1,Be=null,ze={onError:function(e){Fe=!0,Me=e}};function Ue(e,t,n,r,o,a,s,i,l){Fe=!1,Me=null,Ie.apply(ze,arguments)}function qe(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function He(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ve(e){if(qe(e)!==e)throw Error(a(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=qe(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(null===o)break;var s=o.alternate;if(null===s){if(null!==(r=o.return)){n=r;continue}break}if(o.child===s.child){for(s=o.child;s;){if(s===n)return Ve(o),e;if(s===r)return Ve(o),t;s=s.sibling}throw Error(a(188))}if(n.return!==r.return)n=o,r=s;else{for(var i=!1,l=o.child;l;){if(l===n){i=!0,n=o,r=s;break}if(l===r){i=!0,r=o,n=s;break}l=l.sibling}if(!i){for(l=s.child;l;){if(l===n){i=!0,n=s,r=o;break}if(l===r){i=!0,r=s,n=o;break}l=l.sibling}if(!i)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var Je=o.unstable_scheduleCallback,$e=o.unstable_cancelCallback,Qe=o.unstable_shouldYield,Ge=o.unstable_requestPaint,Ye=o.unstable_now,Xe=o.unstable_getCurrentPriorityLevel,Ze=o.unstable_ImmediatePriority,et=o.unstable_UserBlockingPriority,tt=o.unstable_NormalPriority,nt=o.unstable_LowPriority,rt=o.unstable_IdlePriority,ot=null,at=null;var st=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(it(e)/lt|0)|0},it=Math.log,lt=Math.LN2;var ct=64,dt=4194304;function ut(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,o=e.suspendedLanes,a=e.pingedLanes,s=268435455&n;if(0!==s){var i=s&~o;0!==i?r=ut(i):0!==(a&=s)&&(r=ut(a))}else 0!==(s=n&~o)?r=ut(s):0!==a&&(r=ut(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&o)&&((o=r&-r)>=(a=t&-t)||16===o&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)o=1<<(n=31-st(t)),r|=e[n],t&=~o;return r}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-st(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-st(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var xt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,kt,_t,jt,St,Nt=!1,Ct=[],Et=null,Pt=null,Tt=null,Lt=new Map,Rt=new Map,Ot=[],At="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function It(e,t){switch(e){case"focusin":case"focusout":Et=null;break;case"dragenter":case"dragleave":Pt=null;break;case"mouseover":case"mouseout":Tt=null;break;case"pointerover":case"pointerout":Lt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Ft(e,t,n,r,o,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[o]},null!==t&&(null!==(t=bo(t))&&kt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==o&&-1===t.indexOf(o)&&t.push(o),e)}function Mt(e){var t=xo(e.target);if(null!==t){var n=qe(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=He(n)))return e.blockedOn=t,void St(e.priority,function(){_t(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Dt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bo(n))&&kt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Bt(e,t,n){Dt(e)&&n.delete(t)}function zt(){Nt=!1,null!==Et&&Dt(Et)&&(Et=null),null!==Pt&&Dt(Pt)&&(Pt=null),null!==Tt&&Dt(Tt)&&(Tt=null),Lt.forEach(Bt),Rt.forEach(Bt)}function Ut(e,t){e.blockedOn===t&&(e.blockedOn=null,Nt||(Nt=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,zt)))}function qt(e){function t(t){return Ut(t,e)}if(0<Ct.length){Ut(Ct[0],e);for(var n=1;n<Ct.length;n++){var r=Ct[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Et&&Ut(Et,e),null!==Pt&&Ut(Pt,e),null!==Tt&&Ut(Tt,e),Lt.forEach(t),Rt.forEach(t),n=0;n<Ot.length;n++)(r=Ot[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ot.length&&null===(n=Ot[0]).blockedOn;)Mt(n),null===n.blockedOn&&Ot.shift()}var Ht=b.ReactCurrentBatchConfig,Vt=!0;function Wt(e,t,n,r){var o=xt,a=Ht.transition;Ht.transition=null;try{xt=1,Jt(e,t,n,r)}finally{xt=o,Ht.transition=a}}function Kt(e,t,n,r){var o=xt,a=Ht.transition;Ht.transition=null;try{xt=4,Jt(e,t,n,r)}finally{xt=o,Ht.transition=a}}function Jt(e,t,n,r){if(Vt){var o=Qt(e,t,n,r);if(null===o)Vr(e,t,r,$t,n),It(e,r);else if(function(e,t,n,r,o){switch(t){case"focusin":return Et=Ft(Et,e,t,n,r,o),!0;case"dragenter":return Pt=Ft(Pt,e,t,n,r,o),!0;case"mouseover":return Tt=Ft(Tt,e,t,n,r,o),!0;case"pointerover":var a=o.pointerId;return Lt.set(a,Ft(Lt.get(a)||null,e,t,n,r,o)),!0;case"gotpointercapture":return a=o.pointerId,Rt.set(a,Ft(Rt.get(a)||null,e,t,n,r,o)),!0}return!1}(o,e,t,n,r))r.stopPropagation();else if(It(e,r),4&t&&-1<At.indexOf(e)){for(;null!==o;){var a=bo(o);if(null!==a&&wt(a),null===(a=Qt(e,t,n,r))&&Vr(e,t,r,$t,n),a===o)break;o=a}null!==o&&r.stopPropagation()}else Vr(e,t,r,null,n)}}var $t=null;function Qt(e,t,n,r){if($t=null,null!==(e=xo(e=we(r))))if(null===(t=qe(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=He(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return $t=e,null}function Gt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Yt=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,o="value"in Yt?Yt.value:Yt.textContent,a=o.length;for(e=0;e<r&&n[e]===o[e];e++);var s=r-e;for(t=1;t<=s&&n[r-t]===o[a-t];t++);return Zt=o.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,r,o,a){for(var s in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=o,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(o):o[s]);return this.isDefaultPrevented=(null!=o.defaultPrevented?o.defaultPrevented:!1===o.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,sn,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=on(cn),un=M({},cn,{view:0,detail:0}),hn=on(un),pn=M({},un,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,sn=e.screenY-ln.screenY):sn=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),fn=on(pn),mn=on(M({},pn,{dataTransfer:0})),gn=on(M({},un,{relatedTarget:0})),yn=on(M({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=M({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xn=on(vn),bn=on(M({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_n={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=_n[e])&&!!t[e]}function Sn(){return jn}var Nn=M({},un,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?kn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cn=on(Nn),En=on(M({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Pn=on(M({},un,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),Tn=on(M({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Ln=M({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=on(Ln),On=[9,13,27,32],An=d&&"CompositionEvent"in window,In=null;d&&"documentMode"in document&&(In=document.documentMode);var Fn=d&&"TextEvent"in window&&!In,Mn=d&&(!An||In&&8<In&&11>=In),Dn=String.fromCharCode(32),Bn=!1;function zn(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Un(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var qn=!1;var Hn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Hn[e.type]:"textarea"===t}function Wn(e,t,n,r){Ne(r),0<(t=Kr(t,"onChange")).length&&(n=new dn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,Jn=null;function $n(e){Dr(e,0)}function Qn(e){if(J(wo(e)))return e}function Gn(e,t){if("change"===e)return t}var Yn=!1;if(d){var Xn;if(d){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Xn=Zn}else Xn=!1;Yn=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Kn&&(Kn.detachEvent("onpropertychange",nr),Jn=Kn=null)}function nr(e){if("value"===e.propertyName&&Qn(Jn)){var t=[];Wn(t,Jn,e,we(e)),Le($n,t)}}function rr(e,t,n){"focusin"===e?(tr(),Jn=n,(Kn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function or(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Qn(Jn)}function ar(e,t){if("click"===e)return Qn(t)}function sr(e,t){if("input"===e||"change"===e)return Qn(t)}var ir="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(ir(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!u.call(t,o)||!ir(e[o],t[o]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function dr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function ur(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?ur(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=$();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=$((e=t.contentWindow).document)}return t}function pr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&ur(n.ownerDocument.documentElement,n)){if(null!==r&&pr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var o=n.textContent.length,a=Math.min(r.start,o);r=void 0===r.end?a:Math.min(r.end,o),!e.extend&&a>r&&(o=r,r=a,a=o),o=dr(n,a);var s=dr(n,r);o&&s&&(1!==e.rangeCount||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&((t=t.createRange()).setStart(o.node,o.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=d&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,vr=null,xr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;xr||null==gr||gr!==$(r)||("selectionStart"in(r=gr)&&pr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=Kr(yr,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var kr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},_r={},jr={};function Sr(e){if(_r[e])return _r[e];if(!kr[e])return e;var t,n=kr[e];for(t in n)if(n.hasOwnProperty(t)&&t in jr)return _r[e]=n[t];return e}d&&(jr=document.createElement("div").style,"AnimationEvent"in window||(delete kr.animationend.animation,delete kr.animationiteration.animation,delete kr.animationstart.animation),"TransitionEvent"in window||delete kr.transitionend.transition);var Nr=Sr("animationend"),Cr=Sr("animationiteration"),Er=Sr("animationstart"),Pr=Sr("transitionend"),Tr=new Map,Lr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,t){Tr.set(e,t),l(t,[e])}for(var Or=0;Or<Lr.length;Or++){var Ar=Lr[Or];Rr(Ar.toLowerCase(),"on"+(Ar[0].toUpperCase()+Ar.slice(1)))}Rr(Nr,"onAnimationEnd"),Rr(Cr,"onAnimationIteration"),Rr(Er,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(Pr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ir="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ir));function Mr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,o,s,i,l,c){if(Ue.apply(this,arguments),Fe){if(!Fe)throw Error(a(198));var d=Me;Fe=!1,Me=null,De||(De=!0,Be=d)}}(r,t,void 0,e),e.currentTarget=null}function Dr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var s=r.length-1;0<=s;s--){var i=r[s],l=i.instance,c=i.currentTarget;if(i=i.listener,l!==a&&o.isPropagationStopped())break e;Mr(o,i,c),a=l}else for(s=0;s<r.length;s++){if(l=(i=r[s]).instance,c=i.currentTarget,i=i.listener,l!==a&&o.isPropagationStopped())break e;Mr(o,i,c),a=l}}}if(De)throw e=Be,De=!1,Be=null,e}function Br(e,t){var n=t[go];void 0===n&&(n=t[go]=new Set);var r=e+"__bubble";n.has(r)||(Hr(t,e,2,!1),n.add(r))}function zr(e,t,n){var r=0;t&&(r|=4),Hr(n,e,r,t)}var Ur="_reactListening"+Math.random().toString(36).slice(2);function qr(e){if(!e[Ur]){e[Ur]=!0,s.forEach(function(t){"selectionchange"!==t&&(Fr.has(t)||zr(t,!1,e),zr(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ur]||(t[Ur]=!0,zr("selectionchange",!1,t))}}function Hr(e,t,n,r){switch(Gt(t)){case 1:var o=Wt;break;case 4:o=Kt;break;default:o=Jt}n=o.bind(null,t,n,e),o=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(o=!0),r?void 0!==o?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):void 0!==o?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function Vr(e,t,n,r,o){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var i=r.stateNode.containerInfo;if(i===o||8===i.nodeType&&i.parentNode===o)break;if(4===s)for(s=r.return;null!==s;){var l=s.tag;if((3===l||4===l)&&((l=s.stateNode.containerInfo)===o||8===l.nodeType&&l.parentNode===o))return;s=s.return}for(;null!==i;){if(null===(s=xo(i)))return;if(5===(l=s.tag)||6===l){r=a=s;continue e}i=i.parentNode}}r=r.return}Le(function(){var r=a,o=we(n),s=[];e:{var i=Tr.get(e);if(void 0!==i){var l=dn,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Cn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Pn;break;case Nr:case Cr:case Er:l=yn;break;case Pr:l=Tn;break;case"scroll":l=hn;break;case"wheel":l=Rn;break;case"copy":case"cut":case"paste":l=xn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=En}var d=0!==(4&t),u=!d&&"scroll"===e,h=d?null!==i?i+"Capture":null:i;d=[];for(var p,f=r;null!==f;){var m=(p=f).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==h&&(null!=(m=Re(f,h))&&d.push(Wr(f,m,p)))),u)break;f=f.return}0<d.length&&(i=new l(i,c,null,n,o),s.push({event:i,listeners:d}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(i="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!xo(c)&&!c[mo])&&(l||i)&&(i=o.window===o?o:(i=o.ownerDocument)?i.defaultView||i.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?xo(c):null)&&(c!==(u=qe(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(d=fn,m="onMouseLeave",h="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(d=En,m="onPointerLeave",h="onPointerEnter",f="pointer"),u=null==l?i:wo(l),p=null==c?i:wo(c),(i=new d(m,f+"leave",l,n,o)).target=u,i.relatedTarget=p,m=null,xo(o)===r&&((d=new d(h,f+"enter",c,n,o)).target=p,d.relatedTarget=u,m=d),u=m,l&&c)e:{for(h=c,f=0,p=d=l;p;p=Jr(p))f++;for(p=0,m=h;m;m=Jr(m))p++;for(;0<f-p;)d=Jr(d),f--;for(;0<p-f;)h=Jr(h),p--;for(;f--;){if(d===h||null!==h&&d===h.alternate)break e;d=Jr(d),h=Jr(h)}d=null}else d=null;null!==l&&$r(s,i,l,d,!1),null!==c&&null!==u&&$r(s,u,c,d,!0)}if("select"===(l=(i=r?wo(r):window).nodeName&&i.nodeName.toLowerCase())||"input"===l&&"file"===i.type)var g=Gn;else if(Vn(i))if(Yn)g=sr;else{g=or;var y=rr}else(l=i.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(g=ar);switch(g&&(g=g(e,r))?Wn(s,g,n,o):(y&&y(e,i,r),"focusout"===e&&(y=i._wrapperState)&&y.controlled&&"number"===i.type&&ee(i,"number",i.value)),y=r?wo(r):window,e){case"focusin":(Vn(y)||"true"===y.contentEditable)&&(gr=y,yr=r,vr=null);break;case"focusout":vr=yr=gr=null;break;case"mousedown":xr=!0;break;case"contextmenu":case"mouseup":case"dragend":xr=!1,br(s,n,o);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":br(s,n,o)}var v;if(An)e:{switch(e){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else qn?zn(e,n)&&(x="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(x="onCompositionStart");x&&(Mn&&"ko"!==n.locale&&(qn||"onCompositionStart"!==x?"onCompositionEnd"===x&&qn&&(v=en()):(Xt="value"in(Yt=o)?Yt.value:Yt.textContent,qn=!0)),0<(y=Kr(r,x)).length&&(x=new bn(x,e,null,n,o),s.push({event:x,listeners:y}),v?x.data=v:null!==(v=Un(n))&&(x.data=v))),(v=Fn?function(e,t){switch(e){case"compositionend":return Un(t);case"keypress":return 32!==t.which?null:(Bn=!0,Dn);case"textInput":return(e=t.data)===Dn&&Bn?null:e;default:return null}}(e,n):function(e,t){if(qn)return"compositionend"===e||!An&&zn(e,t)?(e=en(),Zt=Xt=Yt=null,qn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(o=new bn("onBeforeInput","beforeinput",null,n,o),s.push({event:o,listeners:r}),o.data=v))}Dr(s,t)})}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kr(e,t){for(var n=t+"Capture",r=[];null!==e;){var o=e,a=o.stateNode;5===o.tag&&null!==a&&(o=a,null!=(a=Re(e,n))&&r.unshift(Wr(e,a,o)),null!=(a=Re(e,t))&&r.push(Wr(e,a,o))),e=e.return}return r}function Jr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function $r(e,t,n,r,o){for(var a=t._reactName,s=[];null!==n&&n!==r;){var i=n,l=i.alternate,c=i.stateNode;if(null!==l&&l===r)break;5===i.tag&&null!==c&&(i=c,o?null!=(l=Re(n,a))&&s.unshift(Wr(n,l,i)):o||null!=(l=Re(n,a))&&s.push(Wr(n,l,i))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}var Qr=/\r\n?/g,Gr=/\u0000|\uFFFD/g;function Yr(e){return("string"===typeof e?e:""+e).replace(Qr,"\n").replace(Gr,"")}function Xr(e,t,n){if(t=Yr(t),Yr(e)!==t&&n)throw Error(a(425))}function Zr(){}var eo=null,to=null;function no(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ro="function"===typeof setTimeout?setTimeout:void 0,oo="function"===typeof clearTimeout?clearTimeout:void 0,ao="function"===typeof Promise?Promise:void 0,so="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ao?function(e){return ao.resolve(null).then(e).catch(io)}:ro;function io(e){setTimeout(function(){throw e})}function lo(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&8===o.nodeType)if("/$"===(n=o.data)){if(0===r)return e.removeChild(o),void qt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=o}while(n);qt(t)}function co(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function uo(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var ho=Math.random().toString(36).slice(2),po="__reactFiber$"+ho,fo="__reactProps$"+ho,mo="__reactContainer$"+ho,go="__reactEvents$"+ho,yo="__reactListeners$"+ho,vo="__reactHandles$"+ho;function xo(e){var t=e[po];if(t)return t;for(var n=e.parentNode;n;){if(t=n[mo]||n[po]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=uo(e);null!==e;){if(n=e[po])return n;e=uo(e)}return t}n=(e=n).parentNode}return null}function bo(e){return!(e=e[po]||e[mo])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wo(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function ko(e){return e[fo]||null}var _o=[],jo=-1;function So(e){return{current:e}}function No(e){0>jo||(e.current=_o[jo],_o[jo]=null,jo--)}function Co(e,t){jo++,_o[jo]=e.current,e.current=t}var Eo={},Po=So(Eo),To=So(!1),Lo=Eo;function Ro(e,t){var n=e.type.contextTypes;if(!n)return Eo;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o,a={};for(o in n)a[o]=t[o];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Oo(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ao(){No(To),No(Po)}function Io(e,t,n){if(Po.current!==Eo)throw Error(a(168));Co(Po,t),Co(To,n)}function Fo(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in t))throw Error(a(108,H(e)||"Unknown",o));return M({},n,r)}function Mo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Eo,Lo=Po.current,Co(Po,e),Co(To,To.current),!0}function Do(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Fo(e,t,Lo),r.__reactInternalMemoizedMergedChildContext=e,No(To),No(Po),Co(Po,e)):No(To),Co(To,n)}var Bo=null,zo=!1,Uo=!1;function qo(e){null===Bo?Bo=[e]:Bo.push(e)}function Ho(){if(!Uo&&null!==Bo){Uo=!0;var e=0,t=xt;try{var n=Bo;for(xt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Bo=null,zo=!1}catch(o){throw null!==Bo&&(Bo=Bo.slice(e+1)),Je(Ze,Ho),o}finally{xt=t,Uo=!1}}return null}var Vo=[],Wo=0,Ko=null,Jo=0,$o=[],Qo=0,Go=null,Yo=1,Xo="";function Zo(e,t){Vo[Wo++]=Jo,Vo[Wo++]=Ko,Ko=e,Jo=t}function ea(e,t,n){$o[Qo++]=Yo,$o[Qo++]=Xo,$o[Qo++]=Go,Go=e;var r=Yo;e=Xo;var o=32-st(r)-1;r&=~(1<<o),n+=1;var a=32-st(t)+o;if(30<a){var s=o-o%5;a=(r&(1<<s)-1).toString(32),r>>=s,o-=s,Yo=1<<32-st(t)+o|n<<o|r,Xo=a+e}else Yo=1<<a|n<<o|r,Xo=e}function ta(e){null!==e.return&&(Zo(e,1),ea(e,1,0))}function na(e){for(;e===Ko;)Ko=Vo[--Wo],Vo[Wo]=null,Jo=Vo[--Wo],Vo[Wo]=null;for(;e===Go;)Go=$o[--Qo],$o[Qo]=null,Xo=$o[--Qo],$o[Qo]=null,Yo=$o[--Qo],$o[Qo]=null}var ra=null,oa=null,aa=!1,sa=null;function ia(e,t){var n=Lc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function la(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ra=e,oa=co(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ra=e,oa=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Go?{id:Yo,overflow:Xo}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Lc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ra=e,oa=null,!0);default:return!1}}function ca(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function da(e){if(aa){var t=oa;if(t){var n=t;if(!la(e,t)){if(ca(e))throw Error(a(418));t=co(n.nextSibling);var r=ra;t&&la(e,t)?ia(r,n):(e.flags=-4097&e.flags|2,aa=!1,ra=e)}}else{if(ca(e))throw Error(a(418));e.flags=-4097&e.flags|2,aa=!1,ra=e}}}function ua(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ra=e}function ha(e){if(e!==ra)return!1;if(!aa)return ua(e),aa=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!no(e.type,e.memoizedProps)),t&&(t=oa)){if(ca(e))throw pa(),Error(a(418));for(;t;)ia(e,t),t=co(t.nextSibling)}if(ua(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){oa=co(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}oa=null}}else oa=ra?co(e.stateNode.nextSibling):null;return!0}function pa(){for(var e=oa;e;)e=co(e.nextSibling)}function fa(){oa=ra=null,aa=!1}function ma(e){null===sa?sa=[e]:sa.push(e)}var ga=b.ReactCurrentBatchConfig;function ya(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var o=r,s=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===s?t.ref:(t=function(e){var t=o.refs;null===e?delete t[s]:t[s]=e},t._stringRef=s,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function va(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function xa(e){return(0,e._init)(e._payload)}function ba(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function o(e,t){return(e=Oc(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function i(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Mc(n,e.mode,r)).return=e,t):((t=o(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===_?u(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===R&&xa(a)===t.type)?((r=o(t,n.props)).ref=ya(e,t,n),r.return=e,r):((r=Ac(n.type,n.key,n.props,null,e.mode,r)).ref=ya(e,t,n),r.return=e,r)}function d(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Dc(n,e.mode,r)).return=e,t):((t=o(t,n.children||[])).return=e,t)}function u(e,t,n,r,a){return null===t||7!==t.tag?((t=Ic(n,e.mode,r,a)).return=e,t):((t=o(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Mc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Ac(t.type,t.key,t.props,null,e.mode,n)).ref=ya(e,null,t),n.return=e,n;case k:return(t=Dc(t,e.mode,n)).return=e,t;case R:return h(e,(0,t._init)(t._payload),n)}if(te(t)||I(t))return(t=Ic(t,e.mode,n,null)).return=e,t;va(e,t)}return null}function p(e,t,n,r){var o=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==o?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===o?c(e,t,n,r):null;case k:return n.key===o?d(e,t,n,r):null;case R:return p(e,t,(o=n._init)(n._payload),r)}if(te(n)||I(n))return null!==o?null:u(e,t,n,r,null);va(e,n)}return null}function f(e,t,n,r,o){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,o);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,o);case k:return d(t,e=e.get(null===r.key?n:r.key)||null,r,o);case R:return f(e,t,n,(0,r._init)(r._payload),o)}if(te(r)||I(r))return u(t,e=e.get(n)||null,r,o,null);va(t,r)}return null}function m(o,a,i,l){for(var c=null,d=null,u=a,m=a=0,g=null;null!==u&&m<i.length;m++){u.index>m?(g=u,u=null):g=u.sibling;var y=p(o,u,i[m],l);if(null===y){null===u&&(u=g);break}e&&u&&null===y.alternate&&t(o,u),a=s(y,a,m),null===d?c=y:d.sibling=y,d=y,u=g}if(m===i.length)return n(o,u),aa&&Zo(o,m),c;if(null===u){for(;m<i.length;m++)null!==(u=h(o,i[m],l))&&(a=s(u,a,m),null===d?c=u:d.sibling=u,d=u);return aa&&Zo(o,m),c}for(u=r(o,u);m<i.length;m++)null!==(g=f(u,o,m,i[m],l))&&(e&&null!==g.alternate&&u.delete(null===g.key?m:g.key),a=s(g,a,m),null===d?c=g:d.sibling=g,d=g);return e&&u.forEach(function(e){return t(o,e)}),aa&&Zo(o,m),c}function g(o,i,l,c){var d=I(l);if("function"!==typeof d)throw Error(a(150));if(null==(l=d.call(l)))throw Error(a(151));for(var u=d=null,m=i,g=i=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var x=p(o,m,v.value,c);if(null===x){null===m&&(m=y);break}e&&m&&null===x.alternate&&t(o,m),i=s(x,i,g),null===u?d=x:u.sibling=x,u=x,m=y}if(v.done)return n(o,m),aa&&Zo(o,g),d;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=h(o,v.value,c))&&(i=s(v,i,g),null===u?d=v:u.sibling=v,u=v);return aa&&Zo(o,g),d}for(m=r(o,m);!v.done;g++,v=l.next())null!==(v=f(m,o,g,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),i=s(v,i,g),null===u?d=v:u.sibling=v,u=v);return e&&m.forEach(function(e){return t(o,e)}),aa&&Zo(o,g),d}return function e(r,a,s,l){if("object"===typeof s&&null!==s&&s.type===_&&null===s.key&&(s=s.props.children),"object"===typeof s&&null!==s){switch(s.$$typeof){case w:e:{for(var c=s.key,d=a;null!==d;){if(d.key===c){if((c=s.type)===_){if(7===d.tag){n(r,d.sibling),(a=o(d,s.props.children)).return=r,r=a;break e}}else if(d.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===R&&xa(c)===d.type){n(r,d.sibling),(a=o(d,s.props)).ref=ya(r,d,s),a.return=r,r=a;break e}n(r,d);break}t(r,d),d=d.sibling}s.type===_?((a=Ic(s.props.children,r.mode,l,s.key)).return=r,r=a):((l=Ac(s.type,s.key,s.props,null,r.mode,l)).ref=ya(r,a,s),l.return=r,r=l)}return i(r);case k:e:{for(d=s.key;null!==a;){if(a.key===d){if(4===a.tag&&a.stateNode.containerInfo===s.containerInfo&&a.stateNode.implementation===s.implementation){n(r,a.sibling),(a=o(a,s.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Dc(s,r.mode,l)).return=r,r=a}return i(r);case R:return e(r,a,(d=s._init)(s._payload),l)}if(te(s))return m(r,a,s,l);if(I(s))return g(r,a,s,l);va(r,s)}return"string"===typeof s&&""!==s||"number"===typeof s?(s=""+s,null!==a&&6===a.tag?(n(r,a.sibling),(a=o(a,s)).return=r,r=a):(n(r,a),(a=Mc(s,r.mode,l)).return=r,r=a),i(r)):n(r,a)}}var wa=ba(!0),ka=ba(!1),_a=So(null),ja=null,Sa=null,Na=null;function Ca(){Na=Sa=ja=null}function Ea(e){var t=_a.current;No(_a),e._currentValue=t}function Pa(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ta(e,t){ja=e,Na=Sa=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(xi=!0),e.firstContext=null)}function La(e){var t=e._currentValue;if(Na!==e)if(e={context:e,memoizedValue:t,next:null},null===Sa){if(null===ja)throw Error(a(308));Sa=e,ja.dependencies={lanes:0,firstContext:e}}else Sa=Sa.next=e;return t}var Ra=null;function Oa(e){null===Ra?Ra=[e]:Ra.push(e)}function Aa(e,t,n,r){var o=t.interleaved;return null===o?(n.next=n,Oa(t)):(n.next=o.next,o.next=n),t.interleaved=n,Ia(e,r)}function Ia(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Fa=!1;function Ma(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Da(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ba(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function za(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&El)){var o=r.pending;return null===o?t.next=t:(t.next=o.next,o.next=t),r.pending=t,Ia(e,n)}return null===(o=r.interleaved)?(t.next=t,Oa(r)):(t.next=o.next,o.next=t),r.interleaved=t,Ia(e,n)}function Ua(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function qa(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var o=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?o=a=s:a=a.next=s,n=n.next}while(null!==n);null===a?o=a=t:a=a.next=t}else o=a=t;return n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ha(e,t,n,r){var o=e.updateQueue;Fa=!1;var a=o.firstBaseUpdate,s=o.lastBaseUpdate,i=o.shared.pending;if(null!==i){o.shared.pending=null;var l=i,c=l.next;l.next=null,null===s?a=c:s.next=c,s=l;var d=e.alternate;null!==d&&((i=(d=d.updateQueue).lastBaseUpdate)!==s&&(null===i?d.firstBaseUpdate=c:i.next=c,d.lastBaseUpdate=l))}if(null!==a){var u=o.baseState;for(s=0,d=c=l=null,i=a;;){var h=i.lane,p=i.eventTime;if((r&h)===h){null!==d&&(d=d.next={eventTime:p,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var f=e,m=i;switch(h=t,p=n,m.tag){case 1:if("function"===typeof(f=m.payload)){u=f.call(p,u,h);break e}u=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(h="function"===typeof(f=m.payload)?f.call(p,u,h):f)||void 0===h)break e;u=M({},u,h);break e;case 2:Fa=!0}}null!==i.callback&&0!==i.lane&&(e.flags|=64,null===(h=o.effects)?o.effects=[i]:h.push(i))}else p={eventTime:p,lane:h,tag:i.tag,payload:i.payload,callback:i.callback,next:null},null===d?(c=d=p,l=u):d=d.next=p,s|=h;if(null===(i=i.next)){if(null===(i=o.shared.pending))break;i=(h=i).next,h.next=null,o.lastBaseUpdate=h,o.shared.pending=null}}if(null===d&&(l=u),o.baseState=l,o.firstBaseUpdate=c,o.lastBaseUpdate=d,null!==(t=o.shared.interleaved)){o=t;do{s|=o.lane,o=o.next}while(o!==t)}else null===a&&(o.shared.lanes=0);Fl|=s,e.lanes=s,e.memoizedState=u}}function Va(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(null!==o){if(r.callback=null,r=n,"function"!==typeof o)throw Error(a(191,o));o.call(r)}}}var Wa={},Ka=So(Wa),Ja=So(Wa),$a=So(Wa);function Qa(e){if(e===Wa)throw Error(a(174));return e}function Ga(e,t){switch(Co($a,t),Co(Ja,e),Co(Ka,Wa),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}No(Ka),Co(Ka,t)}function Ya(){No(Ka),No(Ja),No($a)}function Xa(e){Qa($a.current);var t=Qa(Ka.current),n=le(t,e.type);t!==n&&(Co(Ja,e),Co(Ka,n))}function Za(e){Ja.current===e&&(No(Ka),No(Ja))}var es=So(0);function ts(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ns=[];function rs(){for(var e=0;e<ns.length;e++)ns[e]._workInProgressVersionPrimary=null;ns.length=0}var os=b.ReactCurrentDispatcher,as=b.ReactCurrentBatchConfig,ss=0,is=null,ls=null,cs=null,ds=!1,us=!1,hs=0,ps=0;function fs(){throw Error(a(321))}function ms(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ir(e[n],t[n]))return!1;return!0}function gs(e,t,n,r,o,s){if(ss=s,is=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,os.current=null===e||null===e.memoizedState?Zs:ei,e=n(r,o),us){s=0;do{if(us=!1,hs=0,25<=s)throw Error(a(301));s+=1,cs=ls=null,t.updateQueue=null,os.current=ti,e=n(r,o)}while(us)}if(os.current=Xs,t=null!==ls&&null!==ls.next,ss=0,cs=ls=is=null,ds=!1,t)throw Error(a(300));return e}function ys(){var e=0!==hs;return hs=0,e}function vs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===cs?is.memoizedState=cs=e:cs=cs.next=e,cs}function xs(){if(null===ls){var e=is.alternate;e=null!==e?e.memoizedState:null}else e=ls.next;var t=null===cs?is.memoizedState:cs.next;if(null!==t)cs=t,ls=e;else{if(null===e)throw Error(a(310));e={memoizedState:(ls=e).memoizedState,baseState:ls.baseState,baseQueue:ls.baseQueue,queue:ls.queue,next:null},null===cs?is.memoizedState=cs=e:cs=cs.next=e}return cs}function bs(e,t){return"function"===typeof t?t(e):t}function ws(e){var t=xs(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=ls,o=r.baseQueue,s=n.pending;if(null!==s){if(null!==o){var i=o.next;o.next=s.next,s.next=i}r.baseQueue=o=s,n.pending=null}if(null!==o){s=o.next,r=r.baseState;var l=i=null,c=null,d=s;do{var u=d.lane;if((ss&u)===u)null!==c&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};null===c?(l=c=h,i=r):c=c.next=h,is.lanes|=u,Fl|=u}d=d.next}while(null!==d&&d!==s);null===c?i=r:c.next=l,ir(r,t.memoizedState)||(xi=!0),t.memoizedState=r,t.baseState=i,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){o=e;do{s=o.lane,is.lanes|=s,Fl|=s,o=o.next}while(o!==e)}else null===o&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ks(e){var t=xs(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,s=t.memoizedState;if(null!==o){n.pending=null;var i=o=o.next;do{s=e(s,i.action),i=i.next}while(i!==o);ir(s,t.memoizedState)||(xi=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function _s(){}function js(e,t){var n=is,r=xs(),o=t(),s=!ir(r.memoizedState,o);if(s&&(r.memoizedState=o,xi=!0),r=r.queue,Fs(Cs.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||null!==cs&&1&cs.memoizedState.tag){if(n.flags|=2048,Ls(9,Ns.bind(null,n,r,o,t),void 0,null),null===Pl)throw Error(a(349));0!==(30&ss)||Ss(n,t,o)}return o}function Ss(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=is.updateQueue)?(t={lastEffect:null,stores:null},is.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ns(e,t,n,r){t.value=n,t.getSnapshot=r,Es(t)&&Ps(e)}function Cs(e,t,n){return n(function(){Es(t)&&Ps(e)})}function Es(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ir(e,n)}catch(r){return!0}}function Ps(e){var t=Ia(e,1);null!==t&&nc(t,e,1,-1)}function Ts(e){var t=vs();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bs,lastRenderedState:e},t.queue=e,e=e.dispatch=$s.bind(null,is,e),[t.memoizedState,e]}function Ls(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=is.updateQueue)?(t={lastEffect:null,stores:null},is.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Rs(){return xs().memoizedState}function Os(e,t,n,r){var o=vs();is.flags|=e,o.memoizedState=Ls(1|t,n,void 0,void 0===r?null:r)}function As(e,t,n,r){var o=xs();r=void 0===r?null:r;var a=void 0;if(null!==ls){var s=ls.memoizedState;if(a=s.destroy,null!==r&&ms(r,s.deps))return void(o.memoizedState=Ls(t,n,a,r))}is.flags|=e,o.memoizedState=Ls(1|t,n,a,r)}function Is(e,t){return Os(8390656,8,e,t)}function Fs(e,t){return As(2048,8,e,t)}function Ms(e,t){return As(4,2,e,t)}function Ds(e,t){return As(4,4,e,t)}function Bs(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function zs(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,As(4,4,Bs.bind(null,t,e),n)}function Us(){}function qs(e,t){var n=xs();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ms(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Hs(e,t){var n=xs();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ms(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Vs(e,t,n){return 0===(21&ss)?(e.baseState&&(e.baseState=!1,xi=!0),e.memoizedState=n):(ir(n,t)||(n=mt(),is.lanes|=n,Fl|=n,e.baseState=!0),t)}function Ws(e,t){var n=xt;xt=0!==n&&4>n?n:4,e(!0);var r=as.transition;as.transition={};try{e(!1),t()}finally{xt=n,as.transition=r}}function Ks(){return xs().memoizedState}function Js(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Qs(e))Gs(t,n);else if(null!==(n=Aa(e,t,n,r))){nc(n,e,r,ec()),Ys(n,t,r)}}function $s(e,t,n){var r=tc(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Qs(e))Gs(t,o);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var s=t.lastRenderedState,i=a(s,n);if(o.hasEagerState=!0,o.eagerState=i,ir(i,s)){var l=t.interleaved;return null===l?(o.next=o,Oa(t)):(o.next=l.next,l.next=o),void(t.interleaved=o)}}catch(c){}null!==(n=Aa(e,t,o,r))&&(nc(n,e,r,o=ec()),Ys(n,t,r))}}function Qs(e){var t=e.alternate;return e===is||null!==t&&t===is}function Gs(e,t){us=ds=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ys(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var Xs={readContext:La,useCallback:fs,useContext:fs,useEffect:fs,useImperativeHandle:fs,useInsertionEffect:fs,useLayoutEffect:fs,useMemo:fs,useReducer:fs,useRef:fs,useState:fs,useDebugValue:fs,useDeferredValue:fs,useTransition:fs,useMutableSource:fs,useSyncExternalStore:fs,useId:fs,unstable_isNewReconciler:!1},Zs={readContext:La,useCallback:function(e,t){return vs().memoizedState=[e,void 0===t?null:t],e},useContext:La,useEffect:Is,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Os(4194308,4,Bs.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Os(4194308,4,e,t)},useInsertionEffect:function(e,t){return Os(4,2,e,t)},useMemo:function(e,t){var n=vs();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=vs();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Js.bind(null,is,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},vs().memoizedState=e},useState:Ts,useDebugValue:Us,useDeferredValue:function(e){return vs().memoizedState=e},useTransition:function(){var e=Ts(!1),t=e[0];return e=Ws.bind(null,e[1]),vs().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=is,o=vs();if(aa){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Pl)throw Error(a(349));0!==(30&ss)||Ss(r,t,n)}o.memoizedState=n;var s={value:n,getSnapshot:t};return o.queue=s,Is(Cs.bind(null,r,s,e),[e]),r.flags|=2048,Ls(9,Ns.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=vs(),t=Pl.identifierPrefix;if(aa){var n=Xo;t=":"+t+"R"+(n=(Yo&~(1<<32-st(Yo)-1)).toString(32)+n),0<(n=hs++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ps++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ei={readContext:La,useCallback:qs,useContext:La,useEffect:Fs,useImperativeHandle:zs,useInsertionEffect:Ms,useLayoutEffect:Ds,useMemo:Hs,useReducer:ws,useRef:Rs,useState:function(){return ws(bs)},useDebugValue:Us,useDeferredValue:function(e){return Vs(xs(),ls.memoizedState,e)},useTransition:function(){return[ws(bs)[0],xs().memoizedState]},useMutableSource:_s,useSyncExternalStore:js,useId:Ks,unstable_isNewReconciler:!1},ti={readContext:La,useCallback:qs,useContext:La,useEffect:Fs,useImperativeHandle:zs,useInsertionEffect:Ms,useLayoutEffect:Ds,useMemo:Hs,useReducer:ks,useRef:Rs,useState:function(){return ks(bs)},useDebugValue:Us,useDeferredValue:function(e){var t=xs();return null===ls?t.memoizedState=e:Vs(t,ls.memoizedState,e)},useTransition:function(){return[ks(bs)[0],xs().memoizedState]},useMutableSource:_s,useSyncExternalStore:js,useId:Ks,unstable_isNewReconciler:!1};function ni(e,t){if(e&&e.defaultProps){for(var n in t=M({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ri(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:M({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var oi={isMounted:function(e){return!!(e=e._reactInternals)&&qe(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),o=tc(e),a=Ba(r,o);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=za(e,a,o))&&(nc(t,e,o,r),Ua(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),o=tc(e),a=Ba(r,o);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=za(e,a,o))&&(nc(t,e,o,r),Ua(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),o=Ba(n,r);o.tag=2,void 0!==t&&null!==t&&(o.callback=t),null!==(t=za(e,o,r))&&(nc(t,e,r,n),Ua(t,e,r))}};function ai(e,t,n,r,o,a,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,s):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(o,a))}function si(e,t,n){var r=!1,o=Eo,a=t.contextType;return"object"===typeof a&&null!==a?a=La(a):(o=Oo(t)?Lo:Po.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ro(e,o):Eo),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=oi,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=a),t}function ii(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&oi.enqueueReplaceState(t,t.state,null)}function li(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs={},Ma(e);var a=t.contextType;"object"===typeof a&&null!==a?o.context=La(a):(a=Oo(t)?Lo:Po.current,o.context=Ro(e,a)),o.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(ri(e,t,a,n),o.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof o.getSnapshotBeforeUpdate||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||(t=o.state,"function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),t!==o.state&&oi.enqueueReplaceState(o,o.state,null),Ha(e,n,o,r),o.state=e.memoizedState),"function"===typeof o.componentDidMount&&(e.flags|=4194308)}function ci(e,t){try{var n="",r=t;do{n+=U(r),r=r.return}while(r);var o=n}catch(a){o="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:o,digest:null}}function di(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ui(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var hi="function"===typeof WeakMap?WeakMap:Map;function pi(e,t,n){(n=Ba(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Vl||(Vl=!0,Wl=r),ui(0,t)},n}function fi(e,t,n){(n=Ba(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){ui(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){ui(0,t),"function"!==typeof r&&(null===Kl?Kl=new Set([this]):Kl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function mi(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new hi;var o=new Set;r.set(t,o)}else void 0===(o=r.get(t))&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=Sc.bind(null,e,t,n),t.then(e,e))}function gi(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function yi(e,t,n,r,o){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Ba(-1,1)).tag=2,za(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=o,e)}var vi=b.ReactCurrentOwner,xi=!1;function bi(e,t,n,r){t.child=null===e?ka(t,null,n,r):wa(t,e.child,n,r)}function wi(e,t,n,r,o){n=n.render;var a=t.ref;return Ta(t,o),r=gs(e,t,n,r,a,o),n=ys(),null===e||xi?(aa&&n&&ta(t),t.flags|=1,bi(e,t,r,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Vi(e,t,o))}function ki(e,t,n,r,o){if(null===e){var a=n.type;return"function"!==typeof a||Rc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ac(n.type,null,r,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,_i(e,t,a,r,o))}if(a=e.child,0===(e.lanes&o)){var s=a.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(s,r)&&e.ref===t.ref)return Vi(e,t,o)}return t.flags|=1,(e=Oc(a,r)).ref=t.ref,e.return=t,t.child=e}function _i(e,t,n,r,o){if(null!==e){var a=e.memoizedProps;if(lr(a,r)&&e.ref===t.ref){if(xi=!1,t.pendingProps=r=a,0===(e.lanes&o))return t.lanes=e.lanes,Vi(e,t,o);0!==(131072&e.flags)&&(xi=!0)}}return Ni(e,t,n,r,o)}function ji(e,t,n){var r=t.pendingProps,o=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Co(Ol,Rl),Rl|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Co(Ol,Rl),Rl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Co(Ol,Rl),Rl|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Co(Ol,Rl),Rl|=r;return bi(e,t,o,n),t.child}function Si(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ni(e,t,n,r,o){var a=Oo(n)?Lo:Po.current;return a=Ro(t,a),Ta(t,o),n=gs(e,t,n,r,a,o),r=ys(),null===e||xi?(aa&&r&&ta(t),t.flags|=1,bi(e,t,n,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Vi(e,t,o))}function Ci(e,t,n,r,o){if(Oo(n)){var a=!0;Mo(t)}else a=!1;if(Ta(t,o),null===t.stateNode)Hi(e,t),si(t,n,r),li(t,n,r,o),r=!0;else if(null===e){var s=t.stateNode,i=t.memoizedProps;s.props=i;var l=s.context,c=n.contextType;"object"===typeof c&&null!==c?c=La(c):c=Ro(t,c=Oo(n)?Lo:Po.current);var d=n.getDerivedStateFromProps,u="function"===typeof d||"function"===typeof s.getSnapshotBeforeUpdate;u||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(i!==r||l!==c)&&ii(t,s,r,c),Fa=!1;var h=t.memoizedState;s.state=h,Ha(t,r,s,o),l=t.memoizedState,i!==r||h!==l||To.current||Fa?("function"===typeof d&&(ri(t,n,d,r),l=t.memoizedState),(i=Fa||ai(t,n,i,r,h,l,c))?(u||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=c,r=i):("function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,Da(e,t),i=t.memoizedProps,c=t.type===t.elementType?i:ni(t.type,i),s.props=c,u=t.pendingProps,h=s.context,"object"===typeof(l=n.contextType)&&null!==l?l=La(l):l=Ro(t,l=Oo(n)?Lo:Po.current);var p=n.getDerivedStateFromProps;(d="function"===typeof p||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(i!==u||h!==l)&&ii(t,s,r,l),Fa=!1,h=t.memoizedState,s.state=h,Ha(t,r,s,o);var f=t.memoizedState;i!==u||h!==f||To.current||Fa?("function"===typeof p&&(ri(t,n,p,r),f=t.memoizedState),(c=Fa||ai(t,n,c,r,h,f,l)||!1)?(d||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,f,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),s.props=r,s.state=f,s.context=l,r=c):("function"!==typeof s.componentDidUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Ei(e,t,n,r,a,o)}function Ei(e,t,n,r,o,a){Si(e,t);var s=0!==(128&t.flags);if(!r&&!s)return o&&Do(t,n,!1),Vi(e,t,a);r=t.stateNode,vi.current=t;var i=s&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&s?(t.child=wa(t,e.child,null,a),t.child=wa(t,null,i,a)):bi(e,t,i,a),t.memoizedState=r.state,o&&Do(t,n,!0),t.child}function Pi(e){var t=e.stateNode;t.pendingContext?Io(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Io(0,t.context,!1),Ga(e,t.containerInfo)}function Ti(e,t,n,r,o){return fa(),ma(o),t.flags|=256,bi(e,t,n,r),t.child}var Li,Ri,Oi,Ai,Ii={dehydrated:null,treeContext:null,retryLane:0};function Fi(e){return{baseLanes:e,cachePool:null,transitions:null}}function Mi(e,t,n){var r,o=t.pendingProps,s=es.current,i=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&s)),r?(i=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(s|=1),Co(es,1&s),null===e)return da(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=o.children,e=o.fallback,i?(o=t.mode,i=t.child,l={mode:"hidden",children:l},0===(1&o)&&null!==i?(i.childLanes=0,i.pendingProps=l):i=Fc(l,o,0,null),e=Ic(e,o,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Fi(n),t.memoizedState=Ii,e):Di(t,l));if(null!==(s=e.memoizedState)&&null!==(r=s.dehydrated))return function(e,t,n,r,o,s,i){if(n)return 256&t.flags?(t.flags&=-257,Bi(e,t,i,r=di(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=r.fallback,o=t.mode,r=Fc({mode:"visible",children:r.children},o,0,null),(s=Ic(s,o,i,null)).flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,0!==(1&t.mode)&&wa(t,e.child,null,i),t.child.memoizedState=Fi(i),t.memoizedState=Ii,s);if(0===(1&t.mode))return Bi(e,t,i,null);if("$!"===o.data){if(r=o.nextSibling&&o.nextSibling.dataset)var l=r.dgst;return r=l,Bi(e,t,i,r=di(s=Error(a(419)),r,void 0))}if(l=0!==(i&e.childLanes),xi||l){if(null!==(r=Pl)){switch(i&-i){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}0!==(o=0!==(o&(r.suspendedLanes|i))?0:o)&&o!==s.retryLane&&(s.retryLane=o,Ia(e,o),nc(r,e,o,-1))}return mc(),Bi(e,t,i,r=di(Error(a(421))))}return"$?"===o.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),o._reactRetry=t,null):(e=s.treeContext,oa=co(o.nextSibling),ra=t,aa=!0,sa=null,null!==e&&($o[Qo++]=Yo,$o[Qo++]=Xo,$o[Qo++]=Go,Yo=e.id,Xo=e.overflow,Go=t),t=Di(t,r.children),t.flags|=4096,t)}(e,t,l,o,r,s,n);if(i){i=o.fallback,l=t.mode,r=(s=e.child).sibling;var c={mode:"hidden",children:o.children};return 0===(1&l)&&t.child!==s?((o=t.child).childLanes=0,o.pendingProps=c,t.deletions=null):(o=Oc(s,c)).subtreeFlags=14680064&s.subtreeFlags,null!==r?i=Oc(r,i):(i=Ic(i,l,n,null)).flags|=2,i.return=t,o.return=t,o.sibling=i,t.child=o,o=i,i=t.child,l=null===(l=e.child.memoizedState)?Fi(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},i.memoizedState=l,i.childLanes=e.childLanes&~n,t.memoizedState=Ii,o}return e=(i=e.child).sibling,o=Oc(i,{mode:"visible",children:o.children}),0===(1&t.mode)&&(o.lanes=n),o.return=t,o.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=o,t.memoizedState=null,o}function Di(e,t){return(t=Fc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Bi(e,t,n,r){return null!==r&&ma(r),wa(t,e.child,null,n),(e=Di(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function zi(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Pa(e.return,t,n)}function Ui(e,t,n,r,o){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=o)}function qi(e,t,n){var r=t.pendingProps,o=r.revealOrder,a=r.tail;if(bi(e,t,r.children,n),0!==(2&(r=es.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&zi(e,n,t);else if(19===e.tag)zi(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Co(es,r),0===(1&t.mode))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;null!==n;)null!==(e=n.alternate)&&null===ts(e)&&(o=n),n=n.sibling;null===(n=o)?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),Ui(t,!1,o,n,a);break;case"backwards":for(n=null,o=t.child,t.child=null;null!==o;){if(null!==(e=o.alternate)&&null===ts(e)){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}Ui(t,!0,n,null,a);break;case"together":Ui(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Hi(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Vi(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Oc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Oc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Wi(e,t){if(!aa)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ki(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=14680064&o.subtreeFlags,r|=14680064&o.flags,o.return=e,o=o.sibling;else for(o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ji(e,t,n){var r=t.pendingProps;switch(na(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ki(t),null;case 1:case 17:return Oo(t.type)&&Ao(),Ki(t),null;case 3:return r=t.stateNode,Ya(),No(To),No(Po),rs(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ha(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==sa&&(sc(sa),sa=null))),Ri(e,t),Ki(t),null;case 5:Za(t);var o=Qa($a.current);if(n=t.type,null!==e&&null!=t.stateNode)Oi(e,t,n,r,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Ki(t),null}if(e=Qa(Ka.current),ha(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[po]=t,r[fo]=s,e=0!==(1&t.mode),n){case"dialog":Br("cancel",r),Br("close",r);break;case"iframe":case"object":case"embed":Br("load",r);break;case"video":case"audio":for(o=0;o<Ir.length;o++)Br(Ir[o],r);break;case"source":Br("error",r);break;case"img":case"image":case"link":Br("error",r),Br("load",r);break;case"details":Br("toggle",r);break;case"input":G(r,s),Br("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Br("invalid",r);break;case"textarea":oe(r,s),Br("invalid",r)}for(var l in ve(n,s),o=null,s)if(s.hasOwnProperty(l)){var c=s[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==s.suppressHydrationWarning&&Xr(r.textContent,c,e),o=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==s.suppressHydrationWarning&&Xr(r.textContent,c,e),o=["children",""+c]):i.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Br("scroll",r)}switch(n){case"input":K(r),Z(r,s,!0);break;case"textarea":K(r),se(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=Zr)}r=o,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===o.nodeType?o:o.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ie(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[po]=t,e[fo]=r,Li(e,t,!1,!1),t.stateNode=e;e:{switch(l=xe(n,r),n){case"dialog":Br("cancel",e),Br("close",e),o=r;break;case"iframe":case"object":case"embed":Br("load",e),o=r;break;case"video":case"audio":for(o=0;o<Ir.length;o++)Br(Ir[o],e);o=r;break;case"source":Br("error",e),o=r;break;case"img":case"image":case"link":Br("error",e),Br("load",e),o=r;break;case"details":Br("toggle",e),o=r;break;case"input":G(e,r),o=Q(e,r),Br("invalid",e);break;case"option":default:o=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=M({},r,{value:void 0}),Br("invalid",e);break;case"textarea":oe(e,r),o=re(e,r),Br("invalid",e)}for(s in ve(n,o),c=o)if(c.hasOwnProperty(s)){var d=c[s];"style"===s?ge(e,d):"dangerouslySetInnerHTML"===s?null!=(d=d?d.__html:void 0)&&ue(e,d):"children"===s?"string"===typeof d?("textarea"!==n||""!==d)&&he(e,d):"number"===typeof d&&he(e,""+d):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(i.hasOwnProperty(s)?null!=d&&"onScroll"===s&&Br("scroll",e):null!=d&&x(e,s,d,l))}switch(n){case"input":K(e),Z(e,r,!1);break;case"textarea":K(e),se(e);break;case"option":null!=r.value&&e.setAttribute("value",""+V(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?ne(e,!!r.multiple,s,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof o.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ki(t),null;case 6:if(e&&null!=t.stateNode)Ai(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=Qa($a.current),Qa(Ka.current),ha(t)){if(r=t.stateNode,n=t.memoizedProps,r[po]=t,(s=r.nodeValue!==n)&&null!==(e=ra))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}s&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[po]=t,t.stateNode=r}return Ki(t),null;case 13:if(No(es),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(aa&&null!==oa&&0!==(1&t.mode)&&0===(128&t.flags))pa(),fa(),t.flags|=98560,s=!1;else if(s=ha(t),null!==r&&null!==r.dehydrated){if(null===e){if(!s)throw Error(a(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(a(317));s[po]=t}else fa(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ki(t),s=!1}else null!==sa&&(sc(sa),sa=null),s=!0;if(!s)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&es.current)?0===Al&&(Al=3):mc())),null!==t.updateQueue&&(t.flags|=4),Ki(t),null);case 4:return Ya(),Ri(e,t),null===e&&qr(t.stateNode.containerInfo),Ki(t),null;case 10:return Ea(t.type._context),Ki(t),null;case 19:if(No(es),null===(s=t.memoizedState))return Ki(t),null;if(r=0!==(128&t.flags),null===(l=s.rendering))if(r)Wi(s,!1);else{if(0!==Al||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ts(e))){for(t.flags|=128,Wi(s,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=14680066,null===(l=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,e=l.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Co(es,1&es.current|2),t.child}e=e.sibling}null!==s.tail&&Ye()>ql&&(t.flags|=128,r=!0,Wi(s,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ts(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Wi(s,!0),null===s.tail&&"hidden"===s.tailMode&&!l.alternate&&!aa)return Ki(t),null}else 2*Ye()-s.renderingStartTime>ql&&1073741824!==n&&(t.flags|=128,r=!0,Wi(s,!1),t.lanes=4194304);s.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=s.last)?n.sibling=l:t.child=l,s.last=l)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Ye(),t.sibling=null,n=es.current,Co(es,r?1&n|2:1&n),t):(Ki(t),null);case 22:case 23:return uc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Rl)&&(Ki(t),6&t.subtreeFlags&&(t.flags|=8192)):Ki(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function $i(e,t){switch(na(t),t.tag){case 1:return Oo(t.type)&&Ao(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Ya(),No(To),No(Po),rs(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Za(t),null;case 13:if(No(es),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));fa()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return No(es),null;case 4:return Ya(),null;case 10:return Ea(t.type._context),null;case 22:case 23:return uc(),null;default:return null}}Li=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ri=function(){},Oi=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,Qa(Ka.current);var a,s=null;switch(n){case"input":o=Q(e,o),r=Q(e,r),s=[];break;case"select":o=M({},o,{value:void 0}),r=M({},r,{value:void 0}),s=[];break;case"textarea":o=re(e,o),r=re(e,r),s=[];break;default:"function"!==typeof o.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(d in ve(n,r),n=null,o)if(!r.hasOwnProperty(d)&&o.hasOwnProperty(d)&&null!=o[d])if("style"===d){var l=o[d];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(i.hasOwnProperty(d)?s||(s=[]):(s=s||[]).push(d,null));for(d in r){var c=r[d];if(l=null!=o?o[d]:void 0,r.hasOwnProperty(d)&&c!==l&&(null!=c||null!=l))if("style"===d)if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(s||(s=[]),s.push(d,n)),n=c;else"dangerouslySetInnerHTML"===d?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(s=s||[]).push(d,c)):"children"===d?"string"!==typeof c&&"number"!==typeof c||(s=s||[]).push(d,""+c):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(i.hasOwnProperty(d)?(null!=c&&"onScroll"===d&&Br("scroll",e),s||l===c||(s=[])):(s=s||[]).push(d,c))}n&&(s=s||[]).push("style",n);var d=s;(t.updateQueue=d)&&(t.flags|=4)}},Ai=function(e,t,n,r){n!==r&&(t.flags|=4)};var Qi=!1,Gi=!1,Yi="function"===typeof WeakSet?WeakSet:Set,Xi=null;function Zi(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){jc(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){jc(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var o=r=r.next;do{if((o.tag&e)===e){var a=o.destroy;o.destroy=void 0,void 0!==a&&el(t,n,a)}o=o.next}while(o!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ol(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function al(e){var t=e.alternate;null!==t&&(e.alternate=null,al(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[po],delete t[fo],delete t[go],delete t[yo],delete t[vo])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function sl(e){return 5===e.tag||3===e.tag||4===e.tag}function il(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||sl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var dl=null,ul=!1;function hl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(ot,n)}catch(i){}switch(n.tag){case 5:Gi||Zi(n,t);case 6:var r=dl,o=ul;dl=null,hl(e,t,n),ul=o,null!==(dl=r)&&(ul?(e=dl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):dl.removeChild(n.stateNode));break;case 18:null!==dl&&(ul?(e=dl,n=n.stateNode,8===e.nodeType?lo(e.parentNode,n):1===e.nodeType&&lo(e,n),qt(e)):lo(dl,n.stateNode));break;case 4:r=dl,o=ul,dl=n.stateNode.containerInfo,ul=!0,hl(e,t,n),dl=r,ul=o;break;case 0:case 11:case 14:case 15:if(!Gi&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){o=r=r.next;do{var a=o,s=a.destroy;a=a.tag,void 0!==s&&(0!==(2&a)||0!==(4&a))&&el(n,t,s),o=o.next}while(o!==r)}hl(e,t,n);break;case 1:if(!Gi&&(Zi(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(i){jc(n,t,i)}hl(e,t,n);break;case 21:hl(e,t,n);break;case 22:1&n.mode?(Gi=(r=Gi)||null!==n.memoizedState,hl(e,t,n),Gi=r):hl(e,t,n);break;default:hl(e,t,n)}}function fl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Yi),t.forEach(function(t){var r=Ec.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function ml(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var o=n[r];try{var s=e,i=t,l=i;e:for(;null!==l;){switch(l.tag){case 5:dl=l.stateNode,ul=!1;break e;case 3:case 4:dl=l.stateNode.containerInfo,ul=!0;break e}l=l.return}if(null===dl)throw Error(a(160));pl(s,i,o),dl=null,ul=!1;var c=o.alternate;null!==c&&(c.return=null),o.return=null}catch(d){jc(o,t,d)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),yl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(g){jc(e,e.return,g)}try{nl(5,e,e.return)}catch(g){jc(e,e.return,g)}}break;case 1:ml(t,e),yl(e),512&r&&null!==n&&Zi(n,n.return);break;case 5:if(ml(t,e),yl(e),512&r&&null!==n&&Zi(n,n.return),32&e.flags){var o=e.stateNode;try{he(o,"")}catch(g){jc(e,e.return,g)}}if(4&r&&null!=(o=e.stateNode)){var s=e.memoizedProps,i=null!==n?n.memoizedProps:s,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===s.type&&null!=s.name&&Y(o,s),xe(l,i);var d=xe(l,s);for(i=0;i<c.length;i+=2){var u=c[i],h=c[i+1];"style"===u?ge(o,h):"dangerouslySetInnerHTML"===u?ue(o,h):"children"===u?he(o,h):x(o,u,h,d)}switch(l){case"input":X(o,s);break;case"textarea":ae(o,s);break;case"select":var p=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!s.multiple;var f=s.value;null!=f?ne(o,!!s.multiple,f,!1):p!==!!s.multiple&&(null!=s.defaultValue?ne(o,!!s.multiple,s.defaultValue,!0):ne(o,!!s.multiple,s.multiple?[]:"",!1))}o[fo]=s}catch(g){jc(e,e.return,g)}}break;case 6:if(ml(t,e),yl(e),4&r){if(null===e.stateNode)throw Error(a(162));o=e.stateNode,s=e.memoizedProps;try{o.nodeValue=s}catch(g){jc(e,e.return,g)}}break;case 3:if(ml(t,e),yl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{qt(t.containerInfo)}catch(g){jc(e,e.return,g)}break;case 4:default:ml(t,e),yl(e);break;case 13:ml(t,e),yl(e),8192&(o=e.child).flags&&(s=null!==o.memoizedState,o.stateNode.isHidden=s,!s||null!==o.alternate&&null!==o.alternate.memoizedState||(Ul=Ye())),4&r&&fl(e);break;case 22:if(u=null!==n&&null!==n.memoizedState,1&e.mode?(Gi=(d=Gi)||u,ml(t,e),Gi=d):ml(t,e),yl(e),8192&r){if(d=null!==e.memoizedState,(e.stateNode.isHidden=d)&&!u&&0!==(1&e.mode))for(Xi=e,u=e.child;null!==u;){for(h=Xi=u;null!==Xi;){switch(f=(p=Xi).child,p.tag){case 0:case 11:case 14:case 15:nl(4,p,p.return);break;case 1:Zi(p,p.return);var m=p.stateNode;if("function"===typeof m.componentWillUnmount){r=p,n=p.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){jc(r,n,g)}}break;case 5:Zi(p,p.return);break;case 22:if(null!==p.memoizedState){wl(h);continue}}null!==f?(f.return=p,Xi=f):wl(h)}u=u.sibling}e:for(u=null,h=e;;){if(5===h.tag){if(null===u){u=h;try{o=h.stateNode,d?"function"===typeof(s=o.style).setProperty?s.setProperty("display","none","important"):s.display="none":(l=h.stateNode,i=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",i))}catch(g){jc(e,e.return,g)}}}else if(6===h.tag){if(null===u)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(g){jc(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ml(t,e),yl(e),4&r&&fl(e);case 21:}}function yl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(sl(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var o=r.stateNode;32&r.flags&&(he(o,""),r.flags&=-33),cl(e,il(e),o);break;case 3:case 4:var s=r.stateNode.containerInfo;ll(e,il(e),s);break;default:throw Error(a(161))}}catch(i){jc(e,e.return,i)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vl(e,t,n){Xi=e,xl(e,t,n)}function xl(e,t,n){for(var r=0!==(1&e.mode);null!==Xi;){var o=Xi,a=o.child;if(22===o.tag&&r){var s=null!==o.memoizedState||Qi;if(!s){var i=o.alternate,l=null!==i&&null!==i.memoizedState||Gi;i=Qi;var c=Gi;if(Qi=s,(Gi=l)&&!c)for(Xi=o;null!==Xi;)l=(s=Xi).child,22===s.tag&&null!==s.memoizedState?kl(o):null!==l?(l.return=s,Xi=l):kl(o);for(;null!==a;)Xi=a,xl(a,t,n),a=a.sibling;Xi=o,Qi=i,Gi=c}bl(e)}else 0!==(8772&o.subtreeFlags)&&null!==a?(a.return=o,Xi=a):bl(e)}}function bl(e){for(;null!==Xi;){var t=Xi;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Gi||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Gi)if(null===n)r.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:ni(t.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;null!==s&&Va(t,s,r);break;case 3:var i=t.updateQueue;if(null!==i){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Va(t,i,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var d=t.alternate;if(null!==d){var u=d.memoizedState;if(null!==u){var h=u.dehydrated;null!==h&&qt(h)}}}break;default:throw Error(a(163))}Gi||512&t.flags&&ol(t)}catch(p){jc(t,t.return,p)}}if(t===e){Xi=null;break}if(null!==(n=t.sibling)){n.return=t.return,Xi=n;break}Xi=t.return}}function wl(e){for(;null!==Xi;){var t=Xi;if(t===e){Xi=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Xi=n;break}Xi=t.return}}function kl(e){for(;null!==Xi;){var t=Xi;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){jc(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var o=t.return;try{r.componentDidMount()}catch(l){jc(t,o,l)}}var a=t.return;try{ol(t)}catch(l){jc(t,a,l)}break;case 5:var s=t.return;try{ol(t)}catch(l){jc(t,s,l)}}}catch(l){jc(t,t.return,l)}if(t===e){Xi=null;break}var i=t.sibling;if(null!==i){i.return=t.return,Xi=i;break}Xi=t.return}}var _l,jl=Math.ceil,Sl=b.ReactCurrentDispatcher,Nl=b.ReactCurrentOwner,Cl=b.ReactCurrentBatchConfig,El=0,Pl=null,Tl=null,Ll=0,Rl=0,Ol=So(0),Al=0,Il=null,Fl=0,Ml=0,Dl=0,Bl=null,zl=null,Ul=0,ql=1/0,Hl=null,Vl=!1,Wl=null,Kl=null,Jl=!1,$l=null,Ql=0,Gl=0,Yl=null,Xl=-1,Zl=0;function ec(){return 0!==(6&El)?Ye():-1!==Xl?Xl:Xl=Ye()}function tc(e){return 0===(1&e.mode)?1:0!==(2&El)&&0!==Ll?Ll&-Ll:null!==ga.transition?(0===Zl&&(Zl=mt()),Zl):0!==(e=xt)?e:e=void 0===(e=window.event)?16:Gt(e.type)}function nc(e,t,n,r){if(50<Gl)throw Gl=0,Yl=null,Error(a(185));yt(e,n,r),0!==(2&El)&&e===Pl||(e===Pl&&(0===(2&El)&&(Ml|=n),4===Al&&ic(e,Ll)),rc(e,r),1===n&&0===El&&0===(1&t.mode)&&(ql=Ye()+500,zo&&Ho()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,a=e.pendingLanes;0<a;){var s=31-st(a),i=1<<s,l=o[s];-1===l?0!==(i&n)&&0===(i&r)||(o[s]=pt(i,t)):l<=t&&(e.expiredLanes|=i),a&=~i}}(e,t);var r=ht(e,e===Pl?Ll:0);if(0===r)null!==n&&$e(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&$e(n),1===t)0===e.tag?function(e){zo=!0,qo(e)}(lc.bind(null,e)):qo(lc.bind(null,e)),so(function(){0===(6&El)&&Ho()}),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Pc(n,oc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function oc(e,t){if(Xl=-1,Zl=0,0!==(6&El))throw Error(a(327));var n=e.callbackNode;if(kc()&&e.callbackNode!==n)return null;var r=ht(e,e===Pl?Ll:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gc(e,r);else{t=r;var o=El;El|=2;var s=fc();for(Pl===e&&Ll===t||(Hl=null,ql=Ye()+500,hc(e,t));;)try{vc();break}catch(l){pc(e,l)}Ca(),Sl.current=s,El=o,null!==Tl?t=0:(Pl=null,Ll=0,t=Al)}if(0!==t){if(2===t&&(0!==(o=ft(e))&&(r=o,t=ac(e,o))),1===t)throw n=Il,hc(e,0),ic(e,r),rc(e,Ye()),n;if(6===t)ic(e,r);else{if(o=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var o=n[r],a=o.getSnapshot;o=o.value;try{if(!ir(a(),o))return!1}catch(i){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(o)&&(2===(t=gc(e,r))&&(0!==(s=ft(e))&&(r=s,t=ac(e,s))),1===t))throw n=Il,hc(e,0),ic(e,r),rc(e,Ye()),n;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:wc(e,zl,Hl);break;case 3:if(ic(e,r),(130023424&r)===r&&10<(t=Ul+500-Ye())){if(0!==ht(e,0))break;if(((o=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=ro(wc.bind(null,e,zl,Hl),t);break}wc(e,zl,Hl);break;case 4:if(ic(e,r),(4194240&r)===r)break;for(t=e.eventTimes,o=-1;0<r;){var i=31-st(r);s=1<<i,(i=t[i])>o&&(o=i),r&=~s}if(r=o,10<(r=(120>(r=Ye()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*jl(r/1960))-r)){e.timeoutHandle=ro(wc.bind(null,e,zl,Hl),r);break}wc(e,zl,Hl);break;default:throw Error(a(329))}}}return rc(e,Ye()),e.callbackNode===n?oc.bind(null,e):null}function ac(e,t){var n=Bl;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=zl,zl=n,null!==t&&sc(t)),e}function sc(e){null===zl?zl=e:zl.push.apply(zl,e)}function ic(e,t){for(t&=~Dl,t&=~Ml,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-st(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(0!==(6&El))throw Error(a(327));kc();var t=ht(e,0);if(0===(1&t))return rc(e,Ye()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var r=ft(e);0!==r&&(t=r,n=ac(e,r))}if(1===n)throw n=Il,hc(e,0),ic(e,t),rc(e,Ye()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,zl,Hl),rc(e,Ye()),null}function cc(e,t){var n=El;El|=1;try{return e(t)}finally{0===(El=n)&&(ql=Ye()+500,zo&&Ho())}}function dc(e){null!==$l&&0===$l.tag&&0===(6&El)&&kc();var t=El;El|=1;var n=Cl.transition,r=xt;try{if(Cl.transition=null,xt=1,e)return e()}finally{xt=r,Cl.transition=n,0===(6&(El=t))&&Ho()}}function uc(){Rl=Ol.current,No(Ol)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,oo(n)),null!==Tl)for(n=Tl.return;null!==n;){var r=n;switch(na(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ao();break;case 3:Ya(),No(To),No(Po),rs();break;case 5:Za(r);break;case 4:Ya();break;case 13:case 19:No(es);break;case 10:Ea(r.type._context);break;case 22:case 23:uc()}n=n.return}if(Pl=e,Tl=e=Oc(e.current,null),Ll=Rl=t,Al=0,Il=null,Dl=Ml=Fl=0,zl=Bl=null,null!==Ra){for(t=0;t<Ra.length;t++)if(null!==(r=(n=Ra[t]).interleaved)){n.interleaved=null;var o=r.next,a=n.pending;if(null!==a){var s=a.next;a.next=o,r.next=s}n.pending=r}Ra=null}return e}function pc(e,t){for(;;){var n=Tl;try{if(Ca(),os.current=Xs,ds){for(var r=is.memoizedState;null!==r;){var o=r.queue;null!==o&&(o.pending=null),r=r.next}ds=!1}if(ss=0,cs=ls=is=null,us=!1,hs=0,Nl.current=null,null===n||null===n.return){Al=1,Il=t,Tl=null;break}e:{var s=e,i=n.return,l=n,c=t;if(t=Ll,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var d=c,u=l,h=u.tag;if(0===(1&u.mode)&&(0===h||11===h||15===h)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=gi(i);if(null!==f){f.flags&=-257,yi(f,i,l,0,t),1&f.mode&&mi(s,d,t),c=d;var m=(t=f).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){mi(s,d,t),mc();break e}c=Error(a(426))}else if(aa&&1&l.mode){var y=gi(i);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),yi(y,i,l,0,t),ma(ci(c,l));break e}}s=c=ci(c,l),4!==Al&&(Al=2),null===Bl?Bl=[s]:Bl.push(s),s=i;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,qa(s,pi(0,c,t));break e;case 1:l=c;var v=s.type,x=s.stateNode;if(0===(128&s.flags)&&("function"===typeof v.getDerivedStateFromError||null!==x&&"function"===typeof x.componentDidCatch&&(null===Kl||!Kl.has(x)))){s.flags|=65536,t&=-t,s.lanes|=t,qa(s,fi(s,l,t));break e}}s=s.return}while(null!==s)}bc(n)}catch(b){t=b,Tl===n&&null!==n&&(Tl=n=n.return);continue}break}}function fc(){var e=Sl.current;return Sl.current=Xs,null===e?Xs:e}function mc(){0!==Al&&3!==Al&&2!==Al||(Al=4),null===Pl||0===(268435455&Fl)&&0===(268435455&Ml)||ic(Pl,Ll)}function gc(e,t){var n=El;El|=2;var r=fc();for(Pl===e&&Ll===t||(Hl=null,hc(e,t));;)try{yc();break}catch(o){pc(e,o)}if(Ca(),El=n,Sl.current=r,null!==Tl)throw Error(a(261));return Pl=null,Ll=0,Al}function yc(){for(;null!==Tl;)xc(Tl)}function vc(){for(;null!==Tl&&!Qe();)xc(Tl)}function xc(e){var t=_l(e.alternate,e,Rl);e.memoizedProps=e.pendingProps,null===t?bc(e):Tl=t,Nl.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ji(n,t,Rl)))return void(Tl=n)}else{if(null!==(n=$i(n,t)))return n.flags&=32767,void(Tl=n);if(null===e)return Al=6,void(Tl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Tl=t);Tl=t=e}while(null!==t);0===Al&&(Al=5)}function wc(e,t,n){var r=xt,o=Cl.transition;try{Cl.transition=null,xt=1,function(e,t,n,r){do{kc()}while(null!==$l);if(0!==(6&El))throw Error(a(327));n=e.finishedWork;var o=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-st(n),a=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~a}}(e,s),e===Pl&&(Tl=Pl=null,Ll=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Jl||(Jl=!0,Pc(tt,function(){return kc(),null})),s=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||s){s=Cl.transition,Cl.transition=null;var i=xt;xt=1;var l=El;El|=4,Nl.current=null,function(e,t){if(eo=Vt,pr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var o=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(w){n=null;break e}var i=0,l=-1,c=-1,d=0,u=0,h=e,p=null;t:for(;;){for(var f;h!==n||0!==o&&3!==h.nodeType||(l=i+o),h!==s||0!==r&&3!==h.nodeType||(c=i+r),3===h.nodeType&&(i+=h.nodeValue.length),null!==(f=h.firstChild);)p=h,h=f;for(;;){if(h===e)break t;if(p===n&&++d===o&&(l=i),p===s&&++u===r&&(c=i),null!==(f=h.nextSibling))break;p=(h=p).parentNode}h=f}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(to={focusedElem:e,selectionRange:n},Vt=!1,Xi=t;null!==Xi;)if(e=(t=Xi).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Xi=e;else for(;null!==Xi;){t=Xi;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,x=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:ni(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(a(163))}}catch(w){jc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Xi=e;break}Xi=t.return}m=tl,tl=!1}(e,n),gl(n,e),fr(to),Vt=!!eo,to=eo=null,e.current=n,vl(n,e,o),Ge(),El=l,xt=i,Cl.transition=s}else e.current=n;if(Jl&&(Jl=!1,$l=e,Ql=o),s=e.pendingLanes,0===s&&(Kl=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(ot,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Ye()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)o=t[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(Vl)throw Vl=!1,e=Wl,Wl=null,e;0!==(1&Ql)&&0!==e.tag&&kc(),s=e.pendingLanes,0!==(1&s)?e===Yl?Gl++:(Gl=0,Yl=e):Gl=0,Ho()}(e,t,n,r)}finally{Cl.transition=o,xt=r}return null}function kc(){if(null!==$l){var e=bt(Ql),t=Cl.transition,n=xt;try{if(Cl.transition=null,xt=16>e?16:e,null===$l)var r=!1;else{if(e=$l,$l=null,Ql=0,0!==(6&El))throw Error(a(331));var o=El;for(El|=4,Xi=e.current;null!==Xi;){var s=Xi,i=s.child;if(0!==(16&Xi.flags)){var l=s.deletions;if(null!==l){for(var c=0;c<l.length;c++){var d=l[c];for(Xi=d;null!==Xi;){var u=Xi;switch(u.tag){case 0:case 11:case 15:nl(8,u,s)}var h=u.child;if(null!==h)h.return=u,Xi=h;else for(;null!==Xi;){var p=(u=Xi).sibling,f=u.return;if(al(u),u===d){Xi=null;break}if(null!==p){p.return=f,Xi=p;break}Xi=f}}}var m=s.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Xi=s}}if(0!==(2064&s.subtreeFlags)&&null!==i)i.return=s,Xi=i;else e:for(;null!==Xi;){if(0!==(2048&(s=Xi).flags))switch(s.tag){case 0:case 11:case 15:nl(9,s,s.return)}var v=s.sibling;if(null!==v){v.return=s.return,Xi=v;break e}Xi=s.return}}var x=e.current;for(Xi=x;null!==Xi;){var b=(i=Xi).child;if(0!==(2064&i.subtreeFlags)&&null!==b)b.return=i,Xi=b;else e:for(i=x;null!==Xi;){if(0!==(2048&(l=Xi).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(k){jc(l,l.return,k)}if(l===i){Xi=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Xi=w;break e}Xi=l.return}}if(El=o,Ho(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(ot,e)}catch(k){}r=!0}return r}finally{xt=n,Cl.transition=t}}return!1}function _c(e,t,n){e=za(e,t=pi(0,t=ci(n,t),1),1),t=ec(),null!==e&&(yt(e,1,t),rc(e,t))}function jc(e,t,n){if(3===e.tag)_c(e,e,n);else for(;null!==t;){if(3===t.tag){_c(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Kl||!Kl.has(r))){t=za(t,e=fi(t,e=ci(n,e),1),1),e=ec(),null!==t&&(yt(t,1,e),rc(t,e));break}}t=t.return}}function Sc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Pl===e&&(Ll&n)===n&&(4===Al||3===Al&&(130023424&Ll)===Ll&&500>Ye()-Ul?hc(e,0):Dl|=n),rc(e,t)}function Nc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=dt,0===(130023424&(dt<<=1))&&(dt=4194304)));var n=ec();null!==(e=Ia(e,t))&&(yt(e,t,n),rc(e,n))}function Cc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Nc(e,n)}function Ec(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;null!==o&&(n=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Nc(e,n)}function Pc(e,t){return Je(e,t)}function Tc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lc(e,t,n,r){return new Tc(e,t,n,r)}function Rc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Oc(e,t){var n=e.alternate;return null===n?((n=Lc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ac(e,t,n,r,o,s){var i=2;if(r=e,"function"===typeof e)Rc(e)&&(i=1);else if("string"===typeof e)i=5;else e:switch(e){case _:return Ic(n.children,o,s,t);case j:i=8,o|=8;break;case S:return(e=Lc(12,n,t,2|o)).elementType=S,e.lanes=s,e;case P:return(e=Lc(13,n,t,o)).elementType=P,e.lanes=s,e;case T:return(e=Lc(19,n,t,o)).elementType=T,e.lanes=s,e;case O:return Fc(n,o,s,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case N:i=10;break e;case C:i=9;break e;case E:i=11;break e;case L:i=14;break e;case R:i=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Lc(i,n,t,o)).elementType=e,t.type=r,t.lanes=s,t}function Ic(e,t,n,r){return(e=Lc(7,e,r,t)).lanes=n,e}function Fc(e,t,n,r){return(e=Lc(22,e,r,t)).elementType=O,e.lanes=n,e.stateNode={isHidden:!1},e}function Mc(e,t,n){return(e=Lc(6,e,null,t)).lanes=n,e}function Dc(e,t,n){return(t=Lc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Bc(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function zc(e,t,n,r,o,a,s,i,l){return e=new Bc(e,t,n,i,l),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Lc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ma(a),e}function Uc(e){if(!e)return Eo;e:{if(qe(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Oo(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Oo(n))return Fo(e,n,t)}return t}function qc(e,t,n,r,o,a,s,i,l){return(e=zc(n,r,!0,e,0,a,0,i,l)).context=Uc(null),n=e.current,(a=Ba(r=ec(),o=tc(n))).callback=void 0!==t&&null!==t?t:null,za(n,a,o),e.current.lanes=o,yt(e,o,r),rc(e,r),e}function Hc(e,t,n,r){var o=t.current,a=ec(),s=tc(o);return n=Uc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Ba(a,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=za(o,t,s))&&(nc(e,o,s,a),Ua(e,o,s)),s}function Vc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Wc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Kc(e,t){Wc(e,t),(e=e.alternate)&&Wc(e,t)}_l=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||To.current)xi=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return xi=!1,function(e,t,n){switch(t.tag){case 3:Pi(t),fa();break;case 5:Xa(t);break;case 1:Oo(t.type)&&Mo(t);break;case 4:Ga(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,o=t.memoizedProps.value;Co(_a,r._currentValue),r._currentValue=o;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Co(es,1&es.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Mi(e,t,n):(Co(es,1&es.current),null!==(e=Vi(e,t,n))?e.sibling:null);Co(es,1&es.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qi(e,t,n);t.flags|=128}if(null!==(o=t.memoizedState)&&(o.rendering=null,o.tail=null,o.lastEffect=null),Co(es,es.current),r)break;return null;case 22:case 23:return t.lanes=0,ji(e,t,n)}return Vi(e,t,n)}(e,t,n);xi=0!==(131072&e.flags)}else xi=!1,aa&&0!==(1048576&t.flags)&&ea(t,Jo,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Hi(e,t),e=t.pendingProps;var o=Ro(t,Po.current);Ta(t,n),o=gs(null,t,r,e,o,n);var s=ys();return t.flags|=1,"object"===typeof o&&null!==o&&"function"===typeof o.render&&void 0===o.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Oo(r)?(s=!0,Mo(t)):s=!1,t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,Ma(t),o.updater=oi,t.stateNode=o,o._reactInternals=t,li(t,r,e,n),t=Ei(null,t,r,!0,s,n)):(t.tag=0,aa&&s&&ta(t),bi(null,t,o,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Hi(e,t),e=t.pendingProps,r=(o=r._init)(r._payload),t.type=r,o=t.tag=function(e){if("function"===typeof e)return Rc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===E)return 11;if(e===L)return 14}return 2}(r),e=ni(r,e),o){case 0:t=Ni(null,t,r,e,n);break e;case 1:t=Ci(null,t,r,e,n);break e;case 11:t=wi(null,t,r,e,n);break e;case 14:t=ki(null,t,r,ni(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,Ni(e,t,r,o=t.elementType===r?o:ni(r,o),n);case 1:return r=t.type,o=t.pendingProps,Ci(e,t,r,o=t.elementType===r?o:ni(r,o),n);case 3:e:{if(Pi(t),null===e)throw Error(a(387));r=t.pendingProps,o=(s=t.memoizedState).element,Da(e,t),Ha(t,r,null,n);var i=t.memoizedState;if(r=i.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Ti(e,t,r,n,o=ci(Error(a(423)),t));break e}if(r!==o){t=Ti(e,t,r,n,o=ci(Error(a(424)),t));break e}for(oa=co(t.stateNode.containerInfo.firstChild),ra=t,aa=!0,sa=null,n=ka(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fa(),r===o){t=Vi(e,t,n);break e}bi(e,t,r,n)}t=t.child}return t;case 5:return Xa(t),null===e&&da(t),r=t.type,o=t.pendingProps,s=null!==e?e.memoizedProps:null,i=o.children,no(r,o)?i=null:null!==s&&no(r,s)&&(t.flags|=32),Si(e,t),bi(e,t,i,n),t.child;case 6:return null===e&&da(t),null;case 13:return Mi(e,t,n);case 4:return Ga(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=wa(t,null,r,n):bi(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,wi(e,t,r,o=t.elementType===r?o:ni(r,o),n);case 7:return bi(e,t,t.pendingProps,n),t.child;case 8:case 12:return bi(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,s=t.memoizedProps,i=o.value,Co(_a,r._currentValue),r._currentValue=i,null!==s)if(ir(s.value,i)){if(s.children===o.children&&!To.current){t=Vi(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var l=s.dependencies;if(null!==l){i=s.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===s.tag){(c=Ba(-1,n&-n)).tag=2;var d=s.updateQueue;if(null!==d){var u=(d=d.shared).pending;null===u?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}s.lanes|=n,null!==(c=s.alternate)&&(c.lanes|=n),Pa(s.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===s.tag)i=s.type===t.type?null:s.child;else if(18===s.tag){if(null===(i=s.return))throw Error(a(341));i.lanes|=n,null!==(l=i.alternate)&&(l.lanes|=n),Pa(i,n,t),i=s.sibling}else i=s.child;if(null!==i)i.return=s;else for(i=s;null!==i;){if(i===t){i=null;break}if(null!==(s=i.sibling)){s.return=i.return,i=s;break}i=i.return}s=i}bi(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,Ta(t,n),r=r(o=La(o)),t.flags|=1,bi(e,t,r,n),t.child;case 14:return o=ni(r=t.type,t.pendingProps),ki(e,t,r,o=ni(r.type,o),n);case 15:return _i(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:ni(r,o),Hi(e,t),t.tag=1,Oo(r)?(e=!0,Mo(t)):e=!1,Ta(t,n),si(t,r,o),li(t,r,o,n),Ei(null,t,r,!0,e,n);case 19:return qi(e,t,n);case 22:return ji(e,t,n)}throw Error(a(156,t.tag))};var Jc="function"===typeof reportError?reportError:function(e){console.error(e)};function $c(e){this._internalRoot=e}function Qc(e){this._internalRoot=e}function Gc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Xc(){}function Zc(e,t,n,r,o){var a=n._reactRootContainer;if(a){var s=a;if("function"===typeof o){var i=o;o=function(){var e=Vc(s);i.call(e)}}Hc(t,s,e,o)}else s=function(e,t,n,r,o){if(o){if("function"===typeof r){var a=r;r=function(){var e=Vc(s);a.call(e)}}var s=qc(t,r,e,0,null,!1,0,"",Xc);return e._reactRootContainer=s,e[mo]=s.current,qr(8===e.nodeType?e.parentNode:e),dc(),s}for(;o=e.lastChild;)e.removeChild(o);if("function"===typeof r){var i=r;r=function(){var e=Vc(l);i.call(e)}}var l=zc(e,0,!1,null,0,!1,0,"",Xc);return e._reactRootContainer=l,e[mo]=l.current,qr(8===e.nodeType?e.parentNode:e),dc(function(){Hc(t,l,n,r)}),l}(n,t,e,o,r);return Vc(s)}Qc.prototype.render=$c.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Hc(e,t,null,null)},Qc.prototype.unmount=$c.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc(function(){Hc(null,e,null,null)}),t[mo]=null}},Qc.prototype.unstable_scheduleHydration=function(e){if(e){var t=jt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ot.length&&0!==t&&t<Ot[n].priority;n++);Ot.splice(n,0,e),0===n&&Mt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ut(t.pendingLanes);0!==n&&(vt(t,1|n),rc(t,Ye()),0===(6&El)&&(ql=Ye()+500,Ho()))}break;case 13:dc(function(){var t=Ia(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}}),Kc(e,1)}},kt=function(e){if(13===e.tag){var t=Ia(e,134217728);if(null!==t)nc(t,e,134217728,ec());Kc(e,134217728)}},_t=function(e){if(13===e.tag){var t=tc(e),n=Ia(e,t);if(null!==n)nc(n,e,t,ec());Kc(e,t)}},jt=function(){return xt},St=function(e,t){var n=xt;try{return xt=e,t()}finally{xt=n}},ke=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=ko(r);if(!o)throw Error(a(90));J(r),X(r,o)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ee=cc,Pe=dc;var ed={usingClientEntryPoint:!1,Events:[bo,wo,ko,Ne,Ce,cc]},td={findFiberByHostInstance:xo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nd={bundleType:td.bundleType,version:td.version,rendererPackageName:td.rendererPackageName,rendererConfig:td.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:td.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var rd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rd.isDisabled&&rd.supportsFiber)try{ot=rd.inject(nd),at=rd}catch(de){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ed,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Gc(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:k,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Gc(e))throw Error(a(299));var n=!1,r="",o=Jc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(o=t.onRecoverableError)),t=zc(e,1,!1,null,0,n,0,r,o),e[mo]=t.current,qr(8===e.nodeType?e.parentNode:e),new $c(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return dc(e)},t.hydrate=function(e,t,n){if(!Yc(t))throw Error(a(200));return Zc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Gc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,o=!1,s="",i=Jc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(o=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onRecoverableError&&(i=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,o,0,s,i),e[mo]=t.current,qr(e),r)for(e=0;e<r.length;e++)o=(o=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new Qc(t)},t.render=function(e,t,n){if(!Yc(t))throw Error(a(200));return Zc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Yc(e))throw Error(a(40));return!!e._reactRootContainer&&(dc(function(){Zc(null,null,e,!1,function(){e._reactRootContainer=null,e[mo]=null})}),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Yc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return Zc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},736:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(n(374));class a extends o.default{eq(e,t){return this.url.searchParams.append(e,"eq.".concat(t)),this}neq(e,t){return this.url.searchParams.append(e,"neq.".concat(t)),this}gt(e,t){return this.url.searchParams.append(e,"gt.".concat(t)),this}gte(e,t){return this.url.searchParams.append(e,"gte.".concat(t)),this}lt(e,t){return this.url.searchParams.append(e,"lt.".concat(t)),this}lte(e,t){return this.url.searchParams.append(e,"lte.".concat(t)),this}like(e,t){return this.url.searchParams.append(e,"like.".concat(t)),this}likeAllOf(e,t){return this.url.searchParams.append(e,"like(all).{".concat(t.join(","),"}")),this}likeAnyOf(e,t){return this.url.searchParams.append(e,"like(any).{".concat(t.join(","),"}")),this}ilike(e,t){return this.url.searchParams.append(e,"ilike.".concat(t)),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,"ilike(all).{".concat(t.join(","),"}")),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,"ilike(any).{".concat(t.join(","),"}")),this}is(e,t){return this.url.searchParams.append(e,"is.".concat(t)),this}in(e,t){const n=Array.from(new Set(t)).map(e=>"string"===typeof e&&new RegExp("[,()]").test(e)?'"'.concat(e,'"'):"".concat(e)).join(",");return this.url.searchParams.append(e,"in.(".concat(n,")")),this}contains(e,t){return"string"===typeof t?this.url.searchParams.append(e,"cs.".concat(t)):Array.isArray(t)?this.url.searchParams.append(e,"cs.{".concat(t.join(","),"}")):this.url.searchParams.append(e,"cs.".concat(JSON.stringify(t))),this}containedBy(e,t){return"string"===typeof t?this.url.searchParams.append(e,"cd.".concat(t)):Array.isArray(t)?this.url.searchParams.append(e,"cd.{".concat(t.join(","),"}")):this.url.searchParams.append(e,"cd.".concat(JSON.stringify(t))),this}rangeGt(e,t){return this.url.searchParams.append(e,"sr.".concat(t)),this}rangeGte(e,t){return this.url.searchParams.append(e,"nxl.".concat(t)),this}rangeLt(e,t){return this.url.searchParams.append(e,"sl.".concat(t)),this}rangeLte(e,t){return this.url.searchParams.append(e,"nxr.".concat(t)),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,"adj.".concat(t)),this}overlaps(e,t){return"string"===typeof t?this.url.searchParams.append(e,"ov.".concat(t)):this.url.searchParams.append(e,"ov.{".concat(t.join(","),"}")),this}textSearch(e,t){let{config:n,type:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o="";"plain"===r?o="pl":"phrase"===r?o="ph":"websearch"===r&&(o="w");const a=void 0===n?"":"(".concat(n,")");return this.url.searchParams.append(e,"".concat(o,"fts").concat(a,".").concat(t)),this}match(e){return Object.entries(e).forEach(e=>{let[t,n]=e;this.url.searchParams.append(t,"eq.".concat(n))}),this}not(e,t,n){return this.url.searchParams.append(e,"not.".concat(t,".").concat(n)),this}or(e){let{foreignTable:t,referencedTable:n=t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=n?"".concat(n,".or"):"or";return this.url.searchParams.append(r,"(".concat(e,")")),this}filter(e,t,n){return this.url.searchParams.append(e,"".concat(t,".").concat(n)),this}}t.default=a},745:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_HEADERS=void 0;const r=n(400);t.DEFAULT_HEADERS={"X-Client-Info":"postgrest-js/".concat(r.version)}},829:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(n(736));t.default=class{constructor(e,t){let{headers:n={},schema:r,fetch:o}=t;this.url=e,this.headers=n,this.schema=r,this.fetch=o}select(e){let{head:t=!1,count:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=t?"HEAD":"GET";let a=!1;const s=(null!==e&&void 0!==e?e:"*").split("").map(e=>/\s/.test(e)&&!a?"":('"'===e&&(a=!a),e)).join("");return this.url.searchParams.set("select",s),n&&(this.headers.Prefer="count=".concat(n)),new o.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e){let{count:t,defaultToNull:n=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=[];if(this.headers.Prefer&&r.push(this.headers.Prefer),t&&r.push("count=".concat(t)),n||r.push("missing=default"),this.headers.Prefer=r.join(","),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>'"'.concat(e,'"'));this.url.searchParams.set("columns",e.join(","))}}return new o.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e){let{onConflict:t,ignoreDuplicates:n=!1,count:r,defaultToNull:a=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=["resolution=".concat(n?"ignore":"merge","-duplicates")];if(void 0!==t&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&s.push(this.headers.Prefer),r&&s.push("count=".concat(r)),a||s.push("missing=default"),this.headers.Prefer=s.join(","),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>'"'.concat(e,'"'));this.url.searchParams.set("columns",e.join(","))}}return new o.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e){let{count:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=[];return this.headers.Prefer&&n.push(this.headers.Prefer),t&&n.push("count=".concat(t)),this.headers.Prefer=n.join(","),new o.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete(){let{count:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=[];return e&&t.push("count=".concat(e)),this.headers.Prefer&&t.unshift(this.headers.Prefer),this.headers.Prefer=t.join(","),new o.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}},853:(e,t,n)=>{e.exports=n(234)},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)},980:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PostgrestError=t.PostgrestBuilder=t.PostgrestTransformBuilder=t.PostgrestFilterBuilder=t.PostgrestQueryBuilder=t.PostgrestClient=void 0;const o=r(n(210));t.PostgrestClient=o.default;const a=r(n(829));t.PostgrestQueryBuilder=a.default;const s=r(n(736));t.PostgrestFilterBuilder=s.default;const i=r(n(374));t.PostgrestTransformBuilder=i.default;const l=r(n(286));t.PostgrestBuilder=l.default;const c=r(n(611));t.PostgrestError=c.default,t.default={PostgrestClient:o.default,PostgrestQueryBuilder:a.default,PostgrestFilterBuilder:s.default,PostgrestTransformBuilder:i.default,PostgrestBuilder:l.default,PostgrestError:c.default}}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,n),a.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r=n(43),o=n(391);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function s(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}function i(e,t,n){return(t=s(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){i(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var d=n(950);var u={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const h=["color","size","strokeWidth","absoluteStrokeWidth","children"];var p=(e,t)=>{const n=(0,r.forwardRef)((n,o)=>{let{color:a="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:l,children:d}=n,p=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(n,h);return(0,r.createElement)("svg",c(c({ref:o},u),{},{width:s,height:s,stroke:a,strokeWidth:l?24*Number(i)/Number(s):i,className:"lucide lucide-".concat((f=e,f.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()))},p),[...t.map(e=>{let[t,n]=e;return(0,r.createElement)(t,n)}),...(Array.isArray(d)?d:[d])||[]]);var f});return n.displayName="".concat(e),n};const f=p("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),m=p("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),g=p("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),y=p("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),v=p("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),x=p("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),b=p("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]),w=p("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),k=p("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),_=p("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),j=p("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),S=p("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),N=p("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),C=p("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),E=p("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),P=p("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),T=p("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),L=p("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),R=p("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),O=p("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),A=p("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]),I=p("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]),F=p("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),M=p("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]),D=p("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),B=p("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),z=p("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);class U extends Error{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"FunctionsError",n=arguments.length>2?arguments[2]:void 0;super(e),this.name=t,this.context=n}}class q extends U{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class H extends U{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class V extends U{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var W;!function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"}(W||(W={}));var K=function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function s(e){try{l(r.next(e))}catch(t){a(t)}}function i(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,i)}l((r=r.apply(e,t||[])).next())})};class J{constructor(e){let{headers:t={},customFetch:r,region:o=W.Any}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=e,this.headers=t,this.region=o,this.fetch=(e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Promise.resolve().then(n.bind(n,630)).then(e=>{let{default:n}=e;return n(...t)})}:fetch),function(){return t(...arguments)}})(r)}setAuth(e){this.headers.Authorization="Bearer ".concat(e)}invoke(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;return K(this,void 0,void 0,function*(){try{const{headers:r,method:o,body:a}=t;let s={},{region:i}=t;i||(i=this.region);const l=new URL("".concat(this.url,"/").concat(e));let c;i&&"any"!==i&&(s["x-region"]=i,l.searchParams.set("forceFunctionRegion",i)),a&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&("undefined"!==typeof Blob&&a instanceof Blob||a instanceof ArrayBuffer?(s["Content-Type"]="application/octet-stream",c=a):"string"===typeof a?(s["Content-Type"]="text/plain",c=a):"undefined"!==typeof FormData&&a instanceof FormData?c=a:(s["Content-Type"]="application/json",c=JSON.stringify(a)));const d=yield this.fetch(l.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},s),this.headers),r),body:c}).catch(e=>{throw new q(e)}),u=d.headers.get("x-relay-error");if(u&&"true"===u)throw new H(d);if(!d.ok)throw new V(d);let h,p=(null!==(n=d.headers.get("Content-Type"))&&void 0!==n?n:"text/plain").split(";")[0].trim();return h="application/json"===p?yield d.json():"application/octet-stream"===p?yield d.blob():"text/event-stream"===p?d:"multipart/form-data"===p?yield d.formData():yield d.text(),{data:h,error:null,response:d}}catch(r){return{data:null,error:r,response:r instanceof V||r instanceof H?r.context:void 0}}})}}var $=n(980);const{PostgrestClient:Q,PostgrestQueryBuilder:G,PostgrestFilterBuilder:Y,PostgrestTransformBuilder:X,PostgrestBuilder:Z,PostgrestError:ee}=$;const te=function(){if("undefined"!==typeof WebSocket)return WebSocket;if("undefined"!==typeof global.WebSocket)return global.WebSocket;if("undefined"!==typeof window.WebSocket)return window.WebSocket;if("undefined"!==typeof self.WebSocket)return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}(),ne="realtime-js/".concat("2.11.15");var re,oe,ae,se,ie,le;!function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"}(re||(re={})),function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"}(oe||(oe={})),function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"}(ae||(ae={})),function(e){e.websocket="websocket"}(se||(se={})),function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"}(ie||(ie={}));class ce{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t("string"===typeof e?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,t,n)}_decodeBroadcast(e,t,n){const r=t.getUint8(1),o=t.getUint8(2);let a=this.HEADER_LENGTH+2;const s=n.decode(e.slice(a,a+r));a+=r;const i=n.decode(e.slice(a,a+o));a+=o;return{ref:null,topic:s,event:i,payload:JSON.parse(n.decode(e.slice(a,e.byteLength)))}}}class de{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}!function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"}(le||(le={}));const ue=function(e,t){var n;const r=null!==(n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).skipTypes)&&void 0!==n?n:[];return Object.keys(t).reduce((n,o)=>(n[o]=he(o,e,t,r),n),{})},he=(e,t,n,r)=>{const o=t.find(t=>t.name===e),a=null===o||void 0===o?void 0:o.type,s=n[e];return a&&!r.includes(a)?pe(a,s):fe(s)},pe=(e,t)=>{if("_"===e.charAt(0)){const n=e.slice(1,e.length);return ve(t,n)}switch(e){case le.bool:return me(t);case le.float4:case le.float8:case le.int2:case le.int4:case le.int8:case le.numeric:case le.oid:return ge(t);case le.json:case le.jsonb:return ye(t);case le.timestamp:return xe(t);case le.abstime:case le.date:case le.daterange:case le.int4range:case le.int8range:case le.money:case le.reltime:case le.text:case le.time:case le.timestamptz:case le.timetz:case le.tsrange:case le.tstzrange:default:return fe(t)}},fe=e=>e,me=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},ge=e=>{if("string"===typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},ye=e=>{if("string"===typeof e)try{return JSON.parse(e)}catch(t){return console.log("JSON parse error: ".concat(t)),e}return e},ve=(e,t)=>{if("string"!==typeof e)return e;const n=e.length-1,r=e[n];if("{"===e[0]&&"}"===r){let r;const a=e.slice(1,n);try{r=JSON.parse("["+a+"]")}catch(o){r=a?a.split(","):[]}return r.map(e=>pe(t,e))}return e},xe=e=>"string"===typeof e?e.replace(" ","T"):e,be=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class we{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e4;this.channel=e,this.event=t,this.payload=n,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t(null===(n=this.receivedResp)||void 0===n?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive(e){let{status:t,response:n}=e;this.recHooks.filter(e=>e.status===t).forEach(e=>e.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var ke,_e,je,Se;!function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"}(ke||(ke={}));class Ne{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(null===t||void 0===t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},e=>{const{onJoin:t,onLeave:n,onSync:r}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ne.syncState(this.state,e,t,n),this.pendingDiffs.forEach(e=>{this.state=Ne.syncDiff(this.state,e,t,n)}),this.pendingDiffs=[],r()}),this.channel._on(n.diff,{},e=>{const{onJoin:t,onLeave:n,onSync:r}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=Ne.syncDiff(this.state,e,t,n),r())}),this.onJoin((e,t,n)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:n})}),this.onLeave((e,t,n)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:n})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,n,r){const o=this.cloneDeep(e),a=this.transformState(t),s={},i={};return this.map(o,(e,t)=>{a[e]||(i[e]=t)}),this.map(a,(e,t)=>{const n=o[e];if(n){const r=t.map(e=>e.presence_ref),o=n.map(e=>e.presence_ref),a=t.filter(e=>o.indexOf(e.presence_ref)<0),l=n.filter(e=>r.indexOf(e.presence_ref)<0);a.length>0&&(s[e]=a),l.length>0&&(i[e]=l)}else s[e]=t}),this.syncDiff(o,{joins:s,leaves:i},n,r)}static syncDiff(e,t,n,r){const{joins:o,leaves:a}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),r||(r=()=>{}),this.map(o,(t,r)=>{var o;const a=null!==(o=e[t])&&void 0!==o?o:[];if(e[t]=this.cloneDeep(r),a.length>0){const n=e[t].map(e=>e.presence_ref),r=a.filter(e=>n.indexOf(e.presence_ref)<0);e[t].unshift(...r)}n(t,a,r)}),this.map(a,(t,n)=>{let o=e[t];if(!o)return;const a=n.map(e=>e.presence_ref);o=o.filter(e=>a.indexOf(e.presence_ref)<0),e[t]=o,r(t,o,n),0===o.length&&delete e[t]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(n=>t(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,n)=>{const r=e[n];return t[n]="metas"in r?r.metas.map(e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e)):r,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}!function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"}(_e||(_e={})),function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"}(je||(je={})),function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"}(Se||(Se={}));class Ce{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}},n=arguments.length>2?arguments[2]:void 0;this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=oe.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new we(this,ae.join,this.params,this.timeout),this.rejoinTimer=new de(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=oe.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel","close ".concat(this.topic," ").concat(this._joinRef())),this.state=oe.closed,this.socket._remove(this)}),this._onError(e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel","error ".concat(this.topic),e),this.state=oe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel","timeout ".concat(this.topic),this.joinPush.timeout),this.state=oe.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ae.reply,{},(e,t)=>{this._trigger(this._replyEventName(t),e)}),this.presence=new Ne(this),this.broadcastEndpointURL=be(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.timeout;var n,r;if(this.socket.isConnected()||this.socket.connect(),this.state==oe.closed){const{config:{broadcast:o,presence:a,private:s}}=this.params;this._onError(t=>null===e||void 0===e?void 0:e(Se.CHANNEL_ERROR,t)),this._onClose(()=>null===e||void 0===e?void 0:e(Se.CLOSED));const i={},l={broadcast:o,presence:a,postgres_changes:null!==(r=null===(n=this.bindings.postgres_changes)||void 0===n?void 0:n.map(e=>e.filter))&&void 0!==r?r:[],private:s};this.socket.accessTokenValue&&(i.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:l},i)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async t=>{let{postgres_changes:n}=t;var r;if(this.socket.setAuth(),void 0!==n){const t=this.bindings.postgres_changes,o=null!==(r=null===t||void 0===t?void 0:t.length)&&void 0!==r?r:0,a=[];for(let r=0;r<o;r++){const o=t[r],{filter:{event:s,schema:i,table:l,filter:c}}=o,d=n&&n[r];if(!d||d.event!==s||d.schema!==i||d.table!==l||d.filter!==c)return this.unsubscribe(),this.state=oe.errored,void(null===e||void 0===e||e(Se.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes")));a.push(Object.assign(Object.assign({},o),{id:d.id}))}return this.bindings.postgres_changes=a,void(e&&e(Se.SUBSCRIBED))}null===e||void 0===e||e(Se.SUBSCRIBED)}).receive("error",t=>{this.state=oe.errored,null===e||void 0===e||e(Se.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(t).join(", ")||"error")))}).receive("timeout",()=>{null===e||void 0===e||e(Se.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return await this.send({type:"presence",event:"untrack"},e)}on(e,t,n){return this._on(e,t,n)}async send(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n,r;if(this._canPush()||"broadcast"!==e.type)return new Promise(n=>{var r,o,a;const s=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(a=null===(o=null===(r=this.params)||void 0===r?void 0:r.config)||void 0===o?void 0:o.broadcast)||void 0===a?void 0:a.ack)||n("ok"),s.receive("ok",()=>n("ok")),s.receive("error",()=>n("error")),s.receive("timeout",()=>n("timed out"))});{const{event:a,payload:s}=e,i={method:"POST",headers:{Authorization:this.socket.accessTokenValue?"Bearer ".concat(this.socket.accessTokenValue):"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:s,private:this.private}]})};try{const e=await this._fetchWithTimeout(this.broadcastEndpointURL,i,null!==(n=t.timeout)&&void 0!==n?n:this.timeout);return await(null===(r=e.body)||void 0===r?void 0:r.cancel()),e.ok?"ok":"error"}catch(o){return"AbortError"===o.name?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this.state=oe.leaving;const t=()=>{this.socket.log("channel","leave ".concat(this.topic)),this._trigger(ae.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(r=>{n=new we(this,ae.leave,{},e),n.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{null===n||void 0===n||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,t,n){const r=new AbortController,o=setTimeout(()=>r.abort(),n),a=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:r.signal}));return clearTimeout(o),a}_push(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.timeout;if(!this.joinedOnce)throw"tried to push '".concat(e,"' to '").concat(this.topic,"' before joining. Use channel.subscribe() before pushing events");let r=new we(this,e,t,n);return this._canPush()?r.send():(r.startTimeout(),this.pushBuffer.push(r)),r}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var r,o;const a=e.toLocaleLowerCase(),{close:s,error:i,leave:l,join:c}=ae;if(n&&[s,i,l,c].indexOf(a)>=0&&n!==this._joinRef())return;let d=this._onMessage(a,t,n);if(t&&!d)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?null===(r=this.bindings.postgres_changes)||void 0===r||r.filter(e=>{var t,n,r;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(r=null===(n=e.filter)||void 0===n?void 0:n.event)||void 0===r?void 0:r.toLocaleLowerCase())===a}).map(e=>e.callback(d,n)):null===(o=this.bindings[a])||void 0===o||o.filter(e=>{var n,r,o,s,i,l;if(["broadcast","presence","postgres_changes"].includes(a)){if("id"in e){const a=e.id,s=null===(n=e.filter)||void 0===n?void 0:n.event;return a&&(null===(r=t.ids)||void 0===r?void 0:r.includes(a))&&("*"===s||(null===s||void 0===s?void 0:s.toLocaleLowerCase())===(null===(o=t.data)||void 0===o?void 0:o.type.toLocaleLowerCase()))}{const n=null===(i=null===(s=null===e||void 0===e?void 0:e.filter)||void 0===s?void 0:s.event)||void 0===i?void 0:i.toLocaleLowerCase();return"*"===n||n===(null===(l=null===t||void 0===t?void 0:t.event)||void 0===l?void 0:l.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===a}).map(e=>{if("object"===typeof d&&"ids"in d){const e=d.data,{schema:t,table:n,commit_timestamp:r,type:o,errors:a}=e,s={schema:t,table:n,commit_timestamp:r,eventType:o,new:{},old:{},errors:a};d=Object.assign(Object.assign({},s),this._getPayloadRecords(e))}e.callback(d,n)})}_isClosed(){return this.state===oe.closed}_isJoined(){return this.state===oe.joined}_isJoining(){return this.state===oe.joining}_isLeaving(){return this.state===oe.leaving}_replyEventName(e){return"chan_reply_".concat(e)}_on(e,t,n){const r=e.toLocaleLowerCase(),o={type:r,filter:t,callback:n};return this.bindings[r]?this.bindings[r].push(o):this.bindings[r]=[o],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(e=>{var r;return!((null===(r=e.type)||void 0===r?void 0:r.toLocaleLowerCase())===n&&Ce.isEqual(e.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(ae.close,{},e)}_onError(e){this._on(ae.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=oe.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=ue(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=ue(e.columns,e.old_record)),t}}const Ee=()=>{};class Pe{constructor(e,t){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=1e4,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Ee,this.ref=0,this.logger=Ee,this.conn=null,this.sendBuffer=[],this.serializer=new ce,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Promise.resolve().then(n.bind(n,630)).then(e=>{let{default:n}=e;return n(...t)})}:fetch),function(){return t(...arguments)}},this.endPoint="".concat(e,"/").concat(se.websocket),this.httpEndpoint=be(e),(null===t||void 0===t?void 0:t.transport)?this.transport=t.transport:this.transport=null,(null===t||void 0===t?void 0:t.params)&&(this.params=t.params),(null===t||void 0===t?void 0:t.timeout)&&(this.timeout=t.timeout),(null===t||void 0===t?void 0:t.logger)&&(this.logger=t.logger),((null===t||void 0===t?void 0:t.logLevel)||(null===t||void 0===t?void 0:t.log_level))&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),(null===t||void 0===t?void 0:t.heartbeatIntervalMs)&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const o=null===(r=null===t||void 0===t?void 0:t.params)||void 0===r?void 0:r.apikey;if(o&&(this.accessTokenValue=o,this.apiKey=o),this.reconnectAfterMs=(null===t||void 0===t?void 0:t.reconnectAfterMs)?t.reconnectAfterMs:e=>[1e3,2e3,5e3,1e4][e-1]||1e4,this.encode=(null===t||void 0===t?void 0:t.encode)?t.encode:(e,t)=>t(JSON.stringify(e)),this.decode=(null===t||void 0===t?void 0:t.decode)?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new de(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(null===t||void 0===t?void 0:t.fetch),null===t||void 0===t?void 0:t.worker){if("undefined"!==typeof window&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(null===t||void 0===t?void 0:t.worker)||!1,this.workerUrl=null===t||void 0===t?void 0:t.workerUrl}this.accessToken=(null===t||void 0===t?void 0:t.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=te),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,null!==t&&void 0!==t?t:""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(e=>e.teardown()))}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case re.connecting:return ie.Connecting;case re.open:return ie.Open;case re.closing:return ie.Closing;default:return ie.Closed}}isConnected(){return this.connectionState()===ie.Open}channel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};const n="realtime:".concat(e),r=this.getChannels().find(e=>e.topic===n);if(r)return r;{const n=new Ce("realtime:".concat(e),t,this);return this.channels.push(n),n}}push(e){const{topic:t,event:n,payload:r,ref:o}=e,a=()=>{this.encode(e,e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)})};this.log("push","".concat(t," ").concat(n," (").concat(o,")"),r),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(){let e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=e&&(this.accessTokenValue=e,this.channels.forEach(t=>{const n={access_token:e,version:ne};e&&t.updateJoinPayload(n),t.joinedOnce&&t._isJoined()&&t._push(ae.access_token,{access_token:e})}))}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef)return this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),void(null===(e=this.conn)||void 0===e||e.close(1e3,"hearbeat timeout"));this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}else this.heartbeatCallback("disconnected")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(t=>t.topic===e&&(t._isJoined()||t._isJoining()));t&&(this.log("transport",'leaving duplicate topic "'.concat(e,'"')),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,e=>{let{topic:t,event:n,payload:r,ref:o}=e;"phoenix"===t&&"phx_reply"===n&&this.heartbeatCallback("ok"==e.payload.status?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive","".concat(r.status||""," ").concat(t," ").concat(n," ").concat(o&&"("+o+")"||""),r),Array.from(this.channels).filter(e=>e._isMember(t)).forEach(e=>e._trigger(n,r,o)),this.stateChangeCallbacks.message.forEach(t=>t(e))})}_onConnOpen(){this.log("transport","connected to ".concat(this.endpointURL())),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker","starting worker for from ".concat(this.workerUrl)):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport","".concat(e)),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(ae.error))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const n=e.match(/\?/)?"&":"?",r=new URLSearchParams(t);return"".concat(e).concat(n).concat(r)}_workerObjectUrl(e){let t;if(e)t=e;else{const e=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}}class Te extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Le(e){return"object"===typeof e&&null!==e&&"__isStorageError"in e}class Re extends Te{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Oe extends Te{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var Ae=function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function s(e){try{l(r.next(e))}catch(t){a(t)}}function i(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,i)}l((r=r.apply(e,t||[])).next())})};const Ie=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Promise.resolve().then(n.bind(n,630)).then(e=>{let{default:n}=e;return n(...t)})}:fetch),function(){return t(...arguments)}},Fe=e=>{if(Array.isArray(e))return e.map(e=>Fe(e));if("function"===typeof e||e!==Object(e))return e;const t={};return Object.entries(e).forEach(e=>{let[n,r]=e;const o=n.replace(/([-_][a-z])/gi,e=>e.toUpperCase().replace(/[-_]/g,""));t[o]=Fe(r)}),t};var Me=function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function s(e){try{l(r.next(e))}catch(t){a(t)}}function i(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,i)}l((r=r.apply(e,t||[])).next())})};const De=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Be=(e,t,r)=>Me(void 0,void 0,void 0,function*(){const o=yield Ae(void 0,void 0,void 0,function*(){return"undefined"===typeof Response?(yield Promise.resolve().then(n.bind(n,630))).Response:Response});e instanceof o&&!(null===r||void 0===r?void 0:r.noResolveJson)?e.json().then(n=>{t(new Re(De(n),e.status||500))}).catch(e=>{t(new Oe(De(e),e))}):t(new Oe(De(e),e))});function ze(e,t,n,r,o,a){return Me(this,void 0,void 0,function*(){return new Promise((s,i)=>{e(n,((e,t,n,r)=>{const o={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{}};return"GET"===e?o:(o.headers=Object.assign({"Content-Type":"application/json"},null===t||void 0===t?void 0:t.headers),r&&(o.body=JSON.stringify(r)),Object.assign(Object.assign({},o),n))})(t,r,o,a)).then(e=>{if(!e.ok)throw e;return(null===r||void 0===r?void 0:r.noResolveJson)?e:e.json()}).then(e=>s(e)).catch(e=>Be(e,i,r))})})}function Ue(e,t,n,r){return Me(this,void 0,void 0,function*(){return ze(e,"GET",t,n,r)})}function qe(e,t,n,r,o){return Me(this,void 0,void 0,function*(){return ze(e,"POST",t,r,o,n)})}function He(e,t,n,r,o){return Me(this,void 0,void 0,function*(){return ze(e,"DELETE",t,r,o,n)})}var Ve=function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function s(e){try{l(r.next(e))}catch(t){a(t)}}function i(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,i)}l((r=r.apply(e,t||[])).next())})};const We={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Ke={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Je{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;this.url=e,this.headers=t,this.bucketId=n,this.fetch=Ie(r)}uploadOrUpdate(e,t,n,r){return Ve(this,void 0,void 0,function*(){try{let o;const a=Object.assign(Object.assign({},Ke),r);let s=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(a.upsert)});const i=a.metadata;"undefined"!==typeof Blob&&n instanceof Blob?(o=new FormData,o.append("cacheControl",a.cacheControl),i&&o.append("metadata",this.encodeMetadata(i)),o.append("",n)):"undefined"!==typeof FormData&&n instanceof FormData?(o=n,o.append("cacheControl",a.cacheControl),i&&o.append("metadata",this.encodeMetadata(i))):(o=n,s["cache-control"]="max-age=".concat(a.cacheControl),s["content-type"]=a.contentType,i&&(s["x-metadata"]=this.toBase64(this.encodeMetadata(i)))),(null===r||void 0===r?void 0:r.headers)&&(s=Object.assign(Object.assign({},s),r.headers));const l=this._removeEmptyFolders(t),c=this._getFinalPath(l),d=yield this.fetch("".concat(this.url,"/object/").concat(c),Object.assign({method:e,body:o,headers:s},(null===a||void 0===a?void 0:a.duplex)?{duplex:a.duplex}:{})),u=yield d.json();if(d.ok)return{data:{path:l,id:u.Id,fullPath:u.Key},error:null};return{data:null,error:u}}catch(o){if(Le(o))return{data:null,error:o};throw o}})}upload(e,t,n){return Ve(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,n)})}uploadToSignedUrl(e,t,n,r){return Ve(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(e),a=this._getFinalPath(o),s=new URL(this.url+"/object/upload/sign/".concat(a));s.searchParams.set("token",t);try{let e;const t=Object.assign({upsert:Ke.upsert},r),a=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});"undefined"!==typeof Blob&&n instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",n)):"undefined"!==typeof FormData&&n instanceof FormData?(e=n,e.append("cacheControl",t.cacheControl)):(e=n,a["cache-control"]="max-age=".concat(t.cacheControl),a["content-type"]=t.contentType);const i=yield this.fetch(s.toString(),{method:"PUT",body:e,headers:a}),l=yield i.json();if(i.ok)return{data:{path:o,fullPath:l.Key},error:null};return{data:null,error:l}}catch(i){if(Le(i))return{data:null,error:i};throw i}})}createSignedUploadUrl(e,t){return Ve(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const r=Object.assign({},this.headers);(null===t||void 0===t?void 0:t.upsert)&&(r["x-upsert"]="true");const o=yield qe(this.fetch,"".concat(this.url,"/object/upload/sign/").concat(n),{},{headers:r}),a=new URL(this.url+o.url),s=a.searchParams.get("token");if(!s)throw new Te("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:s},error:null}}catch(n){if(Le(n))return{data:null,error:n};throw n}})}update(e,t,n){return Ve(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,n)})}move(e,t,n){return Ve(this,void 0,void 0,function*(){try{return{data:yield qe(this.fetch,"".concat(this.url,"/object/move"),{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null===n||void 0===n?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(Le(r))return{data:null,error:r};throw r}})}copy(e,t,n){return Ve(this,void 0,void 0,function*(){try{return{data:{path:(yield qe(this.fetch,"".concat(this.url,"/object/copy"),{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null===n||void 0===n?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(Le(r))return{data:null,error:r};throw r}})}createSignedUrl(e,t,n){return Ve(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),o=yield qe(this.fetch,"".concat(this.url,"/object/sign/").concat(r),Object.assign({expiresIn:t},(null===n||void 0===n?void 0:n.transform)?{transform:n.transform}:{}),{headers:this.headers});const a=(null===n||void 0===n?void 0:n.download)?"&download=".concat(!0===n.download?"":n.download):"";return o={signedUrl:encodeURI("".concat(this.url).concat(o.signedURL).concat(a))},{data:o,error:null}}catch(r){if(Le(r))return{data:null,error:r};throw r}})}createSignedUrls(e,t,n){return Ve(this,void 0,void 0,function*(){try{const r=yield qe(this.fetch,"".concat(this.url,"/object/sign/").concat(this.bucketId),{expiresIn:t,paths:e},{headers:this.headers}),o=(null===n||void 0===n?void 0:n.download)?"&download=".concat(!0===n.download?"":n.download):"";return{data:r.map(e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI("".concat(this.url).concat(e.signedURL).concat(o)):null})),error:null}}catch(r){if(Le(r))return{data:null,error:r};throw r}})}download(e,t){return Ve(this,void 0,void 0,function*(){const n="undefined"!==typeof(null===t||void 0===t?void 0:t.transform)?"render/image/authenticated":"object",r=this.transformOptsToQueryString((null===t||void 0===t?void 0:t.transform)||{}),o=r?"?".concat(r):"";try{const t=this._getFinalPath(e),r=yield Ue(this.fetch,"".concat(this.url,"/").concat(n,"/").concat(t).concat(o),{headers:this.headers,noResolveJson:!0});return{data:yield r.blob(),error:null}}catch(a){if(Le(a))return{data:null,error:a};throw a}})}info(e){return Ve(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const e=yield Ue(this.fetch,"".concat(this.url,"/object/info/").concat(t),{headers:this.headers});return{data:Fe(e),error:null}}catch(n){if(Le(n))return{data:null,error:n};throw n}})}exists(e){return Ve(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield function(e,t,n,r){return Me(this,void 0,void 0,function*(){return ze(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}(this.fetch,"".concat(this.url,"/object/").concat(t),{headers:this.headers}),{data:!0,error:null}}catch(n){if(Le(n)&&n instanceof Oe){const e=n.originalError;if([400,404].includes(null===e||void 0===e?void 0:e.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,t){const n=this._getFinalPath(e),r=[],o=(null===t||void 0===t?void 0:t.download)?"download=".concat(!0===t.download?"":t.download):"";""!==o&&r.push(o);const a="undefined"!==typeof(null===t||void 0===t?void 0:t.transform)?"render/image":"object",s=this.transformOptsToQueryString((null===t||void 0===t?void 0:t.transform)||{});""!==s&&r.push(s);let i=r.join("&");return""!==i&&(i="?".concat(i)),{data:{publicUrl:encodeURI("".concat(this.url,"/").concat(a,"/public/").concat(n).concat(i))}}}remove(e){return Ve(this,void 0,void 0,function*(){try{return{data:yield He(this.fetch,"".concat(this.url,"/object/").concat(this.bucketId),{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(Le(t))return{data:null,error:t};throw t}})}list(e,t,n){return Ve(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},We),t),{prefix:e||""});return{data:yield qe(this.fetch,"".concat(this.url,"/object/list/").concat(this.bucketId),r,{headers:this.headers},n),error:null}}catch(r){if(Le(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return"undefined"!==typeof Buffer?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return"".concat(this.bucketId,"/").concat(e)}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push("width=".concat(e.width)),e.height&&t.push("height=".concat(e.height)),e.resize&&t.push("resize=".concat(e.resize)),e.format&&t.push("format=".concat(e.format)),e.quality&&t.push("quality=".concat(e.quality)),t.join("&")}}const $e={"X-Client-Info":"storage-js/".concat("2.7.1")};var Qe=function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function s(e){try{l(r.next(e))}catch(t){a(t)}}function i(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,i)}l((r=r.apply(e,t||[])).next())})};class Ge{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;this.url=e,this.headers=Object.assign(Object.assign({},$e),t),this.fetch=Ie(n)}listBuckets(){return Qe(this,void 0,void 0,function*(){try{return{data:yield Ue(this.fetch,"".concat(this.url,"/bucket"),{headers:this.headers}),error:null}}catch(e){if(Le(e))return{data:null,error:e};throw e}})}getBucket(e){return Qe(this,void 0,void 0,function*(){try{return{data:yield Ue(this.fetch,"".concat(this.url,"/bucket/").concat(e),{headers:this.headers}),error:null}}catch(t){if(Le(t))return{data:null,error:t};throw t}})}createBucket(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{public:!1};return Qe(this,void 0,void 0,function*(){try{return{data:yield qe(this.fetch,"".concat(this.url,"/bucket"),{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Le(n))return{data:null,error:n};throw n}})}updateBucket(e,t){return Qe(this,void 0,void 0,function*(){try{const n=yield function(e,t,n,r,o){return Me(this,void 0,void 0,function*(){return ze(e,"PUT",t,r,o,n)})}(this.fetch,"".concat(this.url,"/bucket/").concat(e),{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers});return{data:n,error:null}}catch(n){if(Le(n))return{data:null,error:n};throw n}})}emptyBucket(e){return Qe(this,void 0,void 0,function*(){try{return{data:yield qe(this.fetch,"".concat(this.url,"/bucket/").concat(e,"/empty"),{},{headers:this.headers}),error:null}}catch(t){if(Le(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Qe(this,void 0,void 0,function*(){try{return{data:yield He(this.fetch,"".concat(this.url,"/bucket/").concat(e),{},{headers:this.headers}),error:null}}catch(t){if(Le(t))return{data:null,error:t};throw t}})}}class Ye extends Ge{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},arguments.length>2?arguments[2]:void 0)}from(e){return new Je(this.url,this.headers,e,this.fetch)}}let Xe="";Xe="undefined"!==typeof Deno?"deno":"undefined"!==typeof document?"web":"undefined"!==typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";const Ze={headers:{"X-Client-Info":"supabase-js-".concat(Xe,"/").concat("2.50.3")}},et={schema:"public"},tt={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},nt={};var rt=n(630),ot=function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function s(e){try{l(r.next(e))}catch(t){a(t)}}function i(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,i)}l((r=r.apply(e,t||[])).next())})};const at=e=>{let t;return t=e||("undefined"===typeof fetch?rt.default:fetch),function(){return t(...arguments)}},st=(e,t,n)=>{const r=at(n),o="undefined"===typeof Headers?rt.Headers:Headers;return(n,a)=>ot(void 0,void 0,void 0,function*(){var s;const i=null!==(s=yield t())&&void 0!==s?s:e;let l=new o(null===a||void 0===a?void 0:a.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization","Bearer ".concat(i)),r(n,Object.assign(Object.assign({},a),{headers:l}))})};var it=function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function s(e){try{l(r.next(e))}catch(t){a(t)}}function i(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,i)}l((r=r.apply(e,t||[])).next())})};const lt="2.70.0",ct=3e4,dt=9e4,ut={"X-Client-Info":"gotrue-js/".concat(lt)},ht="X-Supabase-Api-Version",pt={timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"},ft=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class mt extends Error{constructor(e,t,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=n}}function gt(e){return"object"===typeof e&&null!==e&&"__isAuthError"in e}class yt extends mt{constructor(e,t,n){super(e,t,n),this.name="AuthApiError",this.status=t,this.code=n}}class vt extends mt{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class xt extends mt{constructor(e,t,n,r){super(e,n,r),this.name=t,this.status=n}}class bt extends xt{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class wt extends xt{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class kt extends xt{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class _t extends xt{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class jt extends xt{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class St extends xt{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Nt(e){return gt(e)&&"AuthRetryableFetchError"===e.name}class Ct extends xt{constructor(e,t,n){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=n}}class Et extends xt{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Pt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Tt=" \t\n\r=".split(""),Lt=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Tt.length;t+=1)e[Tt[t].charCodeAt(0)]=-2;for(let t=0;t<Pt.length;t+=1)e[Pt[t].charCodeAt(0)]=t;return e})();function Rt(e,t,n){if(null!==e)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;n(Pt[e]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;n(Pt[e]),t.queuedBits-=6}}function Ot(e,t,n){const r=Lt[e];if(!(r>-1)){if(-2===r)return;throw new Error('Invalid Base64-URL character "'.concat(String.fromCharCode(e),'"'))}for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8}function At(e){const t=[],n=e=>{t.push(String.fromCodePoint(e))},r={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},a=e=>{!function(e,t,n){if(0===t.utf8seq){if(e<=127)return void n(e);for(let n=1;n<6;n+=1)if(0===(e>>7-n&1)){t.utf8seq=n;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else{if(4!==t.utf8seq)throw new Error("Invalid UTF-8 sequence");t.codepoint=7&e}t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&n(t.codepoint)}}(e,r,n)};for(let s=0;s<e.length;s+=1)Ot(e.charCodeAt(s),o,a);return t.join("")}function It(e,t){if(!(e<=127)){if(e<=2047)return t(192|e>>6),void t(128|63&e);if(e<=65535)return t(224|e>>12),t(128|e>>6&63),void t(128|63&e);if(e<=1114111)return t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),void t(128|63&e);throw new Error("Unrecognized Unicode codepoint: ".concat(e.toString(16)))}t(e)}function Ft(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const t=1024*(r-55296)&65535;r=65536+(e.charCodeAt(n+1)-56320&65535|t),n+=1}It(r,t)}}function Mt(e){const t=[],n={queue:0,queuedBits:0},r=e=>{t.push(e)};for(let o=0;o<e.length;o+=1)Ot(e.charCodeAt(o),n,r);return new Uint8Array(t)}function Dt(e){const t=[],n={queue:0,queuedBits:0},r=e=>{t.push(e)};return e.forEach(e=>Rt(e,n,r)),Rt(null,n,r),t.join("")}const Bt=()=>"undefined"!==typeof window&&"undefined"!==typeof document,zt={tested:!1,writable:!1},Ut=()=>{if(!Bt())return!1;try{if("object"!==typeof globalThis.localStorage)return!1}catch(t){return!1}if(zt.tested)return zt.writable;const e="lswt-".concat(Math.random()).concat(Math.random());try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),zt.tested=!0,zt.writable=!0}catch(t){zt.tested=!0,zt.writable=!1}return zt.writable};const qt=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Promise.resolve().then(n.bind(n,630)).then(e=>{let{default:n}=e;return n(...t)})}:fetch),function(){return t(...arguments)}},Ht=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Vt=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch(r){return n}},Wt=async(e,t)=>{await e.removeItem(t)};class Kt{constructor(){this.promise=new Kt.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}function Jt(e){const t=e.split(".");if(3!==t.length)throw new Et("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!ft.test(t[n]))throw new Et("JWT not in base64url format");return{header:JSON.parse(At(t[0])),payload:JSON.parse(At(t[1])),signature:Mt(t[2]),raw:{header:t[0],payload:t[1]}}}function $t(e){return("0"+e.toString(16)).substr(-2)}async function Qt(e){if(!("undefined"!==typeof crypto&&"undefined"!==typeof crypto.subtle&&"undefined"!==typeof TextEncoder))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const t=await async function(e){const t=(new TextEncoder).encode(e),n=await crypto.subtle.digest("SHA-256",t),r=new Uint8Array(n);return Array.from(r).map(e=>String.fromCharCode(e)).join("")}(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Gt(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=function(){const e=new Uint32Array(56);if("undefined"===typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let n="";for(let r=0;r<56;r++)n+=e.charAt(Math.floor(Math.random()*t));return n}return crypto.getRandomValues(e),Array.from(e,$t).join("")}();let o=r;n&&(o+="/PASSWORD_RECOVERY"),await Ht(e,"".concat(t,"-code-verifier"),o);const a=await Qt(r);return[a,r===a?"plain":"s256"]}Kt.promiseConstructor=Promise;const Yt=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;const Xt=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Zt(e){if(!Xt.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var en=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};const tn=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),nn=[502,503,504];async function rn(e){var t,n;if(!("object"===typeof(n=e)&&null!==n&&"status"in n&&"ok"in n&&"json"in n&&"function"===typeof n.json))throw new St(tn(e),0);if(nn.includes(e.status))throw new St(tn(e),e.status);let r,o;try{r=await e.json()}catch(s){throw new vt(tn(s),s)}const a=function(e){const t=e.headers.get(ht);if(!t)return null;if(!t.match(Yt))return null;try{return new Date("".concat(t,"T00:00:00.0Z"))}catch(s){return null}}(e);if(a&&a.getTime()>=pt.timestamp&&"object"===typeof r&&r&&"string"===typeof r.code?o=r.code:"object"===typeof r&&r&&"string"===typeof r.error_code&&(o=r.error_code),o){if("weak_password"===o)throw new Ct(tn(r),e.status,(null===(t=r.weak_password)||void 0===t?void 0:t.reasons)||[]);if("session_not_found"===o)throw new bt}else if("object"===typeof r&&r&&"object"===typeof r.weak_password&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((e,t)=>e&&"string"===typeof t,!0))throw new Ct(tn(r),e.status,r.weak_password.reasons);throw new yt(tn(r),e.status||500,o)}async function on(e,t,n,r){var o;const a=Object.assign({},null===r||void 0===r?void 0:r.headers);a[ht]||(a[ht]=pt.name),(null===r||void 0===r?void 0:r.jwt)&&(a.Authorization="Bearer ".concat(r.jwt));const s=null!==(o=null===r||void 0===r?void 0:r.query)&&void 0!==o?o:{};(null===r||void 0===r?void 0:r.redirectTo)&&(s.redirect_to=r.redirectTo);const i=Object.keys(s).length?"?"+new URLSearchParams(s).toString():"",l=await async function(e,t,n,r,o,a){const s=((e,t,n,r)=>{const o={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{}};return"GET"===e?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null===t||void 0===t?void 0:t.headers),o.body=JSON.stringify(r),Object.assign(Object.assign({},o),n))})(t,r,o,a);let i;try{i=await e(n,Object.assign({},s))}catch(l){throw console.error(l),new St(tn(l),0)}i.ok||await rn(i);if(null===r||void 0===r?void 0:r.noResolveJson)return i;try{return await i.json()}catch(l){await rn(l)}}(e,t,n+i,{headers:a,noResolveJson:null===r||void 0===r?void 0:r.noResolveJson},{},null===r||void 0===r?void 0:r.body);return(null===r||void 0===r?void 0:r.xform)?null===r||void 0===r?void 0:r.xform(l):{data:Object.assign({},l),error:null}}function an(e){var t;let n=null;var r;(function(e){return e.access_token&&e.refresh_token&&e.expires_in})(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=(r=e.expires_in,Math.round(Date.now()/1e3)+r)));return{data:{session:n,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function sn(e){const t=an(e);return!t.error&&e.weak_password&&"object"===typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"===typeof e.weak_password.message&&e.weak_password.reasons.reduce((e,t)=>e&&"string"===typeof t,!0)&&(t.data.weak_password=e.weak_password),t}function ln(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function cn(e){return{data:e,error:null}}function dn(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:o,verification_type:a}=e,s=en(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:n,hashed_token:r,redirect_to:o,verification_type:a},user:Object.assign({},s)},error:null}}function un(e){return e}const hn=["global","local","others"];var pn=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};class fn{constructor(e){let{url:t="",headers:n={},fetch:r}=e;this.url=t,this.headers=n,this.fetch=qt(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:hn[0];if(hn.indexOf(t)<0)throw new Error("@supabase/auth-js: Parameter scope must be one of ".concat(hn.join(", ")));try{return await on(this.fetch,"POST","".concat(this.url,"/logout?scope=").concat(t),{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(gt(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await on(this.fetch,"POST","".concat(this.url,"/invite"),{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:ln})}catch(n){if(gt(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:t}=e,n=pn(e,["options"]),r=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(r.new_email=null===n||void 0===n?void 0:n.newEmail,delete r.newEmail),await on(this.fetch,"POST","".concat(this.url,"/admin/generate_link"),{body:r,headers:this.headers,xform:dn,redirectTo:null===t||void 0===t?void 0:t.redirectTo})}catch(t){if(gt(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await on(this.fetch,"POST","".concat(this.url,"/admin/users"),{body:e,headers:this.headers,xform:ln})}catch(t){if(gt(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,n,r,o,a,s,i;try{const l={nextPage:null,lastPage:0,total:0},c=await on(this.fetch,"GET","".concat(this.url,"/admin/users"),{headers:this.headers,noResolveJson:!0,query:{page:null!==(n=null===(t=null===e||void 0===e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==n?n:"",per_page:null!==(o=null===(r=null===e||void 0===e?void 0:e.perPage)||void 0===r?void 0:r.toString())&&void 0!==o?o:""},xform:un});if(c.error)throw c.error;const d=await c.json(),u=null!==(a=c.headers.get("x-total-count"))&&void 0!==a?a:0,h=null!==(i=null===(s=c.headers.get("link"))||void 0===s?void 0:s.split(","))&&void 0!==i?i:[];return h.length>0&&(h.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),n=JSON.parse(e.split(";")[1].split("=")[1]);l["".concat(n,"Page")]=t}),l.total=parseInt(u)),{data:Object.assign(Object.assign({},d),l),error:null}}catch(l){if(gt(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){Zt(e);try{return await on(this.fetch,"GET","".concat(this.url,"/admin/users/").concat(e),{headers:this.headers,xform:ln})}catch(t){if(gt(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Zt(e);try{return await on(this.fetch,"PUT","".concat(this.url,"/admin/users/").concat(e),{body:t,headers:this.headers,xform:ln})}catch(n){if(gt(n))return{data:{user:null},error:n};throw n}}async deleteUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Zt(e);try{return await on(this.fetch,"DELETE","".concat(this.url,"/admin/users/").concat(e),{headers:this.headers,body:{should_soft_delete:t},xform:ln})}catch(n){if(gt(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){Zt(e.userId);try{const{data:t,error:n}=await on(this.fetch,"GET","".concat(this.url,"/admin/users/").concat(e.userId,"/factors"),{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:n}}catch(t){if(gt(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Zt(e.userId),Zt(e.id);try{return{data:await on(this.fetch,"DELETE","".concat(this.url,"/admin/users/").concat(e.userId,"/factors/").concat(e.id),{headers:this.headers}),error:null}}catch(t){if(gt(t))return{data:null,error:t};throw t}}}const mn={getItem:e=>Ut()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{Ut()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{Ut()&&globalThis.localStorage.removeItem(e)}};function gn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const yn=!!(globalThis&&Ut()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"));class vn extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class xn extends vn{}async function bn(e,t,n){yn&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),yn&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async r=>{if(!r){if(0===t)throw yn&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new xn('Acquiring an exclusive Navigator LockManager lock "'.concat(e,'" immediately failed'));if(yn)try{const e=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(e,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}yn&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,r.name);try{return await n()}finally{yn&&console.log("@supabase/gotrue-js: navigatorLock: released",e,r.name)}}))}!function(){if("object"!==typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(e){"undefined"!==typeof self&&(self.globalThis=self)}}();const wn={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:ut,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function kn(e,t,n){return await n()}class _n{constructor(e){var t,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=_n.nextInstanceID,_n.nextInstanceID+=1,this.instanceID>0&&Bt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},wn),e);if(this.logDebugMessages=!!r.debug,"function"===typeof r.debug&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new fn({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=qt(r.fetch),this.lock=r.lock||kn,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,r.lock?this.lock=r.lock:Bt()&&(null===(t=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===t?void 0:t.locks)?this.lock=bn:this.lock=kn,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?r.storage?this.storage=r.storage:Ut()?this.storage=mn:(this.memoryStorage={},this.storage=gn(this.memoryStorage)):(this.memoryStorage={},this.storage=gn(this.memoryStorage)),Bt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}null===(n=this.broadcastChannel)||void 0===n||n.addEventListener("message",async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)})}this.initialize()}_debug(){if(this.logDebugMessages){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger("GoTrueClient@".concat(this.instanceID," (").concat(lt,") ").concat((new Date).toISOString()),...t)}return this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))()),await this.initializePromise}async _initialize(){var e;try{const t=function(e){const t={},n=new URL(e);if(n.hash&&"#"===n.hash[0])try{new URLSearchParams(n.hash.substring(1)).forEach((e,n)=>{t[n]=e})}catch(r){}return n.searchParams.forEach((e,n)=>{t[n]=e}),t}(window.location.href);let n="none";if(this._isImplicitGrantCallback(t)?n="implicit":await this._isPKCECallback(t)&&(n="pkce"),Bt()&&this.detectSessionInUrl&&"none"!==n){const{data:r,error:o}=await this._getSessionFromURL(t,n);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),function(e){return gt(e)&&"AuthImplicitGrantRedirectError"===e.name}(o)){const t=null===(e=o.details)||void 0===e?void 0:e.code;if("identity_already_exists"===t||"identity_not_found"===t||"single_identity_not_deletable"===t)return{error:o}}return await this._removeSession(),{error:o}}const{session:a,redirectType:s}=r;return this._debug("#_initialize()","detected session in URL",a,"redirect type",s),await this._saveSession(a),setTimeout(async()=>{"recovery"===s?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return gt(t)?{error:t}:{error:new vt("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,n,r;try{const o=await on(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,body:{data:null!==(n=null===(t=null===e||void 0===e?void 0:e.options)||void 0===t?void 0:t.data)&&void 0!==n?n:{},gotrue_meta_security:{captcha_token:null===(r=null===e||void 0===e?void 0:e.options)||void 0===r?void 0:r.captchaToken}},xform:an}),{data:a,error:s}=o;if(s||!a)return{data:{user:null,session:null},error:s};const i=a.session,l=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",i)),{data:{user:l,session:i},error:null}}catch(o){if(gt(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(e){var t,n,r;try{let o;if("email"in e){const{email:n,password:r,options:a}=e;let s=null,i=null;"pkce"===this.flowType&&([s,i]=await Gt(this.storage,this.storageKey)),o=await on(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,redirectTo:null===a||void 0===a?void 0:a.emailRedirectTo,body:{email:n,password:r,data:null!==(t=null===a||void 0===a?void 0:a.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null===a||void 0===a?void 0:a.captchaToken},code_challenge:s,code_challenge_method:i},xform:an})}else{if(!("phone"in e))throw new kt("You must provide either an email or phone number and a password");{const{phone:t,password:a,options:s}=e;o=await on(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,body:{phone:t,password:a,data:null!==(n=null===s||void 0===s?void 0:s.data)&&void 0!==n?n:{},channel:null!==(r=null===s||void 0===s?void 0:s.channel)&&void 0!==r?r:"sms",gotrue_meta_security:{captcha_token:null===s||void 0===s?void 0:s.captchaToken}},xform:an})}}const{data:a,error:s}=o;if(s||!a)return{data:{user:null,session:null},error:s};const i=a.session,l=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",i)),{data:{user:l,session:i},error:null}}catch(o){if(gt(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(e){try{let t;if("email"in e){const{email:n,password:r,options:o}=e;t=await on(this.fetch,"POST","".concat(this.url,"/token?grant_type=password"),{headers:this.headers,body:{email:n,password:r,gotrue_meta_security:{captcha_token:null===o||void 0===o?void 0:o.captchaToken}},xform:sn})}else{if(!("phone"in e))throw new kt("You must provide either an email or phone number and a password");{const{phone:n,password:r,options:o}=e;t=await on(this.fetch,"POST","".concat(this.url,"/token?grant_type=password"),{headers:this.headers,body:{phone:n,password:r,gotrue_meta_security:{captcha_token:null===o||void 0===o?void 0:o.captchaToken}},xform:sn})}}const{data:n,error:r}=t;return r?{data:{user:null,session:null},error:r}:n&&n.session&&n.user?(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:r}):{data:{user:null,session:null},error:new wt}}catch(t){if(gt(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,n,r,o;return await this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(n=e.options)||void 0===n?void 0:n.scopes,queryParams:null===(r=e.options)||void 0===r?void 0:r.queryParams,skipBrowserRedirect:null===(o=e.options)||void 0===o?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if("solana"===t)return await this.signInWithSolana(e);throw new Error('@supabase/auth-js: Unsupported chain "'.concat(t,'"'))}async signInWithSolana(e){var t,n,r,o,a,s,i,l,c,d,u,h;let p,f;if("message"in e)p=e.message,f=e.signature;else{const{chain:u,wallet:h,statement:m,options:g}=e;let y;if(Bt())if("object"===typeof h)y=h;else{const e=window;if(!("solana"in e)||"object"!==typeof e.solana||!("signIn"in e.solana&&"function"===typeof e.solana.signIn||"signMessage"in e.solana&&"function"===typeof e.solana.signMessage))throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");y=e.solana}else{if("object"!==typeof h||!(null===g||void 0===g?void 0:g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");y=h}const v=new URL(null!==(t=null===g||void 0===g?void 0:g.url)&&void 0!==t?t:window.location.href);if("signIn"in y&&y.signIn){const e=await y.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},null===g||void 0===g?void 0:g.signInWithSolana),{version:"1",domain:v.host,uri:v.href}),m?{statement:m}:null));let t;if(Array.isArray(e)&&e[0]&&"object"===typeof e[0])t=e[0];else{if(!(e&&"object"===typeof e&&"signedMessage"in e&&"signature"in e))throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");t=e}if(!("signedMessage"in t&&"signature"in t&&("string"===typeof t.signedMessage||t.signedMessage instanceof Uint8Array)&&t.signature instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");p="string"===typeof t.signedMessage?t.signedMessage:(new TextDecoder).decode(t.signedMessage),f=t.signature}else{if(!("signMessage"in y)||"function"!==typeof y.signMessage||!("publicKey"in y)||"object"!==typeof y||!y.publicKey||!("toBase58"in y.publicKey)||"function"!==typeof y.publicKey.toBase58)throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=["".concat(v.host," wants you to sign in with your Solana account:"),y.publicKey.toBase58(),...m?["",m,""]:[""],"Version: 1","URI: ".concat(v.href),"Issued At: ".concat(null!==(r=null===(n=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===n?void 0:n.issuedAt)&&void 0!==r?r:(new Date).toISOString()),...(null===(o=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===o?void 0:o.notBefore)?["Not Before: ".concat(g.signInWithSolana.notBefore)]:[],...(null===(a=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===a?void 0:a.expirationTime)?["Expiration Time: ".concat(g.signInWithSolana.expirationTime)]:[],...(null===(s=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===s?void 0:s.chainId)?["Chain ID: ".concat(g.signInWithSolana.chainId)]:[],...(null===(i=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===i?void 0:i.nonce)?["Nonce: ".concat(g.signInWithSolana.nonce)]:[],...(null===(l=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===l?void 0:l.requestId)?["Request ID: ".concat(g.signInWithSolana.requestId)]:[],...(null===(d=null===(c=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===c?void 0:c.resources)||void 0===d?void 0:d.length)?["Resources",...g.signInWithSolana.resources.map(e=>"- ".concat(e))]:[]].join("\n");const e=await y.signMessage((new TextEncoder).encode(p),"utf8");if(!e||!(e instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");f=e}}try{const{data:t,error:n}=await on(this.fetch,"POST","".concat(this.url,"/token?grant_type=web3"),{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:Dt(f)},(null===(u=e.options)||void 0===u?void 0:u.captchaToken)?{gotrue_meta_security:{captcha_token:null===(h=e.options)||void 0===h?void 0:h.captchaToken}}:null),xform:an});if(n)throw n;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign({},t),error:n}):{data:{user:null,session:null},error:new wt}}catch(m){if(gt(m))return{data:{user:null,session:null},error:m};throw m}}async _exchangeCodeForSession(e){const t=await Vt(this.storage,"".concat(this.storageKey,"-code-verifier")),[n,r]=(null!==t&&void 0!==t?t:"").split("/");try{const{data:t,error:o}=await on(this.fetch,"POST","".concat(this.url,"/token?grant_type=pkce"),{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:an});if(await Wt(this.storage,"".concat(this.storageKey,"-code-verifier")),o)throw o;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign(Object.assign({},t),{redirectType:null!==r&&void 0!==r?r:null}),error:o}):{data:{user:null,session:null,redirectType:null},error:new wt}}catch(o){if(gt(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(e){try{const{options:t,provider:n,token:r,access_token:o,nonce:a}=e,s=await on(this.fetch,"POST","".concat(this.url,"/token?grant_type=id_token"),{headers:this.headers,body:{provider:n,id_token:r,access_token:o,nonce:a,gotrue_meta_security:{captcha_token:null===t||void 0===t?void 0:t.captchaToken}},xform:an}),{data:i,error:l}=s;return l?{data:{user:null,session:null},error:l}:i&&i.session&&i.user?(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:i,error:l}):{data:{user:null,session:null},error:new wt}}catch(t){if(gt(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,n,r,o,a;try{if("email"in e){const{email:r,options:o}=e;let a=null,s=null;"pkce"===this.flowType&&([a,s]=await Gt(this.storage,this.storageKey));const{error:i}=await on(this.fetch,"POST","".concat(this.url,"/otp"),{headers:this.headers,body:{email:r,data:null!==(t=null===o||void 0===o?void 0:o.data)&&void 0!==t?t:{},create_user:null===(n=null===o||void 0===o?void 0:o.shouldCreateUser)||void 0===n||n,gotrue_meta_security:{captcha_token:null===o||void 0===o?void 0:o.captchaToken},code_challenge:a,code_challenge_method:s},redirectTo:null===o||void 0===o?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:i}}if("phone"in e){const{phone:t,options:n}=e,{data:s,error:i}=await on(this.fetch,"POST","".concat(this.url,"/otp"),{headers:this.headers,body:{phone:t,data:null!==(r=null===n||void 0===n?void 0:n.data)&&void 0!==r?r:{},create_user:null===(o=null===n||void 0===n?void 0:n.shouldCreateUser)||void 0===o||o,gotrue_meta_security:{captcha_token:null===n||void 0===n?void 0:n.captchaToken},channel:null!==(a=null===n||void 0===n?void 0:n.channel)&&void 0!==a?a:"sms"}});return{data:{user:null,session:null,messageId:null===s||void 0===s?void 0:s.message_id},error:i}}throw new kt("You must provide either an email or phone number.")}catch(s){if(gt(s))return{data:{user:null,session:null},error:s};throw s}}async verifyOtp(e){var t,n;try{let r,o;"options"in e&&(r=null===(t=e.options)||void 0===t?void 0:t.redirectTo,o=null===(n=e.options)||void 0===n?void 0:n.captchaToken);const{data:a,error:s}=await on(this.fetch,"POST","".concat(this.url,"/verify"),{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:r,xform:an});if(s)throw s;if(!a)throw new Error("An error occurred on token verification.");const i=a.session,l=a.user;return(null===i||void 0===i?void 0:i.access_token)&&(await this._saveSession(i),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",i)),{data:{user:l,session:i},error:null}}catch(r){if(gt(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(e){var t,n,r;try{let o=null,a=null;return"pkce"===this.flowType&&([o,a]=await Gt(this.storage,this.storageKey)),await on(this.fetch,"POST","".concat(this.url,"/sso"),{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(n=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==n?n:void 0}),(null===(r=null===e||void 0===e?void 0:e.options)||void 0===r?void 0:r.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:a}),headers:this.headers,xform:cn})}catch(o){if(gt(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new bt;const{error:r}=await on(this.fetch,"GET","".concat(this.url,"/reauthenticate"),{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:r}})}catch(e){if(gt(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t="".concat(this.url,"/resend");if("email"in e){const{email:n,type:r,options:o}=e,{error:a}=await on(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:r,gotrue_meta_security:{captcha_token:null===o||void 0===o?void 0:o.captchaToken}},redirectTo:null===o||void 0===o?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:a}}if("phone"in e){const{phone:n,type:r,options:o}=e,{data:a,error:s}=await on(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:r,gotrue_meta_security:{captcha_token:null===o||void 0===o?void 0:o.captchaToken}}});return{data:{user:null,session:null,messageId:null===a||void 0===a?void 0:a.message_id},error:s}}throw new kt("You must provide either an email or phone number and a type")}catch(t){if(gt(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){await this.initializePromise;return await this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await n}catch(e){}})()),n}return await this.lock("lock:".concat(this.storageKey),e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(t){}})()),await e;this.pendingInLock.length;){const e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let e=null;const t=await Vt(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=!!e.expires_at&&1e3*e.expires_at-Date.now()<dt;if(this._debug("#__loadSession()","session has".concat(n?"":" not"," expired"),"expires_at",e.expires_at),!n){if(this.storage.isServer){let t=this.suppressGetSessionWarning;e=new Proxy(e,{get:(e,n,r)=>(t||"user"!==n||(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t=!0,this.suppressGetSessionWarning=!0),Reflect.get(e,n,r))})}return{data:{session:e},error:null}}const{session:r,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{session:null},error:o}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;return await this._acquireLock(-1,async()=>await this._getUser())}async _getUser(e){try{return e?await on(this.fetch,"GET","".concat(this.url,"/user"),{headers:this.headers,jwt:e,xform:ln}):await this._useSession(async e=>{var t,n,r;const{data:o,error:a}=e;if(a)throw a;return(null===(t=o.session)||void 0===t?void 0:t.access_token)||this.hasCustomAuthorizationHeader?await on(this.fetch,"GET","".concat(this.url,"/user"),{headers:this.headers,jwt:null!==(r=null===(n=o.session)||void 0===n?void 0:n.access_token)&&void 0!==r?r:void 0,xform:ln}):{data:{user:null},error:new bt}})}catch(t){if(gt(t))return function(e){return gt(e)&&"AuthSessionMissingError"===e.name}(t)&&(await this._removeSession(),await Wt(this.storage,"".concat(this.storageKey,"-code-verifier"))),{data:{user:null},error:t};throw t}}async updateUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await this._useSession(async n=>{const{data:r,error:o}=n;if(o)throw o;if(!r.session)throw new bt;const a=r.session;let s=null,i=null;"pkce"===this.flowType&&null!=e.email&&([s,i]=await Gt(this.storage,this.storageKey));const{data:l,error:c}=await on(this.fetch,"PUT","".concat(this.url,"/user"),{headers:this.headers,redirectTo:null===t||void 0===t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:s,code_challenge_method:i}),jwt:a.access_token,xform:ln});if(c)throw c;return a.user=l.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(n){if(gt(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new bt;const t=Date.now()/1e3;let n=t,r=!0,o=null;const{payload:a}=Jt(e.access_token);if(a.exp&&(n=a.exp,r=n<=t),r){const{session:t,error:n}=await this._callRefreshToken(e.refresh_token);if(n)return{data:{user:null,session:null},error:n};if(!t)return{data:{user:null,session:null},error:null};o=t}else{const{data:r,error:a}=await this._getUser(e.access_token);if(a)throw a;o={access_token:e.access_token,refresh_token:e.refresh_token,user:r.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(t){if(gt(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var n;if(!e){const{data:r,error:o}=t;if(o)throw o;e=null!==(n=r.session)&&void 0!==n?n:void 0}if(!(null===e||void 0===e?void 0:e.refresh_token))throw new bt;const{session:r,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{user:null,session:null},error:o}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(gt(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!Bt())throw new _t("No browser detected.");if(e.error||e.error_description||e.error_code)throw new _t(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if("pkce"===this.flowType)throw new jt("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new _t("Not a valid implicit grant flow url.")}if("pkce"===t){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new jt("No code detected.");const{data:t,error:n}=await this._exchangeCodeForSession(e.code);if(n)throw n;const r=new URL(window.location.href);return r.searchParams.delete("code"),window.history.replaceState(window.history.state,"",r.toString()),{data:{session:t.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:r,access_token:o,refresh_token:a,expires_in:s,expires_at:i,token_type:l}=e;if(!o||!s||!a||!l)throw new _t("No session defined in URL");const c=Math.round(Date.now()/1e3),d=parseInt(s);let u=c+d;i&&(u=parseInt(i));const h=u-c;1e3*h<=ct&&console.warn("@supabase/gotrue-js: Session as retrieved from URL expires in ".concat(h,"s, should have been closer to ").concat(d,"s"));const p=u-d;c-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,u,c):c-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,u,c);const{data:f,error:m}=await this._getUser(o);if(m)throw m;const g={provider_token:n,provider_refresh_token:r,access_token:o,expires_in:d,expires_at:u,refresh_token:a,token_type:l,user:f.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:g,redirectType:e.type},error:null}}catch(n){if(gt(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return Boolean(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Vt(this.storage,"".concat(this.storageKey,"-code-verifier"));return!(!e.code||!t)}async signOut(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scope:"global"};return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut(){let{scope:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scope:"global"};return await this._useSession(async t=>{var n;const{data:r,error:o}=t;if(o)return{error:o};const a=null===(n=r.session)||void 0===n?void 0:n.access_token;if(a){const{error:t}=await this.admin.signOut(a,e);if(t&&(!function(e){return gt(e)&&"AuthApiError"===e.name}(t)||404!==t.status&&401!==t.status&&403!==t.status))return{error:t}}return"others"!==e&&(await this._removeSession(),await Wt(this.storage,"".concat(this.storageKey,"-code-verifier"))),{error:null}})}onAuthStateChange(e){const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>{await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})})(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async t=>{var n,r;try{const{data:{session:r},error:o}=t;if(o)throw o;await(null===(n=this.stateChangeEmitters.get(e))||void 0===n?void 0:n.callback("INITIAL_SESSION",r)),this._debug("INITIAL_SESSION","callback id",e,"session",r)}catch(o){await(null===(r=this.stateChangeEmitters.get(e))||void 0===r?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null,r=null;"pkce"===this.flowType&&([n,r]=await Gt(this.storage,this.storageKey,!0));try{return await on(this.fetch,"POST","".concat(this.url,"/recover"),{body:{email:e,code_challenge:n,code_challenge_method:r,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(o){if(gt(o))return{data:null,error:o};throw o}}async getUserIdentities(){var e;try{const{data:t,error:n}=await this.getUser();if(n)throw n;return{data:{identities:null!==(e=t.user.identities)&&void 0!==e?e:[]},error:null}}catch(t){if(gt(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:n,error:r}=await this._useSession(async t=>{var n,r,o,a,s;const{data:i,error:l}=t;if(l)throw l;const c=await this._getUrlForProvider("".concat(this.url,"/user/identities/authorize"),e.provider,{redirectTo:null===(n=e.options)||void 0===n?void 0:n.redirectTo,scopes:null===(r=e.options)||void 0===r?void 0:r.scopes,queryParams:null===(o=e.options)||void 0===o?void 0:o.queryParams,skipBrowserRedirect:!0});return await on(this.fetch,"GET",c,{headers:this.headers,jwt:null!==(s=null===(a=i.session)||void 0===a?void 0:a.access_token)&&void 0!==s?s:void 0})});if(r)throw r;return Bt()&&!(null===(t=e.options)||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(null===n||void 0===n?void 0:n.url),{data:{provider:e.provider,url:null===n||void 0===n?void 0:n.url},error:null}}catch(n){if(gt(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var n,r;const{data:o,error:a}=t;if(a)throw a;return await on(this.fetch,"DELETE","".concat(this.url,"/user/identities/").concat(e.identity_id),{headers:this.headers,jwt:null!==(r=null===(n=o.session)||void 0===n?void 0:n.access_token)&&void 0!==r?r:void 0})})}catch(t){if(gt(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t="#_refreshAccessToken(".concat(e.substring(0,5),"...)");this._debug(t,"begin");try{const o=Date.now();return await(n=async n=>(n>0&&await async function(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}(200*Math.pow(2,n-1)),this._debug(t,"refreshing attempt",n),await on(this.fetch,"POST","".concat(this.url,"/token?grant_type=refresh_token"),{body:{refresh_token:e},headers:this.headers,xform:an})),r=(e,t)=>{const n=200*Math.pow(2,e);return t&&Nt(t)&&Date.now()+n-o<ct},new Promise((e,t)=>{(async()=>{for(let a=0;a<1/0;a++)try{const t=await n(a);if(!r(a,null,t))return void e(t)}catch(o){if(!r(a,o))return void t(o)}})()}))}catch(o){if(this._debug(t,"error",o),gt(o))return{data:{session:null,user:null},error:o};throw o}finally{this._debug(t,"end")}var n,r}_isValidSession(e){return"object"===typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const n=await this._getUrlForProvider("".concat(this.url,"/authorize"),e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),Bt()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const n=await Vt(this.storage,this.storageKey);if(this._debug(t,"session from storage",n),!this._isValidSession(n))return this._debug(t,"session is not valid"),void(null!==n&&await this._removeSession());const r=1e3*(null!==(e=n.expires_at)&&void 0!==e?e:1/0)-Date.now()<dt;if(this._debug(t,"session has".concat(r?"":" not"," expired with margin of ").concat(dt,"s")),r){if(this.autoRefreshToken&&n.refresh_token){const{error:e}=await this._callRefreshToken(n.refresh_token);e&&(console.error(e),Nt(e)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){return this._debug(t,"error",n),void console.error(n)}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,n;if(!e)throw new bt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r="#_callRefreshToken(".concat(e.substring(0,5),"...)");this._debug(r,"begin");try{this.refreshingDeferred=new Kt;const{data:t,error:n}=await this._refreshAccessToken(e);if(n)throw n;if(!t.session)throw new bt;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const r={session:t.session,error:null};return this.refreshingDeferred.resolve(r),r}catch(o){if(this._debug(r,"error",o),gt(o)){const e={session:null,error:o};return Nt(o)||await this._removeSession(),null===(t=this.refreshingDeferred)||void 0===t||t.resolve(e),e}throw null===(n=this.refreshingDeferred)||void 0===n||n.reject(o),o}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r="#_notifyAllSubscribers(".concat(e,")");this._debug(r,"begin",t,"broadcast = ".concat(n));try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const r=[],o=Array.from(this.stateChangeEmitters.values()).map(async n=>{try{await n.callback(e,t)}catch(o){r.push(o)}});if(await Promise.all(o),r.length>0){for(let e=0;e<r.length;e+=1)console.error(r[e]);throw r[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Ht(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Wt(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Bt()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),ct);this.autoRefreshTicker=e,e&&"object"===typeof e&&"function"===typeof e.unref?e.unref():"undefined"!==typeof Deno&&"function"===typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async e=>{const{data:{session:n}}=e;if(!n||!n.refresh_token||!n.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const r=Math.floor((1e3*n.expires_at-t)/ct);this._debug("#_autoRefreshTokenTick()","access token expires in ".concat(r," ticks, a tick lasts ").concat(ct,"ms, refresh threshold is ").concat(3," ticks")),r<=3&&await this._callRefreshToken(n.refresh_token)})}catch(e){console.error("Auto refresh tick failed with error. This is likely a transient error.",e)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(!(e.isAcquireTimeout||e instanceof vn))throw e;this._debug("auto refresh token tick lock not available")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Bt()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t="#_onVisibilityChanged(".concat(e,")");this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{"visible"===document.visibilityState?await this._recoverAndRefresh():this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")}))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,n){const r=["provider=".concat(encodeURIComponent(t))];if((null===n||void 0===n?void 0:n.redirectTo)&&r.push("redirect_to=".concat(encodeURIComponent(n.redirectTo))),(null===n||void 0===n?void 0:n.scopes)&&r.push("scopes=".concat(encodeURIComponent(n.scopes))),"pkce"===this.flowType){const[e,t]=await Gt(this.storage,this.storageKey),n=new URLSearchParams({code_challenge:"".concat(encodeURIComponent(e)),code_challenge_method:"".concat(encodeURIComponent(t))});r.push(n.toString())}if(null===n||void 0===n?void 0:n.queryParams){const e=new URLSearchParams(n.queryParams);r.push(e.toString())}return(null===n||void 0===n?void 0:n.skipBrowserRedirect)&&r.push("skip_http_redirect=".concat(n.skipBrowserRedirect)),"".concat(e,"?").concat(r.join("&"))}async _unenroll(e){try{return await this._useSession(async t=>{var n;const{data:r,error:o}=t;return o?{data:null,error:o}:await on(this.fetch,"DELETE","".concat(this.url,"/factors/").concat(e.factorId),{headers:this.headers,jwt:null===(n=null===r||void 0===r?void 0:r.session)||void 0===n?void 0:n.access_token})})}catch(t){if(gt(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var n,r;const{data:o,error:a}=t;if(a)return{data:null,error:a};const s=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:{issuer:e.issuer}),{data:i,error:l}=await on(this.fetch,"POST","".concat(this.url,"/factors"),{body:s,headers:this.headers,jwt:null===(n=null===o||void 0===o?void 0:o.session)||void 0===n?void 0:n.access_token});return l?{data:null,error:l}:("totp"===e.factorType&&(null===(r=null===i||void 0===i?void 0:i.totp)||void 0===r?void 0:r.qr_code)&&(i.totp.qr_code="data:image/svg+xml;utf-8,".concat(i.totp.qr_code)),{data:i,error:null})})}catch(t){if(gt(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:r,error:o}=t;if(o)return{data:null,error:o};const{data:a,error:s}=await on(this.fetch,"POST","".concat(this.url,"/factors/").concat(e.factorId,"/verify"),{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:null===(n=null===r||void 0===r?void 0:r.session)||void 0===n?void 0:n.access_token});return s?{data:null,error:s}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:s})})}catch(t){if(gt(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:r,error:o}=t;return o?{data:null,error:o}:await on(this.fetch,"POST","".concat(this.url,"/factors/").concat(e.factorId,"/challenge"),{body:{channel:e.channel},headers:this.headers,jwt:null===(n=null===r||void 0===r?void 0:r.session)||void 0===n?void 0:n.access_token})})}catch(t){if(gt(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const n=(null===e||void 0===e?void 0:e.factors)||[],r=n.filter(e=>"totp"===e.factor_type&&"verified"===e.status),o=n.filter(e=>"phone"===e.factor_type&&"verified"===e.status);return{data:{all:n,totp:r,phone:o},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,n;const{data:{session:r},error:o}=e;if(o)return{data:null,error:o};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=Jt(r.access_token);let s=null;a.aal&&(s=a.aal);let i=s;(null!==(n=null===(t=r.user.factors)||void 0===t?void 0:t.filter(e=>"verified"===e.status))&&void 0!==n?n:[]).length>0&&(i="aal2");return{data:{currentLevel:s,nextLevel:i,currentAuthenticationMethods:a.amr||[]},error:null}}))}async fetchJwk(e){let t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{keys:[]}).keys.find(t=>t.kid===e);if(t)return t;if(t=this.jwks.keys.find(t=>t.kid===e),t&&this.jwks_cached_at+6e5>Date.now())return t;const{data:n,error:r}=await on(this.fetch,"GET","".concat(this.url,"/.well-known/jwks.json"),{headers:this.headers});if(r)throw r;if(!n.keys||0===n.keys.length)throw new Et("JWKS is empty");if(this.jwks=n,this.jwks_cached_at=Date.now(),t=n.keys.find(t=>t.kid===e),!t)throw new Et("No matching signing key found in JWKS");return t}async getClaims(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{keys:[]};try{let n=e;if(!n){const{data:e,error:t}=await this.getSession();if(t||!e.session)return{data:null,error:t};n=e.session.access_token}const{header:r,payload:o,signature:a,raw:{header:s,payload:i}}=Jt(n);if(function(e){if(!e)throw new Error("Missing exp claim");if(e<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(o.exp),!r.kid||"HS256"===r.alg||!("crypto"in globalThis)||!("subtle"in globalThis.crypto)){const{error:e}=await this.getUser(n);if(e)throw e;return{data:{claims:o,header:r,signature:a},error:null}}const l=function(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(r.alg),c=await this.fetchJwk(r.kid,t),d=await crypto.subtle.importKey("jwk",c,l,!0,["verify"]);if(!await crypto.subtle.verify(l,d,a,function(e){const t=[];return Ft(e,e=>t.push(e)),new Uint8Array(t)}("".concat(s,".").concat(i))))throw new Et("Invalid JWT signature");return{data:{claims:o,header:r,signature:a},error:null}}catch(n){if(gt(n))return{data:null,error:n};throw n}}}_n.nextInstanceID=0;const jn=_n;class Sn extends jn{constructor(e){super(e)}}var Nn=function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function s(e){try{l(r.next(e))}catch(t){a(t)}}function i(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,i)}l((r=r.apply(e,t||[])).next())})};class Cn{constructor(e,t,n){var r,o,a;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const s=(i=e).endsWith("/")?i:i+"/";var i;const l=new URL(s);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c="sb-".concat(l.hostname.split(".")[0],"-auth-token"),d=function(e,t){var n,r;const{db:o,auth:a,realtime:s,global:i}=e,{db:l,auth:c,realtime:d,global:u}=t,h={db:Object.assign(Object.assign({},l),o),auth:Object.assign(Object.assign({},c),a),realtime:Object.assign(Object.assign({},d),s),global:Object.assign(Object.assign(Object.assign({},u),i),{headers:Object.assign(Object.assign({},null!==(n=null===u||void 0===u?void 0:u.headers)&&void 0!==n?n:{}),null!==(r=null===i||void 0===i?void 0:i.headers)&&void 0!==r?r:{})}),accessToken:()=>it(this,void 0,void 0,function*(){return""})};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}(null!==n&&void 0!==n?n:{},{db:et,realtime:nt,auth:Object.assign(Object.assign({},tt),{storageKey:c}),global:Ze});this.storageKey=null!==(r=d.auth.storageKey)&&void 0!==r?r:"",this.headers=null!==(o=d.global.headers)&&void 0!==o?o:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw new Error("@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.".concat(String(t)," is not possible"))}})):this.auth=this._initSupabaseAuthClient(null!==(a=d.auth)&&void 0!==a?a:{},this.headers,d.global.fetch),this.fetch=st(t,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new Q(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),d.accessToken||this._listenForAuthEvents()}get functions(){return new J(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Ye(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.rest.rpc(e,t,n)}channel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return Nn(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return null!==(t=null===(e=n.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:null})}_initSupabaseAuthClient(e,t,n){let{autoRefreshToken:r,persistSession:o,detectSessionInUrl:a,storage:s,storageKey:i,flowType:l,lock:c,debug:d}=e;const u={Authorization:"Bearer ".concat(this.supabaseKey),apikey:"".concat(this.supabaseKey)};return new Sn({url:this.authUrl.href,headers:Object.assign(Object.assign({},u),t),storageKey:i,autoRefreshToken:r,persistSession:o,detectSessionInUrl:a,storage:s,flowType:l,lock:c,debug:d,fetch:n,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new Pe(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null===e||void 0===e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",null===t||void 0===t?void 0:t.access_token)})}_handleTokenChanged(e,t,n){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===n?"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):this.changedAccessToken=n}}const En=((e,t,n)=>new Cn(e,t,n))("https://xajedwcurzdgzrlnrcqi.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InhhamVkd2N1cnpkZ3pybG5yY3FpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDY5ODYwMTgsImV4cCI6MjA2MjU2MjAxOH0.lXFmMWHLpwGVZo2VWbtmAZFaiPnLAm1sZkBXpik2mpY"),Pn=async(e,t)=>{const{data:n,error:r}=await En.auth.signInWithPassword({email:e,password:t});return{data:n,error:r}},Tn=p("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);var Ln=n(579);const Rn=[{value:"Lead",label:"Lead",color:"#9CA3AF"},{value:"Contacted",label:"Contacted",color:"#3B82F6"},{value:"Qualified",label:"Qualified",color:"#8B5CF6"},{value:"Proposal Sent",label:"Proposal Sent",color:"#F59E0B"},{value:"Closed Won",label:"Closed Won",color:"#10B981"},{value:"Closed Lost",label:"Closed Lost",color:"#EF4444"},{value:"Nurture",label:"Nurture",color:"#06B6D4"}],On=e=>{var t;let{brandId:n,onGoToInboxLead:o=()=>{}}=e;const[a,s]=(0,r.useState)([]),[i,l]=(0,r.useState)(!0),[d,u]=(0,r.useState)(null),[h,p]=(0,r.useState)(""),[g,v]=(0,r.useState)(null),[b,w]=(0,r.useState)(!1),[k,j]=(0,r.useState)({}),[N,P]=(0,r.useState)(null),[T,L]=(0,r.useState)(!1),[O,A]=(0,r.useState)({field:"created_at",dir:"desc"}),[I,D]=(0,r.useState)(!1);(0,r.useEffect)(()=>{if(d){const e=setTimeout(()=>{u(null)},4e3);return()=>clearTimeout(e)}},[d]);const[B,z]=(0,r.useState)(()=>{const e=localStorage.getItem("inbox_manager_theme");return!e||"dark"===e}),U=(e=>e?{primaryBg:"#1A1C1A",secondaryBg:"rgba(26, 28, 26, 0.8)",tertiaryBg:"rgba(255, 255, 255, 0.05)",textPrimary:"#FFFFFF",textSecondary:"#D1D5DB",textMuted:"#9CA3AF",accent:"#54FCFF",border:"rgba(255, 255, 255, 0.1)",borderStrong:"rgba(255, 255, 255, 0.2)",success:"#10B981",warning:"#F59E0B",error:"#EF4444"}:{primaryBg:"#F8FAFC",secondaryBg:"#FFFFFF",tertiaryBg:"#F1F5F9",textPrimary:"#0F172A",textSecondary:"#334155",textMuted:"#64748B",accent:"#2563EB",border:"rgba(0, 0, 0, 0.15)",borderStrong:"rgba(0, 0, 0, 0.25)",success:"#059669",warning:"#D97706",error:"#DC2626"})(B);(0,r.useEffect)(()=>{const e=e=>{I&&!e.target.closest(".stage-dropdown")&&D(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[I]),(0,r.useEffect)(()=>{const e=e=>{if("inbox_manager_theme"===e.key){const t="dark"===e.newValue;z(t)}};window.addEventListener("storage",e);const t=()=>{const e=localStorage.getItem("inbox_manager_theme");z(!e||"dark"===e)};return window.addEventListener("themeChanged",t),()=>{window.removeEventListener("storage",e),window.removeEventListener("themeChanged",t)}},[]),(0,r.useEffect)(()=>{n&&(async()=>{l(!0);const{data:e,error:t}=await En.from("retention_harbor").select("*").eq("brand_id",n).eq("status","CRM").order(O.field,{ascending:"asc"===O.dir});t?u({type:"error",message:"Error fetching CRM leads: "+t.message}):s(e),l(!1)})()},[n,O]);const q=(0,r.useMemo)(()=>{if(!a.length)return null;const e=a.length,t=a.filter(e=>e.closed).length;return{totalLeads:e,totalClosed:t,totalDealSize:a.reduce((e,t)=>e+(t.deal_size||0),0),totalCalls:a.filter(e=>e.call_booked).length,winRate:e?t/e*100:0}},[a]),H=(0,r.useMemo)(()=>{if(!h)return a;const e=h.toLowerCase();return a.filter(t=>t.first_name&&t.first_name.toLowerCase().includes(e)||t.last_name&&t.last_name.toLowerCase().includes(e)||t.email&&t.email.toLowerCase().includes(e))},[a,h]),V=e=>{A(t=>({field:e,dir:t.field===e&&"asc"===t.dir?"desc":"asc"}))},W=()=>{v(null),w(!1),L(!1),j({})},K=(e,t)=>{j(n=>c(c({},n),{},{[e]:t}))};return(0,Ln.jsxs)("div",{className:"p-8 min-h-screen relative",style:{backgroundColor:U.primaryBg,color:U.textPrimary},children:[(0,Ln.jsxs)("h2",{className:"text-3xl font-bold mb-6 flex items-center gap-3",style:{color:U.textPrimary},children:[(0,Ln.jsx)(x,{className:"w-7 h-7",style:{color:U.accent}})," CRM Dashboard"]}),(0,Ln.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-6 mb-8",children:[(0,Ln.jsxs)("div",{className:"rounded-2xl shadow-lg p-6 flex flex-col items-center transition-colors duration-300",style:{backgroundColor:U.secondaryBg,border:"1px solid ".concat(U.border)},children:[(0,Ln.jsx)(E,{className:"w-7 h-7 mb-2",style:{color:U.accent}}),(0,Ln.jsx)("div",{className:"text-2xl font-bold",style:{color:U.textPrimary},children:q?q.totalLeads:0}),(0,Ln.jsx)("div",{className:"text-sm",style:{color:U.textMuted},children:"Total Leads"})]}),(0,Ln.jsxs)("div",{className:"rounded-2xl shadow-lg p-6 flex flex-col items-center transition-colors duration-300",style:{backgroundColor:U.secondaryBg,border:"1px solid ".concat(U.border)},children:[(0,Ln.jsx)(f,{className:"w-7 h-7 mb-2",style:{color:U.success}}),(0,Ln.jsx)("div",{className:"text-2xl font-bold",style:{color:U.textPrimary},children:q?q.totalClosed:0}),(0,Ln.jsx)("div",{className:"text-sm",style:{color:U.textMuted},children:"Total Closed"})]}),(0,Ln.jsxs)("div",{className:"rounded-2xl shadow-lg p-6 flex flex-col items-center transition-colors duration-300",style:{backgroundColor:U.secondaryBg,border:"1px solid ".concat(U.border)},children:[(0,Ln.jsx)(Tn,{className:"w-7 h-7 mb-2",style:{color:U.warning}}),(0,Ln.jsxs)("div",{className:"text-2xl font-bold",style:{color:U.textPrimary},children:["$",q?q.totalDealSize.toLocaleString():0]}),(0,Ln.jsx)("div",{className:"text-sm",style:{color:U.textMuted},children:"Total Deal Size"})]}),(0,Ln.jsxs)("div",{className:"rounded-2xl shadow-lg p-6 flex flex-col items-center transition-colors duration-300",style:{backgroundColor:U.secondaryBg,border:"1px solid ".concat(U.border)},children:[(0,Ln.jsx)(F,{className:"w-7 h-7 mb-2",style:{color:U.accent}}),(0,Ln.jsx)("div",{className:"text-2xl font-bold",style:{color:U.textPrimary},children:q?q.totalCalls:0}),(0,Ln.jsx)("div",{className:"text-sm",style:{color:U.textMuted},children:"Calls Booked"})]}),(0,Ln.jsxs)("div",{className:"rounded-2xl shadow-lg p-6 flex flex-col items-center transition-colors duration-300",style:{backgroundColor:U.secondaryBg,border:"1px solid ".concat(U.border)},children:[(0,Ln.jsx)(x,{className:"w-7 h-7 mb-2",style:{color:U.accent}}),(0,Ln.jsxs)("div",{className:"text-2xl font-bold",style:{color:U.textPrimary},children:[q?q.winRate.toFixed(1):0,"%"]}),(0,Ln.jsx)("div",{className:"text-sm",style:{color:U.textMuted},children:"Win Rate"})]})]}),(0,Ln.jsx)("div",{className:"flex items-center mb-6 max-w-md",children:(0,Ln.jsxs)("div",{className:"relative w-full",children:[(0,Ln.jsx)("input",{type:"text",className:"w-full rounded-lg px-4 py-2 pl-10 focus:outline-none focus:ring-2 transition-all",style:{backgroundColor:U.secondaryBg,color:U.textPrimary,border:"1px solid ".concat(U.border),focusRing:"2px solid ".concat(U.accent)},placeholder:"Search by name or email...",value:h,onChange:e=>p(e.target.value)}),(0,Ln.jsx)(R,{className:"absolute left-3 top-2.5 w-5 h-5",style:{color:U.textMuted}})]})}),(0,Ln.jsx)("div",{className:"overflow-x-auto rounded-2xl shadow-lg transition-colors duration-300",style:{backgroundColor:U.secondaryBg,border:"1px solid ".concat(U.border)},children:(0,Ln.jsxs)("table",{className:"min-w-full",style:{color:U.textPrimary},children:[(0,Ln.jsx)("thead",{children:(0,Ln.jsxs)("tr",{style:{backgroundColor:U.tertiaryBg},children:[(0,Ln.jsxs)("th",{className:"px-6 py-4 text-left cursor-pointer transition-colors duration-300 font-semibold",style:{color:U.textSecondary},onClick:()=>V("first_name"),children:["Name ","first_name"===O.field&&("asc"===O.dir?"\u25b2":"\u25bc")]}),(0,Ln.jsxs)("th",{className:"px-4 py-4 text-center cursor-pointer transition-colors duration-300 font-semibold",style:{color:U.textSecondary},onClick:()=>V("stage"),children:["Stage ","stage"===O.field&&("asc"===O.dir?"\u25b2":"\u25bc")]}),(0,Ln.jsxs)("th",{className:"px-4 py-4 text-right cursor-pointer transition-colors duration-300 font-semibold",style:{color:U.textSecondary},onClick:()=>V("deal_size"),children:["Deal Size ","deal_size"===O.field&&("asc"===O.dir?"\u25b2":"\u25bc")]}),(0,Ln.jsxs)("th",{className:"px-4 py-4 text-center cursor-pointer transition-colors duration-300 font-semibold",style:{color:U.textSecondary},onClick:()=>V("call_booked"),children:["Call Booked ","call_booked"===O.field&&("asc"===O.dir?"\u25b2":"\u25bc")]}),(0,Ln.jsxs)("th",{className:"px-4 py-4 text-center cursor-pointer transition-colors duration-300 font-semibold",style:{color:U.textSecondary},onClick:()=>V("closed"),children:["Closed ","closed"===O.field&&("asc"===O.dir?"\u25b2":"\u25bc")]})]})}),(0,Ln.jsx)("tbody",{children:i?(0,Ln.jsx)("tr",{children:(0,Ln.jsx)("td",{colSpan:5,className:"px-6 py-12 text-center text-lg",style:{color:U.textSecondary},children:(0,Ln.jsxs)("div",{className:"flex items-center justify-center gap-3",children:[(0,Ln.jsx)(S,{className:"animate-spin w-6 h-6"}),(0,Ln.jsx)("span",{children:"Loading CRM leads..."})]})})}):0===H.length?(0,Ln.jsx)("tr",{children:(0,Ln.jsx)("td",{colSpan:5,className:"px-6 py-12 text-center text-lg",style:{color:U.textSecondary},children:"No CRM leads found."})}):H.map(e=>{var t;return(0,Ln.jsxs)("tr",{className:"border-t transition-colors cursor-pointer hover:opacity-80",style:{borderColor:U.border},onClick:()=>(e=>{v(e),j({stage:e.stage||"Lead",call_booked:!!e.call_booked,deal_size:e.deal_size||0,closed:!!e.closed,notes:e.notes||""}),w(!0),L(!1)})(e),children:[(0,Ln.jsx)("td",{className:"px-6 py-4 font-medium",children:(0,Ln.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Ln.jsx)(m,{className:"w-4 h-4 shrink-0",style:{color:U.accent}}),(0,Ln.jsxs)("span",{style:{color:U.textPrimary},children:[e.first_name," ",e.last_name]})]})}),(0,Ln.jsx)("td",{className:"px-4 py-4 text-center",children:(()=>{const t=Rn.find(t=>t.value===e.stage);return(0,Ln.jsx)("span",{className:"inline-block px-3 py-1 rounded-full text-xs font-semibold",style:{backgroundColor:"".concat((null===t||void 0===t?void 0:t.color)||U.accent,"20"),color:(null===t||void 0===t?void 0:t.color)||U.accent,border:"1px solid ".concat((null===t||void 0===t?void 0:t.color)||U.accent,"30")},children:e.stage})})()}),(0,Ln.jsxs)("td",{className:"px-4 py-4 text-right font-medium",style:{color:U.textPrimary},children:["$",(null===(t=e.deal_size)||void 0===t?void 0:t.toLocaleString())||0]}),(0,Ln.jsx)("td",{className:"px-4 py-4 text-center",children:(0,Ln.jsx)("span",{className:"inline-flex items-center justify-center w-12 h-6 rounded-full text-xs font-semibold",style:{backgroundColor:e.call_booked?"".concat(U.success,"20"):"".concat(U.textMuted,"20"),color:e.call_booked?U.success:U.textMuted,border:"1px solid ".concat(e.call_booked?U.success:U.textMuted,"30")},children:e.call_booked?"Yes":"No"})}),(0,Ln.jsx)("td",{className:"px-4 py-4 text-center",children:(0,Ln.jsx)("span",{className:"inline-flex items-center justify-center w-12 h-6 rounded-full text-xs font-semibold",style:{backgroundColor:e.closed?"".concat(U.success,"20"):"".concat(U.textMuted,"20"),color:e.closed?U.success:U.textMuted,border:"1px solid ".concat(e.closed?U.success:U.textMuted,"30")},children:e.closed?"Yes":"No"})})]},e.id)})})]})}),b&&g&&(0,Ln.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-end z-50",onClick:e=>{e.target===e.currentTarget&&W()},children:(0,Ln.jsxs)("div",{className:"w-full max-w-2xl h-full flex flex-col relative overflow-y-auto",style:{backgroundColor:B?"#1A1C1A":"#FFFFFF",borderRadius:"12px",border:"1px solid ".concat(U.border),margin:"8px",marginRight:"0",boxShadow:"0 8px 32px 0 rgba(0,0,0,0.25)",minHeight:0},children:[(0,Ln.jsx)("div",{className:"p-8 transition-colors duration-300",style:{backgroundColor:U.tertiaryBg,borderRadius:"12px 12px 0 0",borderBottom:"1px solid ".concat(U.border)},children:(0,Ln.jsxs)("div",{className:"flex justify-between items-start",children:[(0,Ln.jsxs)("div",{children:[(0,Ln.jsxs)("h2",{className:"text-3xl font-bold transition-colors duration-300",style:{color:U.textPrimary},children:[g.first_name," ",g.last_name]}),(0,Ln.jsx)("p",{className:"mt-2 font-medium transition-colors duration-300",style:{color:U.textSecondary},children:g.email}),g.phone?(0,Ln.jsxs)("p",{className:"text-sm mt-2 flex items-center gap-2 transition-colors duration-300",style:{color:U.accent},children:[(0,Ln.jsx)(F,{className:"w-3 h-3"}),(0,Ln.jsx)("span",{className:"font-medium",children:g.phone})]}):(0,Ln.jsxs)("p",{className:"text-sm mt-2 flex items-center gap-2 transition-colors duration-300",style:{color:U.textMuted},children:[(0,Ln.jsx)(F,{className:"w-3 h-3"}),(0,Ln.jsx)("span",{children:"No phone number found"})]}),g.website&&(0,Ln.jsx)("p",{className:"text-sm mt-2",children:(0,Ln.jsxs)("a",{href:"https://".concat(g.website),target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 hover:opacity-80 transition-colors duration-300",style:{color:U.accent},children:[g.website,(0,Ln.jsx)(M,{className:"w-3 h-3"})]})})]}),(0,Ln.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Ln.jsx)("button",{onClick:()=>o(g.id),className:"px-3 py-2 rounded-lg transition-colors duration-300 flex items-center gap-2 text-sm bg-blue-600 text-white hover:bg-blue-700",style:{marginRight:"8px"},title:"Go to lead in Inbox",children:"Go to lead in Inbox"}),(0,Ln.jsx)("button",{onClick:async()=>{if(g){s(e=>e.filter(e=>e.id!==g.id)),W();try{const{error:e}=await En.from("retention_harbor").update({status:"INBOX"}).eq("id",g.id);if(e)throw e;u({type:"success",message:"Lead removed from CRM!"})}catch(e){s(e=>[...e,g]),u({type:"error",message:"Error removing lead from CRM: "+e.message})}}},className:"px-3 py-2 rounded-lg transition-colors duration-300 flex items-center gap-2 text-sm bg-red-600 text-white hover:bg-red-700",style:{marginRight:"8px"},title:"Remove from CRM",children:"Remove from CRM"}),(0,Ln.jsx)("button",{onClick:W,className:"p-2 rounded-lg transition-colors duration-300 hover:opacity-80",style:{border:"1px solid ".concat(U.border),backgroundColor:U.tertiaryBg,color:U.textMuted},children:(0,Ln.jsx)(_,{className:"w-5 h-5"})})]})]})}),(0,Ln.jsx)("div",{className:"flex-1 overflow-y-auto p-8 transition-colors duration-300",style:{scrollbarWidth:"thin",scrollbarColor:"".concat(U.accent," ").concat(U.primaryBg,"50")},children:(0,Ln.jsxs)("div",{className:"space-y-8",children:[(0,Ln.jsx)("div",{className:"mb-6 p-4 rounded-lg transition-colors duration-300",style:{backgroundColor:U.tertiaryBg,border:"1px solid ".concat(U.border)},children:(0,Ln.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,Ln.jsxs)("div",{className:"flex items-center gap-6",children:[(0,Ln.jsxs)("div",{children:[(0,Ln.jsx)("span",{className:"transition-colors duration-300",style:{color:U.textMuted},children:"Last Reply"}),(0,Ln.jsx)("p",{className:"font-medium mt-1 transition-colors duration-300",style:{color:U.textPrimary},children:g.last_reply||"No replies yet"})]}),(0,Ln.jsxs)("div",{children:[(0,Ln.jsx)("span",{className:"transition-colors duration-300",style:{color:U.textMuted},children:"Last Followup"}),(0,Ln.jsx)("p",{className:"font-medium mt-1 transition-colors duration-300",style:{color:U.textPrimary},children:g.last_followup||"N/A"})]}),(0,Ln.jsxs)("div",{children:[(0,Ln.jsx)("span",{className:"transition-colors duration-300",style:{color:U.textMuted},children:"Avg Response"}),(0,Ln.jsx)("p",{className:"font-medium mt-1 transition-colors duration-300",style:{color:U.textPrimary},children:g.avg_response||"N/A"})]})]}),(0,Ln.jsxs)("div",{className:"px-3 py-1 rounded-full text-sm transition-colors duration-300",style:{backgroundColor:"".concat(U.accent,"15"),border:"1px solid ".concat(U.accent,"20")},children:[(0,Ln.jsx)("span",{className:"font-medium transition-colors duration-300",style:{color:U.textPrimary},children:g.replies_count||0}),(0,Ln.jsx)("span",{className:"transition-colors duration-300",style:{color:U.textMuted},children:" replies"})]})]})}),(0,Ln.jsxs)("div",{className:"rounded-2xl p-6 shadow-lg transition-colors duration-300",style:{backgroundColor:U.tertiaryBg,border:"1px solid ".concat(U.border)},children:[(0,Ln.jsxs)("div",{className:"grid grid-cols-2 gap-8 mb-8",children:[(0,Ln.jsxs)("div",{className:"relative",children:[(0,Ln.jsx)("label",{className:"block text-lg font-medium mb-2",style:{color:U.textSecondary},children:"Stage"}),(0,Ln.jsxs)("div",{className:"relative stage-dropdown",children:[(0,Ln.jsxs)("button",{type:"button",onClick:()=>D(!I),className:"w-full rounded-xl px-4 py-3 text-xl font-semibold transition-colors duration-300 flex items-center justify-between",style:{backgroundColor:U.primaryBg,color:U.textPrimary,border:"1px solid ".concat(U.border)},children:[(0,Ln.jsx)("span",{children:null===(t=Rn.find(e=>e.value===k.stage))||void 0===t?void 0:t.label}),(0,Ln.jsx)(y,{className:"w-6 h-6 transition-transform duration-200 ".concat(I?"rotate-180":""),style:{color:U.textMuted}})]}),I&&(0,Ln.jsx)("div",{className:"absolute top-full left-0 right-0 mt-2 rounded-xl shadow-xl z-50 overflow-hidden",style:{backgroundColor:U.primaryBg,border:"1px solid ".concat(U.border)},children:Rn.map(e=>(0,Ln.jsxs)("button",{type:"button",onClick:()=>{K("stage",e.value),D(!1)},className:"w-full px-4 py-4 text-left transition-all duration-200 flex items-center justify-between hover:opacity-80",style:{backgroundColor:k.stage===e.value?"".concat(e.color,"20"):"transparent",borderBottom:"1px solid ".concat(U.border)},children:[(0,Ln.jsx)("span",{className:"font-semibold text-lg",style:{color:e.color},children:e.label}),k.stage===e.value&&(0,Ln.jsx)(f,{className:"w-5 h-5 ml-auto",style:{color:e.color}})]},e.value))})]})]}),(0,Ln.jsxs)("div",{className:"flex items-center gap-4 mt-8",children:[(0,Ln.jsx)("input",{type:"checkbox",id:"call_booked",checked:!!k.call_booked,onChange:e=>K("call_booked",e.target.checked),className:"w-7 h-7 accent-accent"}),(0,Ln.jsx)("label",{htmlFor:"call_booked",className:"text-lg font-medium",style:{color:U.textSecondary},children:"Call Booked"})]}),(0,Ln.jsxs)("div",{children:[(0,Ln.jsx)("label",{className:"block text-lg font-medium mb-2",style:{color:U.textSecondary},children:"Deal Size"}),(0,Ln.jsx)("input",{type:"number",className:"w-full rounded-xl px-4 py-3 text-xl font-semibold transition-colors duration-300",style:{backgroundColor:U.primaryBg,color:U.textPrimary,border:"1px solid ".concat(U.border)},value:k.deal_size,onChange:e=>K("deal_size",Number(e.target.value))})]}),(0,Ln.jsxs)("div",{className:"flex items-center gap-4 mt-8",children:[(0,Ln.jsx)("input",{type:"checkbox",id:"closed",checked:!!k.closed,onChange:e=>K("closed",e.target.checked),className:"w-7 h-7 accent-accent"}),(0,Ln.jsx)("label",{htmlFor:"closed",className:"text-lg font-medium",style:{color:U.textSecondary},children:"Closed"})]})]}),(0,Ln.jsxs)("div",{className:"mb-10",children:[(0,Ln.jsx)("label",{className:"block text-lg font-medium mb-2",style:{color:U.textSecondary},children:"Notes"}),(0,Ln.jsx)("textarea",{className:"w-full rounded-xl px-4 py-3 text-xl min-h-[200px] transition-colors duration-300",style:{backgroundColor:U.primaryBg,color:U.textPrimary,border:"1px solid ".concat(U.border)},value:k.notes,onChange:e=>K("notes",e.target.value)})]}),(0,Ln.jsx)("div",{className:"flex gap-4 mt-auto",children:(0,Ln.jsx)("button",{className:"px-8 py-4 rounded-xl font-bold shadow-lg transition-colors duration-300",style:{backgroundColor:U.success,color:"#fff",fontSize:"1.25rem"},onClick:async()=>{if(g){P(g.id);try{const{error:e}=await En.from("retention_harbor").update(k).eq("id",g.id);if(e)throw e;s(e=>e.map(e=>e.id===g.id?c(c({},e),k):e)),u({type:"success",message:"Lead updated!"}),L(!1)}catch(e){u({type:"error",message:"Error saving lead: "+e.message})}finally{P(null)}}},disabled:N===g.id,children:N===g.id?(0,Ln.jsx)(S,{className:"animate-spin w-7 h-7"}):"Save Changes"})})]})]})})]})}),d&&(0,Ln.jsx)("div",{className:"fixed top-4 right-4 z-50",children:(0,Ln.jsxs)("div",{className:"flex items-center gap-2 px-4 py-3 rounded-lg shadow-lg cursor-pointer transition-all transform hover:scale-102 min-w-[200px]",style:{backgroundColor:"success"===d.type?"".concat(U.success,"20"):"".concat(U.error,"20"),border:"1px solid ".concat("success"===d.type?U.success:U.error),backdropFilter:"blur(8px)",animation:"slideIn 0.2s ease-out"},onClick:()=>u(null),children:["success"===d.type?(0,Ln.jsx)(f,{className:"w-5 h-5 shrink-0",style:{color:U.success}}):(0,Ln.jsx)(C,{className:"w-5 h-5 shrink-0",style:{color:U.error}}),(0,Ln.jsx)("span",{className:"text-sm font-medium flex-1 transition-colors duration-300",style:{color:U.textPrimary},children:d.message}),(0,Ln.jsx)("button",{onClick:e=>{e.stopPropagation(),u(null)},className:"ml-2 shrink-0 hover:opacity-80 transition-colors duration-300",style:{color:U.textMuted},children:(0,Ln.jsx)(_,{className:"w-4 h-4"})})]})}),(0,Ln.jsx)("style",{jsx:!0,global:!0,children:"\n        @keyframes slideIn {\n          from {\n            transform: translateX(100%);\n            opacity: 0;\n          }\n          to {\n            transform: translateX(0);\n            opacity: 1;\n          }\n        }\n      "})]})},An=p("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),In=p("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Fn=p("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),Mn=p("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Dn=p("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),Bn=e=>{let{user:t,brandId:n,selectionMode:o=!1,onTemplateSelect:a=null,onClose:s=null}=e;const[i,l]=(0,r.useState)([]),[d,u]=(0,r.useState)(!0),[h,p]=(0,r.useState)(null),[f,m]=(0,r.useState)(""),[g,y]=(0,r.useState)(!1),[x,b]=(0,r.useState)(null),[k,j]=(0,r.useState)(!1),[S,C]=(0,r.useState)(!1),[E,P]=(0,r.useState)(null),[T,L]=(0,r.useState)(!1),[O,I]=(0,r.useState)(null),[F,M]=(0,r.useState)({name:"",description:"",content:"",html_content:""}),[D,B]=(0,r.useState)(()=>{const e=localStorage.getItem("inbox_manager_theme");return!e||"dark"===e}),z=D?{primaryBg:"#1A1C1A",secondaryBg:"rgba(26, 28, 26, 0.8)",tertiaryBg:"rgba(255, 255, 255, 0.05)",textPrimary:"#FFFFFF",textSecondary:"#D1D5DB",textMuted:"#9CA3AF",accent:"#54FCFF",border:"rgba(255, 255, 255, 0.1)",borderStrong:"rgba(255, 255, 255, 0.2)",success:"#10B981",warning:"#F59E0B",error:"#EF4444"}:{primaryBg:"#F8FAFC",secondaryBg:"#FFFFFF",tertiaryBg:"#F1F5F9",textPrimary:"#0F172A",textSecondary:"#334155",textMuted:"#64748B",accent:"#2563EB",border:"rgba(0, 0, 0, 0.15)",borderStrong:"rgba(0, 0, 0, 0.25)",success:"#059669",warning:"#D97706",error:"#DC2626"},U=async()=>{try{if(u(!0),p(null),!n)return;const{data:e,error:t}=await En.from("email_templates").select("*").eq("brand_id",n).eq("is_active",!0).order("updated_at",{ascending:!1});if(t)throw t;l(e||[])}catch(e){console.error("Error fetching templates:",e),p(e.message)}finally{u(!1)}};(0,r.useEffect)(()=>{n&&U()},[n]);const q=(0,r.useMemo)(()=>{if(!f.trim())return i;const e=f.toLowerCase();return i.filter(t=>{var n;return t.name.toLowerCase().includes(e)||(null===(n=t.description)||void 0===n?void 0:n.toLowerCase().includes(e))||t.content.toLowerCase().includes(e)})},[i,f]),H=(e,t)=>{M(n=>c(c({},n),{},{[e]:t}))},V=e=>{const t=e.target.innerHTML,n=(e=>{if(!e)return"";const t=document.createElement("div");t.innerHTML=e;const n=["onload","onerror","onclick","onmouseover","onfocus","onblur","onchange","onsubmit"];return["script","object","embed","iframe","form"].forEach(e=>{t.querySelectorAll(e).forEach(e=>e.remove())}),t.querySelectorAll("*").forEach(e=>{n.forEach(t=>{e.hasAttribute(t)&&e.removeAttribute(t)}),["href","src"].forEach(t=>{const n=e.getAttribute(t);n&&n.toLowerCase().startsWith("javascript:")&&e.removeAttribute(t)})}),t.innerHTML})(t),r=e.target.textContent||e.target.innerText;M(e=>c(c({},e),{},{content:r,html_content:n})),t!==n&&(e.target.innerHTML=n,console.warn("HTML content was sanitized for security"))},W=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;document.execCommand(e,!1,t);const n=document.querySelector("[contenteditable]");n&&V({target:n})},K=()=>{b(null),M({name:"",description:"",content:"",html_content:""}),y(!0)},J=e=>{b(e),M({name:e.name,description:e.description||"",content:e.content,html_content:e.html_content||""}),y(!0),setTimeout(()=>{const t=document.querySelector("[contenteditable]");t&&e.html_content&&(t.innerHTML=e.html_content)},100)},$=()=>{y(!1),b(null),M({name:"",description:"",content:"",html_content:""}),p(null)};return d?(0,Ln.jsx)("div",{className:"flex h-full flex-col items-center justify-center",style:{backgroundColor:z.primaryBg},children:(0,Ln.jsxs)("div",{className:"text-center p-8 rounded-2xl shadow-xl",style:{backgroundColor:z.secondaryBg,border:"1px solid ".concat(z.border)},children:[(0,Ln.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 mx-auto mb-4",style:{borderColor:z.accent}}),(0,Ln.jsx)("p",{className:"transition-colors duration-300",style:{color:z.textPrimary},children:"Loading templates..."})]})}):h&&!g?(0,Ln.jsx)("div",{className:"flex h-full flex-col items-center justify-center",style:{backgroundColor:z.primaryBg},children:(0,Ln.jsxs)("div",{className:"text-center",children:[(0,Ln.jsxs)("p",{className:"font-medium mb-6 transition-colors duration-300",style:{color:z.error},children:["Error loading templates: ",h]}),(0,Ln.jsx)("button",{onClick:U,className:"px-4 py-2 rounded-lg hover:opacity-80 transition-colors",style:{backgroundColor:z.accent,color:D?"#1A1C1A":"#FFFFFF",border:"1px solid ".concat(z.border)},children:"Retry"})]})}):(0,Ln.jsxs)(Ln.Fragment,{children:[(0,Ln.jsx)("style",{jsx:!0,global:!0,children:"\n        /* Rich text editor styling for templates */\n        div[contenteditable] ul {\n          margin: 8px 0;\n          padding-left: 20px;\n          list-style-type: disc;\n        }\n\n        div[contenteditable] ul li {\n          margin: 2px 0;\n          line-height: 1.5;\n        }\n\n        div[contenteditable] ol {\n          margin: 8px 0;\n          padding-left: 20px;\n          list-style-type: decimal;\n        }\n\n        div[contenteditable] ol li {\n          margin: 2px 0;\n          line-height: 1.5;\n        }\n\n        /* Placeholder text for contenteditable */\n        div[contenteditable]:empty:before {\n          content: attr(data-placeholder);\n          color: #9CA3AF;\n          font-style: italic;\n          pointer-events: none;\n          white-space: pre-line;\n        }\n      "}),(0,Ln.jsxs)("div",{className:"flex h-full overflow-hidden transition-colors duration-300",style:{backgroundColor:z.primaryBg},children:[(0,Ln.jsxs)("div",{className:"".concat(o?"w-full":"w-1/2"," flex flex-col shadow-lg relative z-50 transition-colors duration-300"),style:{backgroundColor:z.secondaryBg,borderRadius:"12px",margin:"8px",marginRight:o?"8px":"4px",border:"1px solid ".concat(z.border)},children:[(0,Ln.jsxs)("div",{className:"p-6 transition-colors duration-300",style:{backgroundColor:z.tertiaryBg,borderRadius:"12px 12px 0 0",borderBottom:"1px solid ".concat(z.border)},children:[(0,Ln.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Ln.jsx)("h1",{className:"text-2xl font-bold transition-colors duration-300",style:{color:z.textPrimary},children:o?"Select Template":"Email Templates"}),(0,Ln.jsx)("div",{className:"flex items-center gap-2",children:o?(0,Ln.jsxs)("button",{onClick:s,className:"px-4 py-2 rounded-lg hover:opacity-80 transition-colors flex items-center gap-2",style:{backgroundColor:z.tertiaryBg,color:z.textPrimary,border:"1px solid ".concat(z.border)},children:[(0,Ln.jsx)(_,{className:"w-4 h-4"}),"Cancel"]}):(0,Ln.jsxs)("button",{onClick:K,className:"px-4 py-2 rounded-lg hover:opacity-80 transition-colors flex items-center gap-2",style:{backgroundColor:z.accent,color:D?"#1A1C1A":"#FFFFFF"},children:[(0,Ln.jsx)(An,{className:"w-4 h-4"}),"New Template"]})})]}),(0,Ln.jsxs)("div",{className:"relative mb-4",children:[(0,Ln.jsx)(R,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 transition-colors duration-300",style:{color:z.accent}}),(0,Ln.jsx)("input",{type:"text",placeholder:"Search templates...",value:f,onChange:e=>m(e.target.value),className:"w-full pl-10 pr-4 py-2 rounded-lg focus:ring-2 transition-colors duration-300",style:{backgroundColor:z.tertiaryBg,border:"1px solid ".concat(z.border),color:z.textPrimary,"--tw-ring-color":z.accent}})]}),(0,Ln.jsxs)("div",{className:"text-sm transition-colors duration-300",style:{color:z.textSecondary},children:[q.length," template",1!==q.length?"s":"",f&&" (filtered from ".concat(i.length,")")]})]}),(0,Ln.jsx)("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:0===q.length?(0,Ln.jsxs)("div",{className:"text-center py-12",children:[(0,Ln.jsx)(v,{className:"w-12 h-12 mx-auto mb-4 opacity-50 transition-colors duration-300",style:{color:z.textMuted}}),(0,Ln.jsx)("p",{className:"text-lg font-medium transition-colors duration-300",style:{color:z.textPrimary},children:f?"No templates found":o?"No templates available":"No templates yet"}),(0,Ln.jsx)("p",{className:"transition-colors duration-300",style:{color:z.textSecondary},children:f?"Try adjusting your search":o?"Create templates first to use them here":"Create your first email template to get started"}),!f&&!o&&(0,Ln.jsxs)("button",{onClick:K,className:"mt-4 px-4 py-2 rounded-lg hover:opacity-80 transition-colors flex items-center gap-2 mx-auto",style:{backgroundColor:z.accent,color:D?"#1A1C1A":"#FFFFFF"},children:[(0,Ln.jsx)(An,{className:"w-4 h-4"}),"Create Template"]})]}):q.map(e=>{return(0,Ln.jsxs)("div",{className:"p-4 rounded-lg border hover:opacity-90 transition-all duration-300 cursor-pointer",style:{backgroundColor:z.tertiaryBg,border:"1px solid ".concat(z.border)},onClick:o?()=>{a&&a(e)}:()=>{J(e)},children:[(0,Ln.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,Ln.jsx)("h3",{className:"font-semibold transition-colors duration-300",style:{color:z.textPrimary},children:e.name}),(0,Ln.jsx)("div",{className:"flex items-center gap-1",children:o?(0,Ln.jsxs)("button",{onClick:t=>{t.stopPropagation(),a&&a(e)},className:"px-3 py-2 rounded-lg hover:opacity-80 transition-colors flex items-center gap-2",style:{backgroundColor:z.success,color:"#FFFFFF"},title:"Use This Template",children:[(0,Ln.jsx)(An,{className:"w-4 h-4"}),"Use Template"]}):(0,Ln.jsxs)(Ln.Fragment,{children:[(0,Ln.jsx)("button",{onClick:t=>{t.stopPropagation(),(e=>{I(e),L(!0)})(e)},className:"p-1 rounded hover:opacity-80 transition-colors",style:{color:z.accent},title:"Preview",children:(0,Ln.jsx)(In,{className:"w-4 h-4"})}),(0,Ln.jsx)("button",{onClick:r=>{r.stopPropagation(),(async e=>{if(e&&n){j(!0);try{const r={brand_id:n,name:"".concat(e.name," (Copy)"),description:e.description?"".concat(e.description," (Cloned)"):"Cloned template",content:e.content,html_content:e.html_content||null,created_by:t.id,updated_at:(new Date).toISOString()},{error:o}=await En.from("email_templates").insert([r]);if(o)throw o;await U(),console.log("Template cloned successfully")}catch(r){console.error("Error cloning template:",r),p(r.message)}finally{j(!1)}}})(e)},className:"p-1 rounded hover:opacity-80 transition-colors",style:{color:z.success},title:"Clone Template",disabled:k,children:(0,Ln.jsx)(Fn,{className:"w-4 h-4"})}),(0,Ln.jsx)("button",{onClick:t=>{t.stopPropagation(),J(e)},className:"p-1 rounded hover:opacity-80 transition-colors",style:{color:z.warning},title:"Edit Template (or click anywhere on card)",children:(0,Ln.jsx)(A,{className:"w-4 h-4"})}),(0,Ln.jsx)("button",{onClick:t=>{t.stopPropagation(),P(e),C(!0)},className:"p-1 rounded hover:opacity-80 transition-colors",style:{color:z.error},title:"Delete",children:(0,Ln.jsx)(Mn,{className:"w-4 h-4"})})]})})]}),e.description&&(0,Ln.jsx)("p",{className:"text-sm mb-2 transition-colors duration-300",style:{color:z.textSecondary},children:e.description}),(0,Ln.jsxs)("p",{className:"text-sm mb-3 line-clamp-2 transition-colors duration-300",style:{color:z.textMuted},children:[e.content.substring(0,150),e.content.length>150?"...":""]}),(0,Ln.jsxs)("div",{className:"flex items-center justify-between text-xs transition-colors duration-300",style:{color:z.textMuted},children:[(0,Ln.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Ln.jsx)(Dn,{className:"w-3 h-3"}),(r=e.updated_at,new Date(r).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}))]}),(0,Ln.jsxs)("div",{className:"flex items-center gap-1",children:[(0,Ln.jsx)(w,{className:"w-3 h-3"}),(0,Ln.jsx)("span",{children:"You"})]})]})]},e.id);var r})})]}),!o&&(0,Ln.jsx)("div",{className:"flex-1 flex flex-col shadow-lg transition-colors duration-300",style:{backgroundColor:z.secondaryBg,borderRadius:"12px",margin:"8px",marginLeft:"4px",border:"1px solid ".concat(z.border)},children:g?(0,Ln.jsxs)(Ln.Fragment,{children:[(0,Ln.jsx)("div",{className:"p-6 transition-colors duration-300",style:{backgroundColor:z.tertiaryBg,borderRadius:"12px 12px 0 0",borderBottom:"1px solid ".concat(z.border)},children:(0,Ln.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Ln.jsx)("h2",{className:"text-xl font-bold transition-colors duration-300",style:{color:z.textPrimary},children:x?"Edit Template":"New Template"}),(0,Ln.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Ln.jsxs)("button",{onClick:async()=>{if(F.name.trim()&&F.content.trim()){j(!0);try{const e={brand_id:n,name:F.name.trim(),description:F.description.trim()||null,content:F.content.trim(),html_content:F.html_content||null,created_by:t.id,updated_at:(new Date).toISOString()};if(x){const{error:t}=await En.from("email_templates").update(e).eq("id",x.id);if(t)throw t}else{const{error:t}=await En.from("email_templates").insert([e]);if(t)throw t}await U(),$()}catch(e){console.error("Error saving template:",e),p(e.message)}finally{j(!1)}}else p("Name and content are required")},disabled:k||!F.name.trim()||!F.content.trim(),className:"px-4 py-2 rounded-lg hover:opacity-80 disabled:opacity-50 transition-colors flex items-center gap-2",style:{backgroundColor:z.success,color:"#FFFFFF"},children:[(0,Ln.jsx)(N,{className:"w-4 h-4"}),k?"Saving...":"Save"]}),(0,Ln.jsx)("button",{onClick:$,className:"p-2 rounded-lg hover:opacity-80 transition-colors",style:{border:"1px solid ".concat(z.border),backgroundColor:z.tertiaryBg,color:z.textMuted},children:(0,Ln.jsx)(_,{className:"w-5 h-5"})})]})]})}),(0,Ln.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[h&&(0,Ln.jsx)("div",{className:"p-4 rounded-lg transition-colors duration-300",style:{backgroundColor:"".concat(z.error,"20"),border:"1px solid ".concat(z.error)},children:(0,Ln.jsx)("p",{className:"text-sm transition-colors duration-300",style:{color:z.error},children:h})}),(0,Ln.jsxs)("div",{children:[(0,Ln.jsx)("label",{className:"text-sm font-medium mb-2 block transition-colors duration-300",style:{color:z.textPrimary},children:"Template Name *"}),(0,Ln.jsx)("input",{type:"text",value:F.name,onChange:e=>H("name",e.target.value),className:"w-full px-3 py-2 rounded-lg focus:ring-2 transition-colors duration-300",style:{backgroundColor:z.tertiaryBg,border:"1px solid ".concat(z.border),color:z.textPrimary,"--tw-ring-color":z.accent},placeholder:"Enter template name"})]}),(0,Ln.jsxs)("div",{children:[(0,Ln.jsx)("label",{className:"text-sm font-medium mb-2 block transition-colors duration-300",style:{color:z.textPrimary},children:"Description"}),(0,Ln.jsx)("input",{type:"text",value:F.description,onChange:e=>H("description",e.target.value),className:"w-full px-3 py-2 rounded-lg focus:ring-2 transition-colors duration-300",style:{backgroundColor:z.tertiaryBg,border:"1px solid ".concat(z.border),color:z.textPrimary,"--tw-ring-color":z.accent},placeholder:"Optional description"})]}),(0,Ln.jsxs)("div",{children:[(0,Ln.jsx)("label",{className:"text-sm font-medium mb-2 block transition-colors duration-300",style:{color:z.textPrimary},children:"Template Content *"}),(0,Ln.jsxs)("div",{className:"flex flex-wrap gap-2 p-3 rounded-lg mb-3 transition-colors duration-300",style:{backgroundColor:z.tertiaryBg,border:"1px solid ".concat(z.border)},children:[(0,Ln.jsx)("button",{type:"button",onClick:()=>W("bold"),className:"px-3 py-1 rounded text-xs font-bold hover:opacity-80 transition-all duration-300",style:{backgroundColor:z.tertiaryBg,color:z.textPrimary},title:"Bold (Ctrl+B)",children:"B"}),(0,Ln.jsx)("button",{type:"button",onClick:()=>W("italic"),className:"px-3 py-1 rounded text-xs italic hover:opacity-80 transition-all duration-300",style:{backgroundColor:z.tertiaryBg,color:z.textPrimary},title:"Italic (Ctrl+I)",children:"I"}),(0,Ln.jsx)("button",{type:"button",onClick:()=>W("underline"),className:"px-3 py-1 rounded text-xs underline hover:opacity-80 transition-all duration-300",style:{backgroundColor:z.tertiaryBg,color:z.textPrimary},title:"Underline (Ctrl+U)",children:"U"}),(0,Ln.jsx)("button",{type:"button",onClick:()=>{const e=window.getSelection(),t=e.toString().trim(),n=e.rangeCount>0?e.getRangeAt(0):null,r=document.querySelector("[contenteditable]"),o=document.createElement("div");o.style.cssText="\n      position: fixed;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      background: rgba(0, 0, 0, 0.5);\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      z-index: 1000;\n    ";const a=document.createElement("div");a.style.cssText="\n      background: #1A1C1A;\n      border: 1px solid rgba(255, 255, 255, 0.2);\n      border-radius: 8px;\n      padding: 24px;\n      width: 400px;\n      max-width: 90vw;\n    ";const s=document.createElement("h3");s.textContent="Insert Link",s.style.cssText="\n      color: white;\n      font-weight: bold;\n      margin: 0 0 20px 0;\n      font-size: 16px;\n    ";const i=document.createElement("div");i.style.marginBottom="16px";const l=document.createElement("label");l.textContent="Text to display:",l.style.cssText="\n      display: block;\n      color: white;\n      font-size: 12px;\n      margin-bottom: 4px;\n    ";const c=document.createElement("input");c.type="text",c.value=t,c.placeholder="Link text",c.style.cssText="\n      width: 100%;\n      padding: 8px 12px;\n      border: 1px solid rgba(255, 255, 255, 0.2);\n      border-radius: 6px;\n      background: rgba(255, 255, 255, 0.05);\n      color: white;\n      font-size: 14px;\n      box-sizing: border-box;\n      outline: none;\n    ";const d=document.createElement("div");d.style.marginBottom="24px";const u=document.createElement("label");u.textContent="URL:",u.style.cssText=l.style.cssText;const h=document.createElement("input");h.type="text",h.placeholder="https://example.com",h.style.cssText=c.style.cssText;const p=document.createElement("div");p.style.cssText="\n      color: #ff4444;\n      font-size: 12px;\n      margin-bottom: 16px;\n      min-height: 16px;\n    ";const f=document.createElement("div");f.style.cssText="\n      display: flex;\n      justify-content: flex-end;\n      gap: 8px;\n    ";const m=document.createElement("button");m.textContent="Cancel",m.style.cssText="\n      padding: 8px 16px;\n      border: 1px solid rgba(255, 255, 255, 0.2);\n      border-radius: 6px;\n      background: rgba(255, 255, 255, 0.05);\n      color: white;\n      cursor: pointer;\n      font-size: 14px;\n    ";const g=document.createElement("button");g.textContent="Insert Link",g.style.cssText="\n      padding: 8px 16px;\n      border: none;\n      border-radius: 6px;\n      background: #54FCFF;\n      color: #1A1C1A;\n      cursor: pointer;\n      font-weight: bold;\n      font-size: 14px;\n    ",i.appendChild(l),i.appendChild(c),d.appendChild(u),d.appendChild(h),f.appendChild(m),f.appendChild(g),a.appendChild(s),a.appendChild(i),a.appendChild(d),a.appendChild(p),a.appendChild(f),o.appendChild(a),document.body.appendChild(o),setTimeout(()=>{t?h.focus():c.focus()},50);const y=()=>{const e=c.value.trim();let t=h.value.trim();if(e)if(t){t.startsWith("http://")||t.startsWith("https://")||(t="https://"+t);try{new URL(t)}catch(a){return void(p.textContent="Please enter a valid URL")}if(n&&r){const o=document.createElement("span");o.style.position="relative",o.style.display="inline-block";const a=document.createElement("a");a.href=t,a.textContent=e,a.target="_blank",a.rel="noopener noreferrer",a.style.cssText="\n          color: #0066cc;\n          text-decoration: underline;\n          cursor: pointer;\n        ";const s=document.createElement("span");s.textContent="\xd7",s.style.cssText="\n          position: absolute;\n          top: -8px;\n          right: -12px;\n          background: #e0e0e0;\n          color: #333;\n          border-radius: 50%;\n          width: 16px;\n          height: 16px;\n          font-size: 12px;\n          line-height: 16px;\n          text-align: center;\n          cursor: pointer;\n          user-select: none;\n          opacity: 0;\n          transition: opacity 0.2s;\n        ",o.addEventListener("mouseenter",()=>{s.style.opacity="1",a.style.color="#004499"}),o.addEventListener("mouseleave",()=>{s.style.opacity="0",a.style.color="#0066cc"}),s.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation();const t=document.createTextNode(a.textContent);o.parentNode.replaceChild(t,o),V({target:r})}),o.appendChild(a),o.appendChild(s),n.deleteContents(),n.insertNode(o),V({target:r})}document.body.removeChild(o)}else p.textContent="Please enter a URL";else p.textContent="Please enter the text to display"};m.addEventListener("click",()=>document.body.removeChild(o)),g.addEventListener("click",y),[c,h].forEach(e=>{e.addEventListener("keydown",e=>{"Enter"===e.key&&(e.preventDefault(),y())})}),o.addEventListener("click",e=>{e.target===o&&document.body.removeChild(o)}),document.addEventListener("keydown",function e(t){"Escape"===t.key&&(document.body.removeChild(o),document.removeEventListener("keydown",e))})},className:"px-3 py-1 rounded text-xs hover:opacity-80 transition-all duration-300 flex items-center gap-1",style:{backgroundColor:z.tertiaryBg,color:z.textPrimary},title:"Insert Link",children:"\ud83d\udd17 Link"}),(0,Ln.jsx)("button",{type:"button",onClick:()=>{document.execCommand("insertUnorderedList",!1,null);const e=document.querySelector("[contenteditable]");e&&V({target:e})},className:"px-3 py-1 rounded text-xs hover:opacity-80 transition-all duration-300",style:{backgroundColor:z.tertiaryBg,color:z.textPrimary},title:"Bullet List",children:"\u2022 List"})]}),(0,Ln.jsx)("div",{contentEditable:!0,suppressContentEditableWarning:!0,onInput:V,onKeyDown:e=>{if(e.ctrlKey||e.metaKey)switch(e.key){case"b":e.preventDefault(),W("bold");break;case"i":e.preventDefault(),W("italic");break;case"u":e.preventDefault(),W("underline");break;case"z":e.preventDefault(),e.shiftKey?document.execCommand("redo",!1,null):document.execCommand("undo",!1,null),V({target:e.target});break;case"y":e.preventDefault(),document.execCommand("redo",!1,null),V({target:e.target})}else if("Enter"===e.key&&e.shiftKey){const t=window.getSelection();if(t.rangeCount>0){let n=t.getRangeAt(0).startContainer;for(;n&&n.nodeType!==Node.ELEMENT_NODE;)n=n.parentNode;if(n&&"LI"===n.tagName){e.preventDefault();const r=n.closest("ul, ol");if(r){const n=document.createElement("div");n.innerHTML="<br>",r.parentNode.insertBefore(n,r.nextSibling);const o=document.createRange();o.setStart(n,0),o.collapse(!0),t.removeAllRanges(),t.addRange(o),V({target:e.target})}}}}else if("Tab"===e.key){e.preventDefault();const t=window.getSelection();if(t.rangeCount>0){let n=t.getRangeAt(0).startContainer;for(;n&&n.nodeType!==Node.ELEMENT_NODE;)n=n.parentNode;n&&("LI"===n.tagName||n.closest("ul, ol"))?e.shiftKey?document.execCommand("outdent",!1,null):document.execCommand("indent",!1,null):e.shiftKey?document.execCommand("outdent",!1,null):document.execCommand("insertHTML",!1,"&nbsp;&nbsp;&nbsp;&nbsp;")}V({target:e.target})}else if("Backspace"===e.key){const t=window.getSelection();if(t.rangeCount>0){const n=t.getRangeAt(0);let r=n.startContainer;for(;r&&r.nodeType!==Node.ELEMENT_NODE;)r=r.parentNode;if(r&&"LI"===r.tagName){const t=""===r.textContent.trim(),o=0===n.startOffset;t&&o&&(e.preventDefault(),document.execCommand("outdent",!1,null),V({target:e.target}))}}}},className:"w-full h-64 p-3 rounded-lg resize-none focus:ring-2 focus:outline-none overflow-y-auto transition-colors duration-300",style:{backgroundColor:z.tertiaryBg,border:"1px solid ".concat(z.border),color:z.textPrimary,"--tw-ring-color":z.accent,minHeight:"256px"},"data-placeholder":"Start typing your template content... Keyboard shortcuts:\n\u2022 Ctrl+B/I/U - Bold/Italic/Underline\n\u2022 Ctrl+Z/Y - Undo/Redo\n\u2022 Tab/Shift+Tab - Indent/Outdent\n\u2022 Bullet button - Toggle lists\n\u2022 Backspace on empty bullet - Exit list\n\u2022 Shift+Enter in bullet - Exit to normal text"}),(0,Ln.jsx)("p",{className:"text-xs mt-2 transition-colors duration-300",style:{color:z.textMuted},children:"Rich text editor with full formatting support - Bold, italic, links, bullet points, and more!"})]})]})]}):(0,Ln.jsx)("div",{className:"flex-1 flex items-center justify-center transition-colors duration-300",style:{color:z.textMuted},children:(0,Ln.jsxs)("div",{className:"text-center",children:[(0,Ln.jsx)(v,{className:"w-12 h-12 mx-auto mb-4 transition-colors duration-300",style:{color:z.accent}}),(0,Ln.jsx)("p",{className:"text-lg font-medium transition-colors duration-300",style:{color:z.textPrimary},children:"Select a template or create a new one"}),(0,Ln.jsx)("p",{className:"text-sm transition-colors duration-300",style:{color:z.textSecondary},children:'Choose a template from the list to edit, or click "New Template" to get started'})]})})}),S&&E&&(0,Ln.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Ln.jsxs)("div",{className:"rounded-lg p-6 max-w-md w-mx mx-4 shadow-xl",style:{backgroundColor:z.secondaryBg,border:"1px solid ".concat(z.border)},children:[(0,Ln.jsx)("h3",{className:"text-lg font-semibold mb-2 transition-colors duration-300",style:{color:z.textPrimary},children:"Delete Template"}),(0,Ln.jsxs)("p",{className:"mb-6 transition-colors duration-300",style:{color:z.textSecondary},children:["Are you sure you want to delete ",(0,Ln.jsx)("strong",{className:"transition-colors duration-300",style:{color:z.textPrimary},children:E.name}),"? This action cannot be undone."]}),(0,Ln.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,Ln.jsx)("button",{onClick:()=>{C(!1),P(null)},className:"px-4 py-2 hover:opacity-80 rounded-lg transition-colors",style:{border:"1px solid ".concat(z.border),color:z.textPrimary},children:"Cancel"}),(0,Ln.jsx)("button",{onClick:()=>(async e=>{try{const{error:t}=await En.from("email_templates").update({is_active:!1}).eq("id",e.id);if(t)throw t;await U(),C(!1),P(null)}catch(t){console.error("Error deleting template:",t),p(t.message)}})(E),className:"px-4 py-2 hover:opacity-80 rounded-lg transition-colors",style:{backgroundColor:z.error,color:"#FFFFFF"},children:"Delete Template"})]})]})}),T&&O&&(0,Ln.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,Ln.jsxs)("div",{className:"rounded-lg max-w-2xl w-full max-h-[80vh] shadow-xl overflow-hidden",style:{backgroundColor:z.secondaryBg,border:"1px solid ".concat(z.border)},children:[(0,Ln.jsxs)("div",{className:"p-4 border-b flex justify-between items-center",style:{borderColor:z.border},children:[(0,Ln.jsxs)("h3",{className:"text-lg font-semibold transition-colors duration-300",style:{color:z.textPrimary},children:["Preview: ",O.name]}),(0,Ln.jsx)("button",{onClick:()=>L(!1),className:"p-1 rounded hover:opacity-80 transition-colors",style:{color:z.textMuted},children:(0,Ln.jsx)(_,{className:"w-5 h-5"})})]}),(0,Ln.jsx)("div",{className:"p-6 overflow-y-auto max-h-96",children:O.html_content?(0,Ln.jsx)("div",{dangerouslySetInnerHTML:{__html:O.html_content},className:"prose max-w-none transition-colors duration-300",style:{color:z.textPrimary}}):(0,Ln.jsx)("div",{className:"whitespace-pre-wrap transition-colors duration-300",style:{color:z.textPrimary},children:O.content})})]})})]})]})},zn="InboxManager_2024_Salt_Key",Un=e=>{if(!e||"string"!==typeof e)return"";try{return btoa(e+zn)}catch(t){return console.warn("\u274c BULLETPROOF: Failed to encrypt API key:",t),e}},qn=e=>{if(!e||"string"!==typeof e)return"";try{if(!/^[A-Za-z0-9+/]*={0,2}$/.test(e))return console.log("\ud83d\udd13 BULLETPROOF: Key is not base64 encoded, returning as plain text"),e;const t=atob(e);return t.includes(zn)?t.replace(zn,""):(console.log("\ud83d\udd13 BULLETPROOF: Key is base64 but no salt found, returning decoded"),t)}catch(t){return console.warn("\u274c BULLETPROOF: Decryption failed, returning original key:",t.message),e}},Hn=e=>{if(!e)return crypto.randomUUID();return/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)?e:(console.warn('\u26a0\ufe0f BULLETPROOF: Invalid UUID "'.concat(e,'" - generating new one')),crypto.randomUUID())},Vn=e=>{if(!e)return"";const t=document.createElement("div");t.innerHTML=e;t.querySelectorAll('span[style*="font-weight"], span[style*="bold"]').forEach(e=>{if("bold"===e.style.fontWeight||"700"===e.style.fontWeight||"bolder"===e.style.fontWeight){const t=document.createElement("strong");t.innerHTML=e.innerHTML,e.parentNode.replaceChild(t,e)}});t.querySelectorAll('span[style*="font-style"]').forEach(e=>{if("italic"===e.style.fontStyle){const t=document.createElement("em");t.innerHTML=e.innerHTML,e.parentNode.replaceChild(t,e)}});t.querySelectorAll('span[style*="text-decoration"]').forEach(e=>{if("underline"===e.style.textDecoration){const t=document.createElement("u");t.innerHTML=e.innerHTML,e.parentNode.replaceChild(t,e)}});return t.querySelectorAll("span").forEach(e=>{const t=e.textContent.trim().length>0;!(e.style.fontWeight||e.style.fontStyle||e.style.textDecoration)&&t?e.outerHTML=e.innerHTML:t||e.remove()}),t.innerHTML},Wn=e=>{if(!e)return"";const t=Vn(e),n=document.createElement("div");n.innerHTML=t;const r=["onload","onerror","onclick","onmouseover","onfocus","onblur","onchange","onsubmit"];["script","object","embed","iframe","form"].forEach(e=>{n.querySelectorAll(e).forEach(e=>e.remove())});return n.querySelectorAll("*").forEach(e=>{r.forEach(t=>{e.hasAttribute(t)&&e.removeAttribute(t)}),["href","src"].forEach(t=>{const n=e.getAttribute(t);n&&n.toLowerCase().startsWith("javascript:")&&e.removeAttribute(t)})}),n.innerHTML},Kn=e=>{var t,n,o,a;let{user:s,onSignOut:i}=e;const[l,u]=(0,r.useState)([]),[h,p]=(0,r.useState)(!0),[U,q]=(0,r.useState)(null),[H,V]=(0,r.useState)(null),[W,K]=(0,r.useState)(!1),[J,$]=(0,r.useState)(!1),[Q,G]=(0,r.useState)("all"),[Y,X]=(0,r.useState)(!1),[Z,ee]=(0,r.useState)(()=>{console.log("\ud83d\ude80 BULLETPROOF INIT: Initializing API keys state...");try{const e=localStorage.getItem("apiKeys_accounts"),t=localStorage.getItem("apiKeys_fullenrich")||"";if(e){const n=JSON.parse(e);return console.log("\u2705 BULLETPROOF INIT: Found ".concat(n.length," accounts in new format")),{accounts:n,fullenrich:t,_lastSync:localStorage.getItem("apiKeys_lastSync")||null,_isLoading:!1,_hasError:!1}}console.log("\ud83d\udcf1 BULLETPROOF INIT: Attempting legacy format migration...");const n=localStorage.getItem("esp_provider")||"",r=localStorage.getItem("esp_api_key_enc")||"",o=localStorage.getItem("fullenrich_api_key_enc")||"";if(n||r||o){const e=n||r?[{id:crypto.randomUUID(),name:"Primary Account (Migrated)",esp:{provider:n,key:qn(r)},is_primary:!0}]:[];return console.log("\ud83d\udd04 BULLETPROOF INIT: Migrated ".concat(e.length," legacy accounts")),{accounts:e,fullenrich:qn(o),_lastSync:null,_isLoading:!1,_hasError:!1}}return console.log("\ud83c\udd95 BULLETPROOF INIT: Starting with empty state"),{accounts:[],fullenrich:"",_lastSync:null,_isLoading:!1,_hasError:!1}}catch(U){return console.error("\u274c BULLETPROOF INIT: Critical initialization error:",U),{accounts:[],fullenrich:"",_lastSync:null,_isLoading:!1,_hasError:!0}}}),[te,ne]=(0,r.useState)({esp:null,fullenrich:null});(0,r.useEffect)(()=>{console.log("\ud83d\udd04 apiKeys state changed:",{accountCount:Z.accounts.length,accounts:Z.accounts.map(e=>{var t,n;return{id:e.id,name:e.name,provider:null===(t=e.esp)||void 0===t?void 0:t.provider,hasKey:!(null===(n=e.esp)||void 0===n||!n.key)}}),hasFullenrich:!!Z.fullenrich})},[Z]);const[re,oe]=(0,r.useState)(!1),[ae,se]=(0,r.useState)(!1),[ie,le]=(0,r.useState)({type:"",message:""}),[ce,de]=(0,r.useState)(!1),[ue,he]=(0,r.useState)(!1),[pe,fe]=(0,r.useState)([]),[me,ge]=(0,r.useState)(null),[ye,ve]=(0,r.useState)(!1),xe=(0,r.useRef)(null),[be,we]=(0,r.useState)(new Set),[ke,_e]=(0,r.useState)(new Set),[je,Se]=(0,r.useState)([]),Ne=(0,r.useRef)({}),[Ce,Ee]=(0,r.useState)(()=>{const e=localStorage.getItem("inbox_manager_theme");return!e||"dark"===e}),[Pe,Te]=(0,r.useState)(()=>{try{const e=localStorage.getItem("inbox_manager_drafts");return e?JSON.parse(e):{}}catch(e){return console.warn("Failed to load saved drafts:",e),{}}}),[Le,Re]=(0,r.useState)(()=>{try{const e=localStorage.getItem("inbox_manager_recent_leads");return e?JSON.parse(e):[]}catch(e){return console.warn("Failed to load recently viewed leads:",e),[]}}),[Oe,Ae]=(0,r.useState)(!1),[Ie,Fe]=(0,r.useState)(new Set),[Me,De]=(0,r.useState)({}),Be=(0,r.useRef)({}),[ze,Ue]=(0,r.useState)(null);(0,r.useEffect)(()=>()=>{Object.values(Ne.current).forEach(e=>{clearTimeout(e)}),qe.current&&clearTimeout(qe.current)},[]),(0,r.useEffect)(()=>{const e=e=>{if(Oe){const t=e.target.closest(".recent-dropdown"),n=e.target.closest("[data-portal-dropdown]");t||n||(Ae(!1),Ue(null))}if(Ie.size>0){const t=e.target.closest(".category-dropdown"),n=e.target.closest("[data-portal-dropdown]");t||n||(Fe(new Set),De({}))}if(ye){e.target.closest(".scheduler-container")||ve(!1)}};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[Oe,Ie,ye]);const qe=(0,r.useRef)(null),[He,Ve]=(0,r.useState)(!1),We=(e,t,n)=>{qe.current&&clearTimeout(qe.current),Ve(!0),qe.current=setTimeout(()=>{const r=c(c({},Pe),{},{[e]:{content:t.trim(),htmlContent:n||"",savedAt:(new Date).toISOString()}});t.trim()||delete r[e],Te(r),localStorage.setItem("inbox_manager_drafts",JSON.stringify(r)),Ve(!1)},2e3)};(0,r.useEffect)(()=>{(()=>{let e=!1;["smartlead","claude","fullenrich"].forEach(t=>{const n=localStorage.getItem("".concat(t,"_api_key")),r=localStorage.getItem("".concat(t,"_api_key_enc"));if(n&&!r){const r=Un(n);localStorage.setItem("".concat(t,"_api_key_enc"),r),localStorage.removeItem("".concat(t,"_api_key")),e=!0}}),e&&(console.info("API keys migrated to encrypted storage for security"),Je("API keys upgraded to encrypted storage","success"))})()},[]);const Ke=Ce?{primaryBg:"#1A1C1A",secondaryBg:"rgba(26, 28, 26, 0.8)",tertiaryBg:"rgba(255, 255, 255, 0.05)",textPrimary:"#FFFFFF",textSecondary:"#D1D5DB",textMuted:"#9CA3AF",accent:"#54FCFF",border:"rgba(255, 255, 255, 0.1)",borderStrong:"rgba(255, 255, 255, 0.2)",success:"#10B981",warning:"#F59E0B",error:"#EF4444"}:{primaryBg:"#F8FAFC",secondaryBg:"#FFFFFF",tertiaryBg:"#F1F5F9",textPrimary:"#0F172A",textSecondary:"#334155",textMuted:"#64748B",accent:"#2563EB",border:"rgba(0, 0, 0, 0.15)",borderStrong:"rgba(0, 0, 0, 0.25)",success:"#059669",warning:"#D97706",error:"#DC2626"},Je=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const r=Date.now(),o={id:r,message:e,type:t,leadId:n};Se(e=>[...e,o]),Ne.current[r]=setTimeout(()=>{$e(r)},1e4)},$e=e=>{Ne.current[e]&&(clearTimeout(Ne.current[e]),delete Ne.current[e]),Se(t=>t.filter(t=>t.id!==e))},Qe=e=>{const t=e.filter(e=>"REPLY"===e.type);return 0===t.length?null:t[t.length-1].time},Ge=e=>{const t=(e=>{var t;return null!==e&&void 0!==e&&null!==(t=e.conversation)&&void 0!==t&&t.length?e.conversation[e.conversation.length-1]:null})(e);if(!t)return"none";const n="REPLY"===t.type,r="SENT"===t.type,o=new Date,a=new Date(t.time),s=(o-a)/36e5;return n&&s>=24?"urgent-response":n&&s<24?"needs-response":r&&(o-a)/864e5>=3?"needs-followup":"none"},[Ye,Xe]=(0,r.useState)(()=>localStorage.getItem("user_brand_id")||null);(0,r.useEffect)(()=>{(async()=>{if(!s)return;const e=localStorage.getItem("user_brand_id");if(e)return void Xe(e);const{data:t,error:n}=await En.from("profiles").select("brand_id").eq("id",s.id).single();null!==t&&void 0!==t&&t.brand_id?(Xe(t.brand_id),localStorage.setItem("user_brand_id",t.brand_id)):(Xe(null),localStorage.removeItem("user_brand_id"))})()},[s]);const Ze=(0,r.useRef)(!1),et=(0,r.useRef)(null);(0,r.useEffect)(()=>{if(Ye||Z.accounts&&Z.accounts.length>0){const e=setTimeout(()=>{tt()},100);return()=>clearTimeout(e)}},[Ye,null===(t=Z.accounts)||void 0===t?void 0:t.length]);const tt=async()=>{try{p(!0),q(null);const{data:e,error:t}=await En.from("retention_harbor").select("*");if(t)throw t;let n=[];if(Z.accounts&&Z.accounts.length>0){console.log("\ud83d\udd11 Filtering leads by API keys");Z.accounts.map(e=>qn(e.esp.key)||e.esp.key).filter(e=>e&&""!==e.trim());n=(e||[]).filter(e=>{if(e.account_id){if(Z.accounts.some(t=>t.id===e.account_id))return console.log("\u2705 Lead matches account: ".concat(e.account_id)),!0}return!(e.account_id||!Ye||e.brand_id!==Ye)&&(console.log("\u2705 Lead matches brand_id fallback: ".concat(e.brand_id)),!0)})}else Ye?(console.log("\ud83c\udfe2 No API keys found - filtering leads by brand ID"),n=(e||[]).filter(e=>e.brand_id===Ye)):(console.log("\u274c No API keys or brand ID - showing empty state"),n=[]);const r=n.map(e=>{var t;let n=[],r="Campaign for ".concat(e.first_name||"Lead"),o=null;try{if(e.email_message_body){const t=JSON.parse(e.email_message_body);if(t.length>0&&t[0].stats_id&&(o=t[0].stats_id),n=t.map((e,n)=>{const r=t[n-1];let o;if("REPLY"===e.type&&r&&"SENT"===r.type){o=(new Date(e.time)-new Date(r.time))/36e5}return{from:e.from||"",to:e.to||"",cc:e.cc||null,type:e.type||"SENT",time:e.time||(new Date).toISOString(),content:nt(e.email_body||""),subject:e.subject||"",opened:(e.open_count||0)>0,clicked:(e.click_count||0)>0,response_time:o}}),n.length>0){const e=n.find(e=>e.subject&&""!==e.subject.trim());e&&(r=e.subject.trim())}}}catch(h){console.error("Error parsing conversation for lead",e.id,h),n=[]}const a=n.filter(e=>"REPLY"===e.type),s=n.filter(e=>"SENT"===e.type),i=n.filter(e=>void 0!==e.response_time).map(e=>e.response_time),l=i.length>0?i.reduce((e,t)=>e+t,0)/i.length:0;let c=0;s.length>0&&(c+=Math.min(a.length/s.length*60,60),l<1?c+=40:l<4?c+=30:l<24?c+=20:l<72&&(c+=10)),c=Math.round(Math.min(c,100));const d=n.map(e=>e.content.toLowerCase()).join(" ");let u=1+Math.min(2*a.length,6);return u+=["interested","yes","sure","sounds good","let me know","call","meeting","schedule"].filter(e=>d.includes(e)).length,(d.includes("price")||d.includes("cost"))&&(u+=1),(d.includes("sample")||d.includes("example"))&&(u+=1),u=Math.min(u,10),{id:e.id,campaign_id:e.campaign_ID||null,lead_id:e.lead_ID||null,email_stats_id:o,created_at:e.created_at,updated_at:e.created_at,email:e.lead_email,first_name:e.first_name||"Unknown",last_name:e.last_name||"",website:e.website||(null===(t=e.lead_email)||void 0===t?void 0:t.split("@")[1])||"",content_brief:"Email marketing campaign for ".concat(e.lead_category||"business"),subject:r,email_message_body:e.email_message_body,intent:u,created_at_best:e.created_at,response_time_avg:l,engagement_score:c,lead_category:e.lead_category?parseInt(e.lead_category,10):null,tags:[e.lead_category&&rt[parseInt(e.lead_category,10)]||"Uncategorized"],conversation:n,role:e.role||"N/A",company_data:e.company_data||"N/A",personal_linkedin_url:e.personal_linkedin_url||null,business_linkedin_url:e.business_linkedin_url||null,linkedin_url:e.linkedin_url||"N/A",phone:e.phone||null,status:e.status||"INBOX"}});u(r)}catch(e){console.error("Error fetching leads:",e),q(e.message)}finally{p(!1)}},nt=e=>{if(!e)return"";let t=e.replace(/<[^>]*>/g," ").replace(/&nbsp;/g," ").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&#39;/g,"'").replace(/&#x27;/g,"'").replace(/&apos;/g,"'").replace(/&quot;/g,'"').replace(/&#34;/g,'"').replace(/&#x22;/g,'"').replace(/&#8217;/g,"'").replace(/&#8216;/g,"'").replace(/&#8220;/g,'"').replace(/&#8221;/g,'"').replace(/&#8211;/g,"-").replace(/&#8212;/g,"\u2014").replace(/&#8230;/g,"...").replace(/&hellip;/g,"...").replace(/&mdash;/g,"\u2014").replace(/&ndash;/g,"-").replace(/&rsquo;/g,"'").replace(/&lsquo;/g,"'").replace(/&rdquo;/g,'"').replace(/&ldquo;/g,'"').replace(/\r\n/g,"\n").replace(/\s+/g," ").trim();const n=["On ","From:","-----Original Message-----","________________________________","--- On ","Sent from my iPhone","Sent from my iPad","Get Outlook for","This email was sent to"];let r=t.length;n.forEach(e=>{const n=t.indexOf(e);-1!==n&&n<r&&(r=n)});const o=t.split("\n");let a=[];for(let l=0;l<o.length;l++){const e=o[l].trim();if(e.startsWith(">"))break;if(n.some(t=>e.includes(t)))break;a.push(e)}const s=t.substring(0,r).trim(),i=a.join("\n").trim();return(i.length>0&&i.length<s.length?i:s)||t},rt={1:"Interested",2:"Meeting Request",3:"Not Interested",4:"Do Not Contact",5:"Information Request",6:"Out Of Office",7:"Wrong Person",8:"Uncategorizable by AI",9:"Sender Originated Bounce"},ot=[{value:1,label:"Interested",color:"#10B981"},{value:2,label:"Meeting Request",color:"#8B5CF6"},{value:3,label:"Not Interested",color:"#EF4444"},{value:4,label:"Do Not Contact",color:"#DC2626"},{value:5,label:"Information Request",color:"#F59E0B"},{value:6,label:"Out Of Office",color:"#6B7280"},{value:7,label:"Wrong Person",color:"#F97316"},{value:8,label:"Uncategorizable by AI",color:"#9CA3AF"},{value:9,label:"Sender Originated Bounce",color:"#EF4444"}],at=e=>{let{leadId:t,lead:n,position:r,onClose:o,onSelect:a}=e;return r?(0,d.createPortal)((0,Ln.jsx)("div",{"data-portal-dropdown":!0,className:"fixed rounded-xl shadow-2xl overflow-hidden z-[10000]",style:{top:"".concat(r.top,"px"),left:"".concat(r.left,"px"),minWidth:"220px",maxWidth:"300px",width:"auto",backgroundColor:Ce?"#1A1C1A":"#FFFFFF",border:"2px solid ".concat(Ke.borderStrong),boxShadow:"0 20px 40px rgba(0,0,0,0.9)",boxSizing:"border-box",borderRadius:"12px",overflow:"hidden"},children:ot.map((e,r)=>(0,Ln.jsx)("button",{onClick:n=>{n.stopPropagation(),a(t,e.value),o()},className:"w-full px-5 py-4 text-left transition-all duration-200 hover:opacity-90 text-sm font-medium",style:{backgroundColor:n.lead_category===e.value?"".concat(e.color,"30"):Ce?"#2A2C2A":"#F8F9FA",borderBottom:r<ot.length-1?"1px solid ".concat(Ke.border):"none",color:e.color,boxSizing:"border-box",minHeight:"50px",display:"flex",alignItems:"center"},onMouseEnter:t=>{n.lead_category!==e.value&&(t.target.style.backgroundColor="".concat(e.color,"15"))},onMouseLeave:t=>{n.lead_category!==e.value&&(t.target.style.backgroundColor=Ce?"#2A2C2A":"#F8F9FA")},children:(0,Ln.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,Ln.jsx)("span",{className:"font-semibold text-sm whitespace-nowrap",children:e.label}),n.lead_category===e.value&&(0,Ln.jsx)(f,{className:"w-5 h-5 ml-3 flex-shrink-0",style:{color:e.color}})]})},e.value))}),document.body):null},st=e=>{let{position:t,onClose:n}=e;return t&&Le.length?(0,d.createPortal)((0,Ln.jsx)("div",{"data-portal-dropdown":!0,className:"fixed rounded-xl shadow-2xl overflow-hidden z-[10000]",style:{top:"".concat(t.top,"px"),left:"".concat(t.left,"px"),width:"256px",maxHeight:"320px",backgroundColor:Ce?"#1A1C1A":"#FFFFFF",border:"2px solid ".concat(Ke.borderStrong),boxShadow:"0 20px 40px rgba(0,0,0,0.9)",boxSizing:"border-box",borderRadius:"12px",overflow:"hidden"},children:(0,Ln.jsxs)("div",{className:"p-3",children:[(0,Ln.jsx)("h4",{className:"font-medium mb-2 transition-colors duration-300",style:{color:Ke.textPrimary},children:"Recently Viewed"}),(0,Ln.jsx)("div",{className:"space-y-1 max-h-48 overflow-y-auto",children:Le.map(e=>(0,Ln.jsxs)("button",{onClick:t=>{t.stopPropagation();const r=l.find(t=>t.id===e.id);r&&(ct(r),Ae(!1),G("all"),fe([]),ge(null),ve(!1)),n()},className:"w-full text-left px-3 py-2 rounded-lg text-sm transition-all duration-300 hover:opacity-80",style:{backgroundColor:(null===lt||void 0===lt?void 0:lt.id)===e.id?"".concat(Ke.accent,"20"):Ke.tertiaryBg,color:Ke.textPrimary},children:[(0,Ln.jsx)("div",{className:"font-medium",children:e.name}),(0,Ln.jsx)("div",{className:"text-xs transition-colors duration-300",style:{color:Ke.textMuted},children:e.email})]},e.id))}),(0,Ln.jsx)("button",{onClick:e=>{e.stopPropagation(),Re([]),localStorage.removeItem("inbox_manager_recent_leads"),Ae(!1),n()},className:"w-full mt-3 px-3 py-2 text-xs rounded-lg transition-all duration-300 hover:opacity-80",style:{backgroundColor:Ke.tertiaryBg,color:Ke.textMuted},children:"Clear Recent"})]})}),document.body):null},it=[{field:"last_reply",label:"Most Recent Lead Reply",getValue:e=>{const t=Qe(e.conversation);return t?new Date(t):new Date(0)}},{field:"last_sent",label:"Most Recent Sent Message",getValue:e=>{const t=e.conversation.filter(e=>"SENT"===e.type);return t.length>0?new Date(t[t.length-1].time):new Date(0)}},{field:"intent",label:"Intent Score",getValue:e=>e.intent},{field:"engagement",label:"Engagement Score",getValue:e=>e.engagement_score},{field:"response_time",label:"Response Time",getValue:e=>e.response_time_avg},{field:"name",label:"Name (A-Z)",getValue:e=>"".concat(e.first_name," ").concat(e.last_name).toLowerCase()},{field:"urgency",label:"Urgency Level",getValue:e=>({"urgent-response":4,"needs-response":3,"needs-followup":2,none:1}[Ge(e)]||0)}],[lt,ct]=(0,r.useState)(null),[dt,ut]=(0,r.useState)("recent"),[ht,pt]=(0,r.useState)("all"),[ft,mt]=(0,r.useState)("all"),[gt,yt]=(0,r.useState)("all"),[vt,xt]=(0,r.useState)(""),[bt,wt]=(0,r.useState)(""),[kt,_t]=(0,r.useState)("all"),[jt,St]=(0,r.useState)("all"),[Nt,Ct]=(0,r.useState)(""),[Et,Pt]=(0,r.useState)(""),[Tt,Lt]=(0,r.useState)(!1),[Rt,Ot]=(0,r.useState)(!1),[At,It]=(0,r.useState)(!0),[Ft,Mt]=(0,r.useState)(["general","enrichment","engagement"]),[Dt,Bt]=(0,r.useState)("30"),[zt,Ut]=(0,r.useState)(""),[qt,Ht]=(0,r.useState)(""),[Vt,Wt]=(0,r.useState)(!1),[Kt,Jt]=(0,r.useState)(""),[$t,Qt]=(0,r.useState)(""),[Gt,Yt]=(0,r.useState)(!1),[Xt,Zt]=(0,r.useState)(!1),[en,tn]=(0,r.useState)([{field:"last_reply",direction:"desc"}]),[nn,rn]=(0,r.useState)({}),[on,an]=(0,r.useState)(!1),[sn,ln]=(0,r.useState)(null),[cn,dn]=(0,r.useState)(!1),[un,hn]=(0,r.useState)({isLoading:!1,error:null,lastAttempt:null,retryCount:0}),pn={intent:{label:"Intent Score",options:[{value:"high",label:"High Intent (7-10)"},{value:"medium",label:"Medium Intent (4-6)"},{value:"low",label:"Low Intent (1-3)"}]},urgency:{label:"Urgency Status",options:[{value:"urgent-response",label:"\ud83d\udea8 Urgent Response Needed"},{value:"needs-response",label:"\u26a1 Needs Response"},{value:"needs-followup",label:"\ud83d\udcde Needs Followup"},{value:"none",label:"No Action Needed"}]},category:{label:"Lead Category",options:[{value:"1",label:"Interested"},{value:"2",label:"Meeting Request"},{value:"3",label:"Not Interested"},{value:"4",label:"Do Not Contact"},{value:"5",label:"Information Request"},{value:"6",label:"Out Of Office"},{value:"7",label:"Wrong Person"},{value:"8",label:"Uncategorizable by AI"},{value:"9",label:"Sender Originated Bounce"}]},engagement:{label:"Engagement Level",options:[{value:"high",label:"High Engagement (80%+)"},{value:"medium",label:"Medium Engagement (50-79%)"},{value:"low",label:"Low Engagement (0-49%)"}]},replies:{label:"Reply Status",options:[{value:"has_replies",label:"Has Replies"},{value:"no_replies",label:"No Replies Yet"},{value:"multiple_replies",label:"Multiple Replies (2+)"}]},timeframe:{label:"Last Activity",options:[{value:"today",label:"Today"},{value:"yesterday",label:"Yesterday"},{value:"this_week",label:"This Week"},{value:"last_week",label:"Last Week"},{value:"this_month",label:"This Month"},{value:"older",label:"Older than 1 Month"}]}},fn=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"desc";tn(n=>n.find(t=>t.field===e)?n.map(n=>n.field===e?c(c({},n),{},{direction:t}):n):[...n,{field:e,direction:t}])},mn=(e,t)=>{if(!e||!t||!pn[e])return void console.warn("Invalid filter:",{category:e,value:t});pn[e].options.some(e=>e.value===t)?rn(n=>c(c({},n),{},{[e]:[...new Set([...n[e]||[],t])]})):console.warn("Invalid filter value:",{category:e,value:t})},gn=(e,t)=>{e&&t&&nn[e]?rn(n=>{const r=c({},n);return r[e]&&(r[e]=r[e].filter(e=>e!==t),0===r[e].length&&delete r[e]),r}):console.warn("Invalid filter removal:",{category:e,value:t})},yn=((0,r.useMemo)(()=>{const e=l.length;return{totalLeads:e,highIntentLeads:l.filter(e=>e.intent>=7).length,avgResponseTime:l.reduce((e,t)=>e+t.response_time_avg,0)/e,avgEngagement:l.reduce((e,t)=>e+t.engagement_score,0)/e,urgentResponse:l.filter(e=>"urgent-response"===Ge(e)).length,needsResponse:l.filter(e=>"needs-response"===Ge(e)).length,needsFollowup:l.filter(e=>"needs-followup"===Ge(e)).length}},[l]),{questions:["?","what","how","when","where","why","could","would","interested","thoughts"],calls:["call","meeting","schedule","discuss","chat","talk","meet","zoom","teams","connect"],pricing:["price","cost","budget","investment","pricing","package","quote","plan","rate"],value_props:["help","improve","increase","reduce","save","better","solution","roi","results","benefit"]}),vn=(0,r.useMemo)(()=>{if(!l.length)return null;const e=parseInt(Dt),t=new Date;t.setDate(t.getDate()-e);const n=l.filter(e=>new Date(e.created_at)>=t),r=n.flatMap(e=>e.conversation.filter(e=>"SENT"===e.type).map(t=>{const n=t.content.toLowerCase(),r=n.split(/\s+/).length,o=yn.questions.some(e=>n.includes(e)),a=yn.calls.some(e=>n.includes(e)),s=yn.pricing.some(e=>n.includes(e)),i=yn.value_props.some(e=>n.includes(e)),l=e.conversation.indexOf(t),c=e.conversation[l+1],d=c&&"REPLY"===c.type;return{wordCount:r,hasQuestion:o,hasCall:a,hasPricing:s,hasValueProp:i,gotReply:d,replyTime:d?new Date(c.time)-new Date(t.time):null}})),o={totalMessages:r.length,avgWordCount:r.reduce((e,t)=>e+t.wordCount,0)/r.length,withQuestions:{total:r.filter(e=>e.hasQuestion).length,success:r.filter(e=>e.hasQuestion&&e.gotReply).length},withCalls:{total:r.filter(e=>e.hasCall).length,success:r.filter(e=>e.hasCall&&e.gotReply).length},withPricing:{total:r.filter(e=>e.hasPricing).length,success:r.filter(e=>e.hasPricing&&e.gotReply).length},withValueProps:{total:r.filter(e=>e.hasValueProp).length,success:r.filter(e=>e.hasValueProp&&e.gotReply).length},lengthBreakdown:[{range:"< 50 words",messages:r.filter(e=>e.wordCount<50).length,replies:r.filter(e=>e.wordCount<50&&e.gotReply).length},{range:"50-100 words",messages:r.filter(e=>e.wordCount>=50&&e.wordCount<100).length,replies:r.filter(e=>e.wordCount>=50&&e.wordCount<100&&e.gotReply).length},{range:"100-200 words",messages:r.filter(e=>e.wordCount>=100&&e.wordCount<200).length,replies:r.filter(e=>e.wordCount>=100&&e.wordCount<200&&e.gotReply).length},{range:"200+ words",messages:r.filter(e=>e.wordCount>=200).length,replies:r.filter(e=>e.wordCount>=200&&e.gotReply).length}],avgReplyTime:{withQuestion:r.filter(e=>e.hasQuestion&&e.replyTime).reduce((e,t)=>e+t.replyTime,0)/r.filter(e=>e.hasQuestion&&e.replyTime).length/36e5,withCall:r.filter(e=>e.hasCall&&e.replyTime).reduce((e,t)=>e+t.replyTime,0)/r.filter(e=>e.hasCall&&e.replyTime).length/36e5,withPricing:r.filter(e=>e.hasPricing&&e.replyTime).reduce((e,t)=>e+t.replyTime,0)/r.filter(e=>e.hasPricing&&e.replyTime).length/36e5,withValueProp:r.filter(e=>e.hasValueProp&&e.replyTime).reduce((e,t)=>e+t.replyTime,0)/r.filter(e=>e.hasValueProp&&e.replyTime).length/36e5}},a=n.length,s=n.filter(e=>e.conversation.filter(e=>"REPLY"===e.type).length>=2).length,i=a>0?s/a*100:0,d=n.reduce((e,t)=>e+t.conversation.filter(e=>"REPLY"===e.type).length,0),u=a>0?d/a:0,h=n.map(e=>e.response_time_avg).filter(e=>e>0),p=h.length>0?h.reduce((e,t)=>e+t,0)/h.length:0,f={under1h:h.filter(e=>e<1).length,"1to4h":h.filter(e=>e>=1&&e<4).length,"4to24h":h.filter(e=>e>=4&&e<24).length,over24h:h.filter(e=>e>=24).length},m=n.reduce((e,t)=>{const n=t.campaign_id||"Unknown Campaign";e[n]||(e[n]={name:"Campaign ".concat(n),totalLeads:0,totalReplies:0,totalIntent:0,totalEngagement:0,responseTimes:[],conversationDepths:[]}),e[n].totalLeads++,e[n].totalIntent+=t.intent,e[n].totalEngagement+=t.engagement_score;const r=t.conversation.filter(e=>"REPLY"===e.type).length;return e[n].totalReplies+=r,e[n].conversationDepths.push(t.conversation.length),t.response_time_avg>0&&e[n].responseTimes.push(t.response_time_avg),e},{}),g=Object.values(m).map(e=>c(c({},e),{},{avgRepliesPerLead:e.totalLeads>0?e.totalReplies/e.totalLeads:0,avgIntent:e.totalLeads>0?e.totalIntent/e.totalLeads:0,avgEngagement:e.totalLeads>0?e.totalEngagement/e.totalLeads:0,avgResponseTime:e.responseTimes.length>0?e.responseTimes.reduce((e,t)=>e+t,0)/e.responseTimes.length:0,avgConversationDepth:e.conversationDepths.length>0?e.conversationDepths.reduce((e,t)=>e+t,0)/e.conversationDepths.length:0})).sort((e,t)=>t.avgEngagement-e.avgEngagement),y=n.reduce((e,t)=>{const n=t.tags&&t.tags[0]?t.tags[0]:"Uncategorized";return e[n]||(e[n]={totalLeads:0,totalReplies:0,totalEngagement:0,responseTimes:[],conversationDepths:[]}),e[n].totalLeads++,e[n].totalReplies+=t.conversation.filter(e=>"REPLY"===e.type).length,e[n].totalEngagement+=t.engagement_score,e[n].conversationDepths.push(t.conversation.length),t.response_time_avg>0&&e[n].responseTimes.push(t.response_time_avg),e},{}),v=Object.entries(y).map(e=>{let[t,n]=e;return{category:t,totalLeads:n.totalLeads,avgRepliesPerLead:n.totalLeads>0?n.totalReplies/n.totalLeads:0,avgEngagement:n.totalLeads>0?n.totalEngagement/n.totalLeads:0,avgResponseTime:n.responseTimes.length>0?n.responseTimes.reduce((e,t)=>e+t,0)/n.responseTimes.length:0,avgConversationDepth:n.conversationDepths.length>0?n.conversationDepths.reduce((e,t)=>e+t,0)/n.conversationDepths.length:0}}).sort((e,t)=>t.avgEngagement-e.avgEngagement),x=[{intent:"High (7-10)",avgReplies:n.filter(e=>e.intent>=7).length>0?n.filter(e=>e.intent>=7).reduce((e,t)=>e+t.conversation.filter(e=>"REPLY"===e.type).length,0)/n.filter(e=>e.intent>=7).length:0,count:n.filter(e=>e.intent>=7).length},{intent:"Medium (4-6)",avgReplies:n.filter(e=>e.intent>=4&&e.intent<7).length>0?n.filter(e=>e.intent>=4&&e.intent<7).reduce((e,t)=>e+t.conversation.filter(e=>"REPLY"===e.type).length,0)/n.filter(e=>e.intent>=4&&e.intent<7).length:0,count:n.filter(e=>e.intent>=4&&e.intent<7).length},{intent:"Low (1-3)",avgReplies:n.filter(e=>e.intent<4).length>0?n.filter(e=>e.intent<4).reduce((e,t)=>e+t.conversation.filter(e=>"REPLY"===e.type).length,0)/n.filter(e=>e.intent<4).length:0,count:n.filter(e=>e.intent<4).length}],b=n.flatMap(e=>e.conversation.filter(e=>"REPLY"===e.type).map(e=>c(c({},e),{},{date:new Date(e.time),hour:new Date(e.time).getHours(),dayOfWeek:new Date(e.time).getDay()}))),w=Array.from({length:7},(e,t)=>Array.from({length:24},(e,n)=>({day:t,hour:n,count:b.filter(e=>e.dayOfWeek===t&&e.hour===n).length,dayName:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][t]}))).flat(),k=Math.max(...w.map(e=>e.count)),_=w.find(e=>e.count===k),j=Array.from({length:Math.min(e,30)},(e,t)=>{const n=new Date;return n.setDate(n.getDate()-t),n.toISOString().split("T")[0]}).reverse().map(e=>{const t=b.filter(t=>t.time.split("T")[0]===e);return{date:e,replyCount:t.length,avgResponseTime:t.length>0?t.reduce((e,t)=>e+(t.response_time||0),0)/t.length:0}});return{totalLeads:a,leadsWithMultipleReplies:s,engagementRate:i,avgRepliesPerLead:u,avgResponseTime:p,responseTimeDistribution:f,campaignStats:g.slice(0,10),categoryStats:v,intentCorrelation:x,responseTrends:j,heatmapData:w,peakHour:_,maxCount:k,totalReplies:d,dateRange:e,copyInsights:o}},[l,Dt]),xn=e=>({bg:"",border:"",text:"text-white",label:e>=7?"High Intent":e>=4?"Medium Intent":"Low Intent"}),bn=(0,r.useMemo)(()=>{try{if(!l||!Array.isArray(l))return[];let e=l.slice();if("need_response"===Q?e=e.filter(e=>{try{if(!e||!e.conversation||!Array.isArray(e.conversation)||0===e.conversation.length)return!1;const t=e.conversation[e.conversation.length-1];return t&&"REPLY"===t.type}catch(t){return console.warn("Error filtering need_response:",t),!1}}):"recently_sent"===Q&&(e=e.filter(e=>{try{if(!e||!e.conversation||!Array.isArray(e.conversation)||0===e.conversation.length)return!1;const t=e.conversation[e.conversation.length-1];if(!t||!t.time||"SENT"!==t.type)return!1;return Math.floor((new Date-new Date(t.time))/36e5)<=24}catch(t){return console.warn("Error filtering recently_sent:",t),!1}})),Nt&&"string"===typeof Nt&&Nt.trim()){const t=Nt.toLowerCase().trim();e=e.filter(e=>{try{if(!e)return!1;const n=(e.first_name||"").toLowerCase(),r=(e.last_name||"").toLowerCase(),o=(e.email||"").toLowerCase(),a=(e.subject||"").toLowerCase();let s=!1;return e.tags&&Array.isArray(e.tags)&&(s=e.tags.some(e=>e&&"string"===typeof e&&e.toLowerCase().includes(t))),n.includes(t)||r.includes(t)||o.includes(t)||a.includes(t)||s}catch(n){return console.warn("Error in search filter:",n),!1}})}if(nn&&"object"===typeof nn)for(const[t,n]of Object.entries(nn))n&&Array.isArray(n)&&0!==n.length&&(e=e.filter(e=>{try{return!!e&&n.some(n=>{if(!n)return!1;switch(t){case"intent":return"number"===typeof e.intent&&("high"===n?e.intent>=7:"medium"===n?e.intent>=4&&e.intent<=6:"low"===n&&e.intent<=3);case"urgency":try{return n===Ge(e)}catch(r){return console.warn("Error checking urgency:",r),!1}case"category":return e.lead_category&&e.lead_category.toString()===n;case"engagement":return"number"===typeof e.engagement_score&&("high"===n?e.engagement_score>=80:"medium"===n?e.engagement_score>=50&&e.engagement_score<80:"low"===n&&e.engagement_score<50);case"replies":try{let t=0;return e.conversation&&Array.isArray(e.conversation)&&(t=e.conversation.filter(e=>e&&"REPLY"===e.type).length),"has_replies"===n?t>0:"no_replies"===n?0===t:"multiple_replies"===n&&t>=2}catch(r){return console.warn("Error checking replies:",r),!1}case"timeframe":try{let t;if(e.conversation&&Array.isArray(e.conversation)&&e.conversation.length>0){const n=e.conversation[e.conversation.length-1];t=n&&n.time?new Date(n.time):new Date(e.created_at||Date.now())}else t=new Date(e.created_at||Date.now());const r=(new Date-t)/864e5;return"today"===n?r>=0&&r<1:"yesterday"===n?r>=1&&r<2:"this_week"===n?r<=7:"last_week"===n?r>7&&r<=14:"this_month"===n?r<=30:"older"===n&&r>30}catch(r){return console.warn("Error checking timeframe:",r),!1}default:return!1}})}catch(r){return console.warn("Error in advanced filter:",r),!1}}));return e}catch(e){return console.error("Error in filteredAndSortedLeads:",e),l||[]}},[l,Nt,nn,Q]);(0,r.useEffect)(()=>{if(lt){(e=>{if(!e)return;const t=[{id:e.id,name:"".concat(e.first_name," ").concat(e.last_name),email:e.email},...Le.filter(t=>t.id!==e.id)].slice(0,8);Re(t),localStorage.setItem("inbox_manager_recent_leads",JSON.stringify(t))})(lt);const e=Pe[lt.id];if(e){Pt(e.content),Qt(e.htmlContent||"");const t=document.querySelector("[contenteditable]");t&&(t.innerHTML=e.htmlContent||e.content.replace(/\n/g,"<br>"))}else{Pt(""),Qt("");const e=document.querySelector("[contenteditable]");e&&(e.innerHTML="")}if(lt.conversation.length>0){const e=lt.conversation[lt.conversation.length-1],t=()=>{const e=new Set;return lt.conversation.forEach(t=>{"SENT"===t.type&&t.from&&e.add(t.from)}),Array.from(e)},n=()=>{const e=new Set,n=t();return lt.conversation.forEach(t=>{t.from&&e.add(t.from),t.to&&e.add(t.to),t.cc&&Array.isArray(t.cc)&&t.cc.length>0&&t.cc.forEach(t=>{t.address&&e.add(t.address)})}),n.forEach(t=>e.delete(t)),Array.from(e)};let r="",o=[];if("REPLY"===e.type){r=e.from;o=n().filter(e=>e!==r)}else r=e.to||lt.email,e.cc&&Array.isArray(e.cc)&&e.cc.length>0&&(o=e.cc.map(e=>e.address).filter(e=>e&&""!==e.trim()));Ut(r||lt.email),Ht(o.join(", "))}else Ut(lt.email),Ht("")}},[lt]);const wn=e=>new Date(e).toLocaleString(),kn=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=window.getSelection();if(0===n.rangeCount)return;const r=n.getRangeAt(0),o=r.toString();if(!o)return;let a;switch(e){case"bold":a=document.createElement("strong");break;case"italic":a=document.createElement("em");break;case"underline":a=document.createElement("u");break;default:return void document.execCommand(e,!1,t)}if(a){a.textContent=o,r.deleteContents(),r.insertNode(a),n.removeAllRanges();const e=document.querySelector("[contenteditable]");e&&_n({target:e})}},_n=e=>{e.target.querySelectorAll(".remove-link").forEach(e=>e.remove());const t=e.target.innerHTML,n=Wn(t),r=e.target.textContent||e.target.innerText;Pt(r),Qt(n),lt&&We(lt.id,r,n),t!==n&&(e.target.innerHTML=n,console.warn("HTML content was sanitized for security"))},jn=e=>e.replace(/\n/g,"<br>"),Sn=e=>{if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]},Nn=e=>e<1?"".concat(Math.round(60*e),"m"):e<24?"".concat(e.toFixed(1),"h"):"".concat((e/24).toFixed(1),"d");if(h)return(0,Ln.jsxs)("div",{className:"flex h-screen flex-col items-center justify-center",style:{backgroundColor:"#1A1C1A"},children:[(0,Ln.jsxs)("div",{className:"text-center p-8 rounded-2xl shadow-xl mb-6",style:{backgroundColor:"rgba(26, 28, 26, 0.8)",border:"1px solid white"},children:[(0,Ln.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 mx-auto mb-4",style:{borderColor:"#54FCFF"}}),(0,Ln.jsx)("p",{className:"text-white",children:"Loading leads..."})]}),s&&(0,Ln.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,Ln.jsxs)("div",{className:"text-white text-sm",children:["Logged in as ",(0,Ln.jsx)("span",{className:"font-semibold",children:s.email})]}),i&&(0,Ln.jsx)("button",{onClick:i,className:"px-4 py-2 rounded-lg text-sm font-medium transition-all hover:bg-red-500/10 flex items-center gap-2",style:{color:"#ef4444",border:"1px solid #ef4444"},children:"Sign Out"})]})]});if(U)return(0,Ln.jsxs)("div",{className:"flex h-screen flex-col items-center justify-center",style:{backgroundColor:"#1A1C1A"},children:[(0,Ln.jsxs)("div",{className:"text-center",children:[(0,Ln.jsxs)("p",{className:"text-red-400 mb-6 font-medium",children:["Error loading leads: ",U]}),(0,Ln.jsx)("button",{onClick:tt,className:"px-4 py-2 text-white rounded-lg hover:opacity-80 transition-colors",style:{backgroundColor:"#54FCFF",color:"#1A1C1A",border:"1px solid white"},children:"Retry"})]}),s&&(0,Ln.jsxs)("div",{className:"flex flex-col items-center gap-2 mt-6",children:[(0,Ln.jsxs)("div",{className:"text-white text-sm",children:["Logged in as ",(0,Ln.jsx)("span",{className:"font-semibold",children:s.email})]}),i&&(0,Ln.jsx)("button",{onClick:i,className:"px-4 py-2 rounded-lg text-sm font-medium transition-all hover:bg-red-500/10 flex items-center gap-2",style:{color:"#ef4444",border:"1px solid #ef4444"},children:"Sign Out"})]})]});if("1"===Ye)return(0,Ln.jsxs)("div",{className:"relative h-screen flex flex-col items-center justify-center",style:{backgroundColor:"#1A1C1A"},children:[(0,Ln.jsx)("div",{className:"absolute inset-0 backdrop-blur-sm z-0"}),(0,Ln.jsx)("div",{className:"relative z-10 flex flex-col items-center justify-center h-full w-full",children:(0,Ln.jsxs)("div",{className:"bg-white/90 dark:bg-gray-900/90 p-10 rounded-2xl shadow-2xl border-2 border-blue-400 flex flex-col items-center max-w-lg mx-auto",children:[(0,Ln.jsx)("h2",{className:"text-2xl font-bold mb-4 text-gray-900 dark:text-white",children:"Subscribe to unlock the inbox"}),(0,Ln.jsx)("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:"Your account is not yet associated with a brand. Please subscribe or contact Navvii support to unlock your inbox."}),(0,Ln.jsx)("div",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"No leads are currently associated with your account."})]})}),s&&(0,Ln.jsxs)("div",{className:"absolute top-6 right-6 flex flex-col items-end gap-2 z-20",children:[(0,Ln.jsxs)("div",{className:"text-white text-sm",children:["Logged in as ",(0,Ln.jsx)("span",{className:"font-semibold",children:s.email})]}),i&&(0,Ln.jsx)("button",{onClick:i,className:"px-4 py-2 rounded-lg text-sm font-medium transition-all hover:bg-red-500/10 flex items-center gap-2",style:{color:"#ef4444",border:"1px solid #ef4444"},children:"Sign Out"})]})]});(0,r.useEffect)(()=>{const e=Date.now();if(console.log("\ud83d\udd04 BULLETPROOF EFFECT [".concat(e,"]: Triggered - brandId: ").concat(Ye,", user: ").concat(!!s)),Ye&&s)return et.current&&clearTimeout(et.current),et.current=setTimeout(()=>{console.log("\u23f0 EFFECT [".concat(e,"]: Timeout triggered, starting load...")),async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=Date.now();if(console.log("\ud83d\udce5 BULLETPROOF LOAD [".concat(n,"]: Starting load for brand ").concat(e)),Ze.current&&!t)return console.log("\u23f8\ufe0f LOAD [".concat(n,"]: Already loading, skipping...")),!1;if(!e||!s||!En)return console.log("\u274c LOAD [".concat(n,"]: Missing requirements - brandId: ").concat(!!e,", user: ").concat(!!s,", supabase: ").concat(!!En)),!1;Ze.current=!0,hn(e=>c(c({},e),{},{isLoading:!0,error:null,lastAttempt:(new Date).toISOString()}));try{console.log("\ud83d\udd0d LOAD [".concat(n,"]: Querying Supabase..."));const{data:t,error:a}=await En.from("api_settings").select("*").eq("brand_id",e).order("created_at",{ascending:!0});if(a)throw new Error("Supabase query failed: ".concat(a.message));if(console.log("\ud83d\udcca LOAD [".concat(n,"]: Found ").concat((null===t||void 0===t?void 0:t.length)||0," records")),!t||0===t.length)return console.log("\ud83d\udced LOAD [".concat(n,"]: No data found - keeping existing state")),hn(e=>c(c({},e),{},{isLoading:!1})),Ze.current=!1,!1;const s=[];let i="";const l=[];for(const e of t){const t="".concat(e.id||"unknown","-").concat(e.account_name||"unnamed");console.log("\ud83d\udd04 LOAD [".concat(n,"]: Processing record ").concat(t));try{if("FullEnrich Global"===e.account_name||"fullenrich_api_key"===e.key_type)i=qn(e.encrypted_key||""),console.log("\u2705 LOAD [".concat(n,"]: FullEnrich processed"));else{const t=qn(e.encrypted_key||"");s.push({id:e.id||crypto.randomUUID(),name:e.account_name||"Unnamed Account",esp:{provider:e.esp_provider||"",key:t},is_primary:e.is_primary||!1}),console.log("\u2705 LOAD [".concat(n,"]: ESP account processed - ").concat(e.account_name))}}catch(r){console.error("\u274c LOAD [".concat(n,"]: Failed to process record ").concat(t,":"),r),l.push("".concat(t,": ").concat(r.message))}}l.length>0&&console.warn("\u26a0\ufe0f LOAD [".concat(n,"]: ").concat(l.length," records had processing errors:"),l),s.length>0&&!s.some(e=>e.is_primary)&&(s[0].is_primary=!0,console.log("\ud83c\udfaf LOAD [".concat(n,"]: Set first account as primary")));const d={accounts:s,fullenrich:i,_lastSync:(new Date).toISOString(),_isLoading:!1,_hasError:!1};console.log("\ud83c\udfaf LOAD [".concat(n,"]: Setting new state - ").concat(s.length," accounts, fullenrich: ").concat(!!i)),ee(d);try{localStorage.setItem("apiKeys_accounts",JSON.stringify(s)),localStorage.setItem("apiKeys_fullenrich",i),localStorage.setItem("apiKeys_lastSync",d._lastSync),console.log("\ud83d\udcbe LOAD [".concat(n,"]: Synced to localStorage"))}catch(o){console.error("\u274c LOAD [".concat(n,"]: Failed to sync to localStorage:"),o)}return hn(e=>c(c({},e),{},{isLoading:!1,error:null,retryCount:0})),console.log("\u2705 LOAD [".concat(n,"]: Load completed successfully")),!0}catch(U){return console.error("\u274c LOAD [".concat(n,"]: Load failed:"),U),hn(t=>c(c({},t),{},{isLoading:!1,error:U.message,retryCount:t.retryCount+1})),Je("Failed to load API keys: ".concat(U.message),"error"),!1}finally{Ze.current=!1}}(Ye,!1).catch(t=>{console.error("\u274c EFFECT [".concat(e,"]: Load failed:"),t)})},100),()=>{et.current&&(clearTimeout(et.current),et.current=null)};console.log("\u23f8\ufe0f EFFECT [".concat(e,"]: Missing requirements, skipping load"))},[Ye,null===s||void 0===s?void 0:s.id]);const Cn=async(e,t)=>{const n=Date.now();if(console.log("\ud83d\udcbe BULLETPROOF SAVE [".concat(n,"]: Starting save for brand ").concat(e)),console.log("\ud83d\udcca SAVE [".concat(n,"]: ").concat(t.accounts.length," accounts, fullenrich: ").concat(!!t.fullenrich)),!e||!s||!En)throw new Error("Missing required data for save operation");try{const r=[],o=[];for(const a of t.accounts){const t=Hn(a.id);o.push(t),console.log("\ud83d\udcdd SAVE [".concat(n,"]: Preparing account ").concat(a.name," (").concat(t,")"));const i={id:t,brand_id:e,created_by:s.id,account_name:a.name||"Unnamed Account",key_type:"esp_api_key",encrypted_key:Un(a.esp.key||""),esp_provider:a.esp.provider||null,is_primary:a.is_primary||!1,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()};r.push(i)}if(t.fullenrich&&t.fullenrich.trim()){console.log("\ud83d\udcdd SAVE [".concat(n,"]: Preparing FullEnrich record"));const{data:o}=await En.from("api_settings").select("id").eq("brand_id",e).eq("key_type","fullenrich_api_key").single(),a={id:(null===o||void 0===o?void 0:o.id)||crypto.randomUUID(),brand_id:e,created_by:s.id,account_name:"FullEnrich Global",key_type:"fullenrich_api_key",encrypted_key:Un(t.fullenrich),esp_provider:null,is_primary:!1,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()};r.push(a)}if(r.length>0){console.log("\ud83d\udce4 SAVE [".concat(n,"]: Upserting ").concat(r.length," records..."));const{data:e,error:t}=await En.from("api_settings").upsert(r,{onConflict:"id",ignoreDuplicates:!1}).select("id, account_name, brand_id");if(t)throw new Error("Upsert failed: ".concat(t.message));console.log("\u2705 SAVE [".concat(n,"]: Upserted ").concat((null===e||void 0===e?void 0:e.length)||0," records"))}if(o.length>0){console.log("\ud83e\uddf9 SAVE [".concat(n,"]: Cleaning up orphaned ESP records..."));const{error:t}=await En.from("api_settings").delete().eq("brand_id",e).eq("key_type","esp_api_key").not("id","in","(".concat(o.map(e=>'"'.concat(e,'"')).join(","),")"));t?console.warn("\u26a0\ufe0f SAVE [".concat(n,"]: Cleanup warning:"),t.message):console.log("\u2705 SAVE [".concat(n,"]: Cleanup completed"))}return console.log("\u2705 SAVE [".concat(n,"]: Save completed successfully")),!0}catch(U){throw console.error("\u274c SAVE [".concat(n,"]: Save failed:"),U),U}},Pn=(e,t)=>{console.log("\ud83d\udcdd Updating account ".concat(e,":"),t),ee(n=>c(c({},n),{},{accounts:n.accounts.map(n=>n.id===e?c(c({},n),t):n)})),t.esp&&t.esp.key&&console.log('\u26a0\ufe0f Remember to click "Save API Keys" to persist changes to database')},Tn=(e,t)=>{if(e.account_id){const n=t.accounts.find(t=>t.id===e.account_id);if(n)return console.log('\ud83c\udfaf Using account "'.concat(n.name,'" for lead (account_id match)')),n}if(e.email_account_id){const n=t.accounts.find(t=>t.id===e.email_account_id);if(n)return console.log('\ud83c\udfaf Using account "'.concat(n.name,'" for lead (email_account_id match)')),n}const n=t.accounts.find(e=>e.is_primary);if(n)return console.log('\ud83c\udfaf Using primary account "'.concat(n.name,'" for lead (fallback)')),n;const r=t.accounts[0]||null;return r&&console.log('\ud83c\udfaf Using first account "'.concat(r.name,'" for lead (last resort)')),r},Rn=e=>"https://reidsickels.app.n8n.cloud/webhook/".concat(e),An=e=>{Mt(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},In=()=>Object.values(nn).reduce((e,t)=>e+(Array.isArray(t)?t.length:0),0),Fn=async(e,t)=>{try{const{error:n}=await En.from("retention_harbor").update({lead_category:t}).eq("id",e);if(n)throw n;u(n=>n.map(n=>n.id===e?c(c({},n),{},{lead_category:t,tags:[rt[t]||"Uncategorized"]}):n)),(null===lt||void 0===lt?void 0:lt.id)===e&&ct(e=>c(c({},e),{},{lead_category:t,tags:[rt[t]||"Uncategorized"]})),Je('Category updated to "'.concat(rt[t],'"'),"success",e)}catch(U){console.error("Error updating lead category:",U),Je("Error updating category: "+U.message,"error",e)}},Mn=e=>{var t;null!==(t=nn.urgency)&&void 0!==t&&t.includes(e)?gn("urgency",e):mn("urgency",e)};return(0,Ln.jsxs)("div",{className:"flex h-screen relative overflow-hidden transition-colors duration-300",style:{backgroundColor:Ke.primaryBg},children:[(0,Ln.jsx)("div",{className:"absolute top-0 left-0 right-0 h-12 z-20 flex items-center px-6 transition-colors duration-300",style:{backgroundColor:Ke.secondaryBg},children:(0,Ln.jsxs)("div",{className:"flex justify-between items-center w-full",children:[(0,Ln.jsxs)("div",{className:"flex space-x-4",children:[(0,Ln.jsx)("button",{onClick:()=>G("all"),className:"px-4 py-2 rounded-lg text-sm font-medium transition-all ".concat("all"===Q||"need_response"===Q||"recently_sent"===Q?"text-white":"hover:bg-white/5"),style:{backgroundColor:"all"===Q||"need_response"===Q||"recently_sent"===Q?"".concat(Ke.accent,"20"):"transparent",color:"all"===Q||"need_response"===Q||"recently_sent"===Q?Ke.accent:Ke.textPrimary},children:(0,Ln.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Ln.jsx)(m,{className:"w-4 h-4"}),"Inbox"]})}),(0,Ln.jsx)("div",{className:"relative recent-dropdown",children:(0,Ln.jsxs)("button",{ref:xe,onClick:()=>{if(Oe)Ae(!1),Ue(null);else{const e=xe.current;if(e){const t=e.getBoundingClientRect();Ue({top:t.bottom+8,left:t.left,width:t.width})}Ae(!0)}},className:"px-4 py-2 rounded-lg text-sm font-medium transition-all hover:bg-white/5 flex items-center gap-2",style:{color:Ke.textPrimary},children:[(0,Ln.jsx)(g,{className:"w-4 h-4"}),"Recent (",Le.length,")",(0,Ln.jsx)(y,{className:"w-3 h-3"})]})}),(0,Ln.jsx)("button",{onClick:()=>G("templates"),className:"px-4 py-2 rounded-lg text-sm font-medium transition-all ".concat("templates"===Q?"text-white":"hover:bg-white/5"),style:{backgroundColor:"templates"===Q?"".concat(Ke.accent,"20"):"transparent",color:"templates"===Q?Ke.accent:Ke.textPrimary},children:(0,Ln.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Ln.jsx)(v,{className:"w-4 h-4"}),"Templates"]})}),(0,Ln.jsx)("button",{onClick:()=>G("crm"),className:"px-4 py-2 rounded-lg text-sm font-medium transition-all ".concat("crm"===Q?"text-white":"hover:bg-white/5"),style:{backgroundColor:"crm"===Q?"".concat(Ke.accent,"20"):"transparent",color:"crm"===Q?Ke.accent:Ke.textPrimary},children:(0,Ln.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Ln.jsx)(x,{className:"w-4 h-4"}),"CRM"]})}),(0,Ln.jsx)("button",{onClick:()=>G("analytics"),className:"px-4 py-2 rounded-lg text-sm font-medium transition-all ".concat("analytics"===Q?"text-white":"hover:bg-white/5"),style:{backgroundColor:"analytics"===Q?"".concat(Ke.accent,"20"):"transparent",color:"analytics"===Q?Ke.accent:Ke.textPrimary},children:(0,Ln.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Ln.jsx)(x,{className:"w-4 h-4"}),"Analytics"]})})]}),(0,Ln.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Ln.jsx)("button",{onClick:()=>X(!0),className:"px-4 py-2 rounded-lg text-sm font-medium transition-all ".concat(Y?"text-white":"hover:bg-white/5"),style:{backgroundColor:Y?"".concat(Ke.accent,"20"):"transparent",color:Y?Ke.accent:Ke.textPrimary},children:(0,Ln.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Ln.jsx)(b,{className:"w-4 h-4"}),"API Settings"]})}),s&&(0,Ln.jsxs)("div",{className:"flex items-center space-x-2 px-3 py-1 rounded-lg text-sm",style:{backgroundColor:Ke.tertiaryBg,color:Ke.textPrimary},children:[(0,Ln.jsx)(w,{className:"w-4 h-4"}),(0,Ln.jsx)("span",{className:"hidden sm:inline",children:s.email})]}),(0,Ln.jsx)("button",{onClick:()=>{const e=!Ce;Ee(e),localStorage.setItem("inbox_manager_theme",e?"dark":"light"),window.dispatchEvent(new CustomEvent("themeChanged")),Je("Switched to ".concat(e?"dark":"light"," mode"),"success")},className:"px-3 py-2 rounded-lg text-sm font-medium transition-all hover:bg-white/5 flex items-center gap-2",style:{color:Ke.textPrimary},title:"Switch to ".concat(Ce?"light":"dark"," mode"),children:Ce?(0,Ln.jsxs)(Ln.Fragment,{children:[(0,Ln.jsx)("span",{className:"text-lg",children:"\u2600\ufe0f"}),(0,Ln.jsx)("span",{className:"hidden sm:inline",children:"Light"})]}):(0,Ln.jsxs)(Ln.Fragment,{children:[(0,Ln.jsx)("span",{className:"text-lg",children:"\ud83c\udf19"}),(0,Ln.jsx)("span",{className:"hidden sm:inline",children:"Dark"})]})}),s&&i&&(0,Ln.jsxs)("button",{onClick:i,className:"px-3 py-2 rounded-lg text-sm font-medium transition-all hover:bg-red-500/10 flex items-center gap-2",style:{color:"#ef4444"},title:"Sign out",children:[(0,Ln.jsx)(k,{className:"w-4 h-4"}),(0,Ln.jsx)("span",{className:"hidden sm:inline",children:"Sign Out"})]})]})]})}),Y&&(0,Ln.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[20000] p-4",children:(0,Ln.jsxs)("div",{className:"rounded-xl shadow-xl max-w-2xl w-full overflow-hidden transition-colors duration-300",style:{backgroundColor:Ke.primaryBg,border:"1px solid ".concat(Ke.border)},children:[(0,Ln.jsx)("div",{className:"p-6 border-b transition-colors duration-300",style:{borderColor:Ke.border},children:(0,Ln.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Ln.jsxs)("h2",{className:"text-xl font-semibold flex items-center gap-2 transition-colors duration-300",style:{color:Ke.textPrimary},children:[(0,Ln.jsx)(b,{className:"w-5 h-5",style:{color:Ke.accent}}),"API Settings"]}),(0,Ln.jsx)("button",{onClick:()=>X(!1),className:"transition-colors duration-300 hover:opacity-80",style:{color:Ke.textMuted},children:(0,Ln.jsx)(_,{className:"w-5 h-5"})})]})}),(0,Ln.jsxs)("div",{className:"p-6 space-y-6",children:[(0,Ln.jsxs)("div",{className:"rounded-lg p-3 transition-colors duration-300",style:{backgroundColor:Ke.tertiaryBg,border:"1px solid ".concat(Ke.success,"40")},children:[(0,Ln.jsxs)("div",{className:"flex items-center gap-2 text-sm",style:{color:Ke.success},children:[(0,Ln.jsx)(f,{className:"w-4 h-4"}),(0,Ln.jsx)("span",{className:"font-medium",children:"Secure Storage Enabled"})]}),(0,Ln.jsx)("p",{className:"text-xs mt-1",style:{color:"".concat(Ke.success,"CC")},children:"API keys are encrypted before storage for enhanced security"})]}),(0,Ln.jsxs)("div",{className:"space-y-4",children:[(0,Ln.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ln.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Ln.jsx)(m,{className:"w-4 h-4",style:{color:Ke.accent}}),(0,Ln.jsx)("h3",{className:"font-medium transition-colors duration-300",style:{color:Ke.accent},children:"Email Accounts"})]}),(0,Ln.jsxs)("button",{onClick:()=>{const e={id:crypto.randomUUID(),name:"Account ".concat(Z.accounts.length+1),esp:{provider:"",key:""},is_primary:0===Z.accounts.length};ee(t=>c(c({},t),{},{accounts:[...t.accounts,e]}))},className:"px-3 py-1 rounded-lg text-sm font-medium transition-all hover:opacity-80 flex items-center gap-2",style:{backgroundColor:Ke.accent,color:Ce?"#1A1C1A":"#FFFFFF"},children:[(0,Ln.jsx)("span",{className:"text-lg",children:"+"})," Add Account"]})]}),(0,Ln.jsxs)("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:[Z.accounts.map((e,t)=>(0,Ln.jsxs)("div",{className:"p-4 rounded-lg transition-colors duration-300",style:{backgroundColor:Ke.secondaryBg,border:"1px solid ".concat(Ke.border)},children:[(0,Ln.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,Ln.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Ln.jsx)("input",{type:"text",value:e.name,onChange:t=>Pn(e.id,{name:t.target.value}),className:"bg-transparent font-medium border-none outline-none text-sm transition-colors duration-300",style:{color:Ke.textPrimary},placeholder:"Account Name"}),e.is_primary&&(0,Ln.jsx)("span",{className:"px-2 py-1 text-xs rounded-full font-medium",style:{backgroundColor:Ke.accent,color:Ce?"#1A1C1A":"#FFFFFF"},children:"Primary"})]}),(0,Ln.jsxs)("div",{className:"flex items-center gap-2",children:[!e.is_primary&&(0,Ln.jsx)("button",{onClick:()=>{return t=e.id,void ee(e=>c(c({},e),{},{accounts:e.accounts.map(e=>c(c({},e),{},{is_primary:e.id===t}))}));var t},className:"px-2 py-1 text-xs rounded-lg transition-all hover:opacity-80",style:{border:"1px solid ".concat(Ke.border),color:Ke.textMuted},children:"Set Primary"}),Z.accounts.length>1&&(0,Ln.jsx)("button",{onClick:()=>(async e=>{const t=Date.now();console.log("\ud83d\uddd1\ufe0f BULLETPROOF REMOVE [".concat(t,"]: Removing account ").concat(e));try{const r=Z.accounts.filter(t=>t.id!==e);r.length>0&&!r.some(e=>e.is_primary)&&(r[0].is_primary=!0,console.log("\ud83c\udfaf REMOVE [".concat(t,"]: Set new primary account")));const o=c(c({},Z),{},{accounts:r});if(ee(o),localStorage.setItem("apiKeys_accounts",JSON.stringify(r)),console.log("\ud83d\udcbe REMOVE [".concat(t,"]: Updated localStorage")),Ye&&s){console.log("\ud83d\ude80 REMOVE [".concat(t,"]: Background sync to Supabase..."));try{await Cn(Ye,o),console.log("\u2705 REMOVE [".concat(t,"]: Supabase sync successful")),Je("Account removed successfully","success")}catch(n){console.error("\u274c REMOVE [".concat(t,"]: Supabase sync failed:"),n),Je("Account removed locally (cloud sync will retry)","warning")}}else Je("Account removed successfully","success")}catch(U){console.error("\u274c REMOVE [".concat(t,"]: Remove operation failed:"),U),Je("Failed to remove account: ".concat(U.message),"error")}})(e.id),className:"px-2 py-1 text-xs rounded-lg transition-all hover:opacity-80",style:{border:"1px solid ".concat(Ke.error,"40"),color:Ke.error},children:"Remove"})]})]}),(0,Ln.jsx)("div",{className:"grid grid-cols-3 gap-2 mb-3",children:["Email Bison","Smartlead","Instantly"].map(t=>{const n=e.esp.provider===t.toLowerCase().replace(" ","_");return(0,Ln.jsx)("button",{onClick:()=>Pn(e.id,{esp:c(c({},e.esp),{},{provider:t.toLowerCase().replace(" ","_")})}),className:"px-3 py-2 rounded-lg text-xs font-medium transition-all",style:{backgroundColor:n?"".concat(Ke.accent,"20"):Ke.tertiaryBg,border:"1px solid ".concat(n?Ke.accent:Ke.border),color:n?Ke.accent:Ke.textPrimary},children:t},t)})}),e.esp.provider&&(0,Ln.jsxs)("div",{className:"space-y-2",children:[(0,Ln.jsxs)("label",{className:"text-xs transition-colors duration-300",style:{color:Ke.textMuted},children:[e.esp.provider.charAt(0).toUpperCase()+e.esp.provider.slice(1).replace("_"," ")," API Key"]}),(0,Ln.jsx)("input",{type:"password",value:e.esp.key,onChange:t=>Pn(e.id,{esp:c(c({},e.esp),{},{key:t.target.value})}),className:"w-full px-3 py-2 rounded-lg text-sm transition-all focus:ring-1",style:{backgroundColor:Ke.primaryBg,border:"1px solid ".concat(Ke.border),color:Ke.textPrimary,"--tw-ring-color":Ke.accent},placeholder:"Enter ".concat(e.esp.provider.replace("_"," ")," API key")})]}),(0,Ln.jsxs)("div",{className:"space-y-2 pt-3 mt-3 border-t transition-colors duration-300",style:{borderColor:Ke.border},children:[(0,Ln.jsx)("label",{className:"text-xs transition-colors duration-300",style:{color:Ke.textMuted},children:"Webhook URL for this account"}),(0,Ln.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Ln.jsx)("input",{type:"text",value:Rn(e.id),readOnly:!0,className:"flex-1 px-3 py-2 rounded-lg text-sm transition-all",style:{backgroundColor:Ke.tertiaryBg,border:"1px solid ".concat(Ke.border),color:Ke.textPrimary}}),(0,Ln.jsxs)("button",{onClick:()=>(e=>{const t=Rn(e);navigator.clipboard.writeText(t).then(()=>{le({type:"success",message:"Webhook URL copied to clipboard!"}),se(!0),setTimeout(()=>se(!1),3e3)}).catch(()=>{le({type:"error",message:"Failed to copy webhook URL"}),se(!0),setTimeout(()=>se(!1),3e3)})})(e.id),className:"px-3 py-2 rounded-lg text-sm font-medium transition-all hover:opacity-80 flex items-center gap-1",style:{backgroundColor:Ke.accent,color:Ce?"#1A1C1A":"#FFFFFF"},children:[(0,Ln.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ln.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),"Copy"]})]}),(0,Ln.jsx)("p",{className:"text-xs transition-colors duration-300",style:{color:Ke.textMuted},children:"Use this URL in your email platform's webhook settings"})]})]},e.id)),0===Z.accounts.length&&(0,Ln.jsxs)("div",{className:"text-center py-8 transition-colors duration-300",style:{color:Ke.textMuted},children:[(0,Ln.jsx)(m,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),(0,Ln.jsx)("p",{className:"text-sm",children:"No email accounts configured"}),(0,Ln.jsx)("p",{className:"text-xs mt-1",children:'Click "Add Account" to get started'})]})]})]}),(0,Ln.jsxs)("div",{className:"space-y-4 pt-6 mt-6 border-t transition-colors duration-300",style:{borderColor:Ke.border},children:[(0,Ln.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Ln.jsx)(j,{className:"w-4 h-4",style:{color:Ke.accent}}),(0,Ln.jsx)("h3",{className:"font-medium transition-colors duration-300",style:{color:Ke.accent},children:"Data Enrichment"})]}),(0,Ln.jsxs)("div",{className:"space-y-2",children:[(0,Ln.jsx)("label",{className:"text-sm transition-colors duration-300",style:{color:Ke.textMuted},children:"Full Enrich API Key"}),(0,Ln.jsxs)("div",{className:"relative",children:[(0,Ln.jsx)("input",{type:"password",value:Z.fullenrich,onChange:e=>{return t="fullenrich",n=e.target.value,void("fullenrich"===t&&ee(e=>c(c({},e),{},{fullenrich:n})));var t,n},className:"w-full px-4 py-2 rounded-lg transition-all focus:ring-1",style:{backgroundColor:Ke.primaryBg,border:"1px solid ".concat(Ke.border),color:Ke.textPrimary,"--tw-ring-color":Ke.accent},placeholder:"Enter Full Enrich API key"}),!0===te.fullenrich&&(0,Ln.jsx)(f,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5",style:{color:Ke.success}})]}),(0,Ln.jsx)("p",{className:"text-xs mt-2 transition-colors duration-300",style:{color:Ke.textMuted},children:"Used for finding phone numbers, company data, and social profiles"})]})]})]}),(0,Ln.jsxs)("div",{className:"p-6 border-t flex justify-end gap-3 transition-colors duration-300",style:{backgroundColor:Ke.primaryBg,borderColor:Ke.border},children:[(0,Ln.jsx)("button",{onClick:()=>X(!1),className:"px-4 py-2 rounded-lg text-sm transition-all hover:opacity-80",style:{color:Ke.textPrimary,backgroundColor:Ke.tertiaryBg},children:"Cancel"}),(0,Ln.jsx)("button",{onClick:async()=>{const e=Date.now();console.log("\ud83d\udcbe BULLETPROOF DUAL SAVE [".concat(e,"]: Starting dual save operation...")),oe(!0);let t=!1,n=!1;try{console.log("1\ufe0f\u20e3 DUAL SAVE [".concat(e,"]: Saving to localStorage..."));try{localStorage.setItem("apiKeys_accounts",JSON.stringify(Z.accounts)),localStorage.setItem("apiKeys_fullenrich",Z.fullenrich||""),localStorage.setItem("apiKeys_lastSync",(new Date).toISOString());const n=Z.accounts.find(e=>e.is_primary)||Z.accounts[0];n&&(localStorage.setItem("esp_provider",n.esp.provider||""),localStorage.setItem("esp_api_key_enc",Un(n.esp.key||""))),localStorage.setItem("fullenrich_api_key_enc",Un(Z.fullenrich||"")),t=!0,console.log("\u2705 DUAL SAVE [".concat(e,"]: localStorage save successful"))}catch(r){throw console.error("\u274c DUAL SAVE [".concat(e,"]: localStorage save failed:"),r),new Error("localStorage save failed: ".concat(r.message))}if(Ye&&s){console.log("2\ufe0f\u20e3 DUAL SAVE [".concat(e,"]: Saving to Supabase..."));try{n=await Cn(Ye,Z),console.log("\u2705 DUAL SAVE [".concat(e,"]: Supabase save successful"))}catch(o){console.error("\u274c DUAL SAVE [".concat(e,"]: Supabase save failed:"),o),Je("Warning: Saved locally but cloud sync failed: ".concat(o.message),"warning")}}else console.log("\u26a0\ufe0f DUAL SAVE [".concat(e,"]: No brandId/user - localStorage only"));ee(e=>c(c({},e),{},{_lastSync:t?(new Date).toISOString():e._lastSync,_hasError:!1}));le({type:"success",message:n?"API keys saved to account & locally":t?"API keys saved locally (cloud sync will retry)":"API keys saved successfully"}),se(!0),setTimeout(()=>se(!1),3e3),X(!1),console.log("\u2705 DUAL SAVE [".concat(e,"]: Operation completed - localStorage: ").concat(t,", Supabase: ").concat(n))}catch(U){console.error("\u274c DUAL SAVE [".concat(e,"]: Operation failed:"),U),ee(e=>c(c({},e),{},{_hasError:!0})),le({type:"error",message:"Failed to save API keys: ".concat(U.message)}),se(!0),setTimeout(()=>se(!1),5e3)}finally{oe(!1)}},disabled:re,className:"px-4 py-2 rounded-lg font-medium transition-all text-sm flex items-center gap-2 disabled:opacity-50 hover:opacity-90",style:{backgroundColor:Ke.accent,color:Ce?"#1A1C1A":"#FFFFFF"},children:re?(0,Ln.jsxs)(Ln.Fragment,{children:[(0,Ln.jsx)(S,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):(0,Ln.jsxs)(Ln.Fragment,{children:[(0,Ln.jsx)(N,{className:"w-4 h-4"}),"Save API Keys"]})}),(0,Ln.jsx)("p",{className:"text-xs mt-2 transition-colors duration-300",style:{color:Ke.textMuted},children:'\ud83d\udca1 Remember to click "Save API Keys" after adding or updating keys to save them to your account'})]})]})}),ae&&(0,Ln.jsx)("div",{className:"fixed top-4 right-4 z-50 animate-slideIn",children:(0,Ln.jsxs)("div",{className:"rounded-lg shadow-lg p-4 text-sm font-medium flex items-center gap-2 ".concat("success"===ie.type?"bg-green-400 text-green-900":"bg-red-400 text-red-900"),children:["success"===ie.type?(0,Ln.jsx)(f,{className:"w-4 h-4"}):(0,Ln.jsx)(C,{className:"w-4 h-4"}),ie.message]})}),(0,Ln.jsx)("div",{className:"fixed top-4 right-4 z-50 flex flex-col-reverse gap-2",children:je.map(e=>(0,Ln.jsxs)("div",{className:"flex items-center gap-2 px-4 py-3 rounded-lg shadow-lg cursor-pointer transition-all transform hover:scale-102 min-w-[200px]",style:{backgroundColor:"success"===e.type?"".concat(Ke.success,"20"):"".concat(Ke.error,"20"),border:"1px solid ".concat("success"===e.type?Ke.success:Ke.error),backdropFilter:"blur(8px)",animation:"slideIn 0.2s ease-out"},onClick:()=>{if(e.leadId){const t=l.find(t=>t.id===e.leadId);t&&(ct(t),$e(e.id))}},children:["success"===e.type?(0,Ln.jsx)(f,{className:"w-5 h-5 shrink-0",style:{color:Ke.success}}):(0,Ln.jsx)(C,{className:"w-5 h-5 shrink-0",style:{color:Ke.error}}),(0,Ln.jsx)("span",{className:"text-sm font-medium flex-1 transition-colors duration-300",style:{color:Ke.textPrimary},children:e.message}),(0,Ln.jsx)("button",{onClick:t=>{t.stopPropagation(),$e(e.id)},className:"ml-2 shrink-0 hover:opacity-80 transition-colors duration-300",style:{color:Ke.textMuted},children:(0,Ln.jsx)(_,{className:"w-4 h-4"})})]},e.id))}),(0,Ln.jsx)("style",{jsx:!0,global:!0,children:"\n        @keyframes slideIn {\n          from {\n            transform: translateX(100%);\n            opacity: 0;\n          }\n          to {\n            transform: translateX(0);\n            opacity: 1;\n          }\n        }\n        \n        @keyframes glow {\n          0% { opacity: 0.5; }\n          100% { opacity: 1; }\n        }\n        \n        /* Theme transition animations */\n        * {\n          transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;\n        }\n        \n        /* Custom scrollbar for theme */\n        ::-webkit-scrollbar {\n          width: 8px;\n        }\n        \n        ::-webkit-scrollbar-track {\n          background: ".concat(Ce?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.1)",";\n          border-radius: 4px;\n        }\n        \n        ::-webkit-scrollbar-thumb {\n          background: ").concat(Ke.accent,";\n          border-radius: 4px;\n        }\n        \n        ::-webkit-scrollbar-thumb:hover {\n          background: ").concat(Ke.accent,"CC;\n        }\n\n        /* Placeholder text for contenteditable */\n        div[contenteditable]:empty:before {\n          content: attr(data-placeholder);\n          color: ").concat(Ke.textMuted,";\n          font-style: italic;\n          pointer-events: none;\n          white-space: pre-line;\n        }\n\n        /* Simple list styling for contenteditable */\n        div[contenteditable] ul {\n          margin: 8px 0;\n          padding-left: 20px;\n          list-style-type: disc;\n        }\n\n        div[contenteditable] ul li {\n          margin: 2px 0;\n          line-height: 1.5;\n        }\n\n        div[contenteditable] ol {\n          margin: 8px 0;\n          padding-left: 20px;\n          list-style-type: decimal;\n        }\n\n        div[contenteditable] ol li {\n          margin: 2px 0;\n          line-height: 1.5;\n        }\n      ")}),(0,Ln.jsxs)("div",{className:"flex-1 flex mt-12",children:["analytics"===Q&&(0,Ln.jsx)("div",{className:"flex-1 p-8 overflow-y-auto transition-colors duration-300",style:{backgroundColor:Ke.primaryBg},children:(0,Ln.jsxs)("div",{className:"max-w-7xl mx-auto space-y-8",children:[(0,Ln.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Ln.jsxs)("div",{children:[(0,Ln.jsx)("h1",{className:"text-3xl font-bold transition-colors duration-300",style:{color:Ke.textPrimary},children:"Analytics Dashboard"}),(0,Ln.jsx)("p",{className:"mt-2 transition-colors duration-300",style:{color:Ke.textSecondary},children:"Insights and performance metrics for your lead management"})]}),(0,Ln.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Ln.jsx)("span",{className:"text-sm transition-colors duration-300",style:{color:Ke.textSecondary},children:"Show data for:"}),(0,Ln.jsxs)("select",{value:Dt,onChange:e=>Bt(e.target.value),className:"px-3 py-2 rounded-lg text-sm transition-colors duration-300",style:{backgroundColor:Ke.secondaryBg,border:"1px solid ".concat(Ke.border),color:Ke.textPrimary},children:[(0,Ln.jsx)("option",{value:"7",children:"Last 7 days"}),(0,Ln.jsx)("option",{value:"30",children:"Last 30 days"}),(0,Ln.jsx)("option",{value:"90",children:"Last 90 days"}),(0,Ln.jsx)("option",{value:"365",children:"Last year"})]})]})]}),vn?(0,Ln.jsxs)(Ln.Fragment,{children:[(0,Ln.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,Ln.jsx)("div",{className:"p-6 rounded-2xl shadow-lg transition-colors duration-300",style:{backgroundColor:Ke.secondaryBg,border:"1px solid ".concat(Ke.border)},children:(0,Ln.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ln.jsxs)("div",{children:[(0,Ln.jsx)("p",{className:"text-sm transition-colors duration-300",style:{color:Ke.textMuted},children:"Total Leads"}),(0,Ln.jsx)("p",{className:"text-2xl font-bold transition-colors duration-300",style:{color:Ke.textPrimary},children:vn.totalLeads.toLocaleString()})]}),(0,Ln.jsx)(E,{className:"w-8 h-8 transition-colors duration-300",style:{color:Ke.accent}})]})}),(0,Ln.jsx)("div",{className:"p-6 rounded-2xl shadow-lg transition-colors duration-300",style:{backgroundColor:Ke.secondaryBg,border:"1px solid ".concat(Ke.border)},children:(0,Ln.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ln.jsxs)("div",{children:[(0,Ln.jsx)("p",{className:"text-sm transition-colors duration-300",style:{color:Ke.textMuted},children:"Engagement Rate"}),(0,Ln.jsxs)("p",{className:"text-2xl font-bold transition-colors duration-300",style:{color:Ke.success},children:[vn.engagementRate.toFixed(1),"%"]}),(0,Ln.jsx)("p",{className:"text-xs transition-colors duration-300",style:{color:Ke.textMuted},children:"Leads with 2+ replies"})]}),(0,Ln.jsx)(P,{className:"w-8 h-8 transition-colors duration-300",style:{color:Ke.success}})]})}),(0,Ln.jsx)("div",{className:"p-6 rounded-2xl shadow-lg transition-colors duration-300",style:{backgroundColor:Ke.secondaryBg,border:"1px solid ".concat(Ke.border)},children:(0,Ln.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ln.jsxs)("div",{children:[(0,Ln.jsx)("p",{className:"text-sm transition-colors duration-300",style:{color:Ke.textMuted},children:"Avg Response Time"}),(0,Ln.jsx)("p",{className:"text-2xl font-bold transition-colors duration-300",style:{color:Ke.accent},children:Nn(vn.avgResponseTime)})]}),(0,Ln.jsx)(g,{className:"w-8 h-8 transition-colors duration-300",style:{color:Ke.accent}})]})}),(0,Ln.jsx)("div",{className:"p-6 rounded-2xl shadow-lg transition-colors duration-300",style:{backgroundColor:Ke.secondaryBg,border:"1px solid ".concat(Ke.border)},children:(0,Ln.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ln.jsxs)("div",{children:[(0,Ln.jsx)("p",{className:"text-sm transition-colors duration-300",style:{color:Ke.textMuted},children:"Avg Replies per Lead"}),(0,Ln.jsx)("p",{className:"text-2xl font-bold transition-colors duration-300",style:{color:Ke.textPrimary},children:vn.avgRepliesPerLead.toFixed(1)}),(0,Ln.jsxs)("p",{className:"text-xs transition-colors duration-300",style:{color:Ke.textMuted},children:[vn.totalReplies," total replies"]})]}),(0,Ln.jsx)(T,{className:"w-8 h-8 transition-colors duration-300",style:{color:Ke.accent}})]})})]}),(0,Ln.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,Ln.jsxs)("div",{className:"p-6 rounded-2xl shadow-lg transition-colors duration-300",style:{backgroundColor:Ke.secondaryBg,border:"1px solid ".concat(Ke.border)},children:[(0,Ln.jsx)("h3",{className:"text-xl font-bold mb-4 transition-colors duration-300",style:{color:Ke.textPrimary},children:"Response Time Distribution"}),(0,Ln.jsx)("div",{className:"space-y-3",children:Object.entries(vn.responseTimeDistribution).map(e=>{let[t,n]=e;const r=Object.values(vn.responseTimeDistribution).reduce((e,t)=>e+t,0),o=r>0?n/r*100:0,a={under1h:"Under 1 hour","1to4h":"1-4 hours","4to24h":"4-24 hours",over24h:"Over 24 hours"}[t];return(0,Ln.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ln.jsx)("span",{className:"text-sm transition-colors duration-300",style:{color:Ke.textSecondary},children:a}),(0,Ln.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Ln.jsx)("div",{className:"w-32 rounded-full h-2 transition-colors duration-300",style:{backgroundColor:Ke.tertiaryBg},children:(0,Ln.jsx)("div",{className:"h-2 rounded-full transition-all duration-500",style:{width:"".concat(o,"%"),backgroundColor:Ke.accent}})}),(0,Ln.jsx)("span",{className:"text-sm font-medium w-12 text-right transition-colors duration-300",style:{color:Ke.textPrimary},children:n})]})]},t)})})]}),(0,Ln.jsxs)("div",{className:"p-6 rounded-2xl shadow-lg transition-colors duration-300",style:{backgroundColor:Ke.secondaryBg,border:"1px solid ".concat(Ke.border)},children:[(0,Ln.jsx)("h3",{className:"text-xl font-bold mb-4 transition-colors duration-300",style:{color:Ke.textPrimary},children:"Average Replies by Intent Level"}),(0,Ln.jsx)("div",{className:"space-y-4",children:vn.intentCorrelation.map((e,t)=>(0,Ln.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ln.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Ln.jsx)("span",{className:"text-sm transition-colors duration-300",style:{color:Ke.textSecondary},children:e.intent}),(0,Ln.jsxs)("span",{className:"text-xs px-2 py-1 rounded-full transition-colors duration-300",style:{backgroundColor:Ke.tertiaryBg,color:Ke.textMuted},children:[e.count," leads"]})]}),(0,Ln.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Ln.jsx)("div",{className:"w-32 rounded-full h-3 transition-colors duration-300",style:{backgroundColor:Ke.tertiaryBg},children:(0,Ln.jsx)("div",{className:"h-3 rounded-full transition-all duration-500",style:{width:"".concat(Math.min(20*e.avgReplies,100),"%"),backgroundColor:0===t?Ke.success:1===t?Ke.warning:Ke.accent}})}),(0,Ln.jsx)("span",{className:"text-sm font-bold w-12 text-right transition-colors duration-300",style:{color:Ke.textPrimary},children:e.avgReplies.toFixed(1)})]})]},t))})]})]}),(0,Ln.jsxs)("div",{className:"p-6 rounded-2xl shadow-lg transition-colors duration-300",style:{backgroundColor:Ke.secondaryBg,border:"1px solid ".concat(Ke.border)},children:[(0,Ln.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Ln.jsx)("h3",{className:"text-xl font-bold transition-colors duration-300",style:{color:Ke.textPrimary},children:"Reply Activity Heatmap"}),vn.peakHour&&vn.maxCount>0&&(0,Ln.jsxs)("div",{className:"text-sm transition-colors duration-300",style:{color:Ke.textSecondary},children:["Peak: ",vn.peakHour.dayName," at ",vn.peakHour.hour,":00 (",vn.maxCount," replies)"]})]}),(0,Ln.jsxs)("div",{className:"relative",children:[(0,Ln.jsx)("div",{className:"flex mb-2 ml-16",children:Array.from({length:24},(e,t)=>(0,Ln.jsx)("div",{className:"flex-1 text-center text-xs transition-colors duration-300",style:{color:Ke.textMuted},children:t%4===0?"".concat(t,":00"):""},t))}),["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].map((e,t)=>(0,Ln.jsxs)("div",{className:"flex items-center mb-1",children:[(0,Ln.jsx)("div",{className:"w-14 text-xs text-right mr-2 transition-colors duration-300",style:{color:Ke.textMuted},children:e.slice(0,3)}),(0,Ln.jsx)("div",{className:"flex flex-1 gap-1",children:Array.from({length:24},(n,r)=>{const o=vn.heatmapData.find(e=>e.day===(t+1)%7&&e.hour===r),a=vn.maxCount>0?((null===o||void 0===o?void 0:o.count)||0)/vn.maxCount:0;return(0,Ln.jsx)("div",{className:"flex-1 h-6 rounded-sm transition-all duration-300 hover:scale-110 cursor-pointer",style:{backgroundColor:a>0?"".concat(Ke.accent).concat(Math.floor(255*a).toString(16).padStart(2,"0")):Ke.tertiaryBg,border:"1px solid ".concat(Ke.border)},title:"".concat(e," ").concat(r,":00 - ").concat((null===o||void 0===o?void 0:o.count)||0," replies")},r)})})]},e)),(0,Ln.jsxs)("div",{className:"flex items-center justify-center mt-4 gap-4",children:[(0,Ln.jsx)("span",{className:"text-xs transition-colors duration-300",style:{color:Ke.textMuted},children:"Less"}),(0,Ln.jsx)("div",{className:"flex gap-1",children:[0,.2,.4,.6,.8,1].map((e,t)=>(0,Ln.jsx)("div",{className:"w-3 h-3 rounded-sm",style:{backgroundColor:e>0?"".concat(Ke.accent).concat(Math.floor(255*e).toString(16).padStart(2,"0")):Ke.tertiaryBg,border:"1px solid ".concat(Ke.border)}},t))}),(0,Ln.jsx)("span",{className:"text-xs transition-colors duration-300",style:{color:Ke.textMuted},children:"More"})]})]})]}),(0,Ln.jsxs)("div",{className:"p-6 rounded-2xl shadow-lg transition-colors duration-300",style:{backgroundColor:Ke.secondaryBg,border:"1px solid ".concat(Ke.border)},children:[(0,Ln.jsx)("h3",{className:"text-xl font-bold mb-6 transition-colors duration-300",style:{color:Ke.textPrimary},children:"What Works in Messages"}),(0,Ln.jsxs)("div",{className:"mb-8",children:[(0,Ln.jsx)("h4",{className:"text-sm font-medium mb-4 transition-colors duration-300",style:{color:Ke.textSecondary},children:"Message Length Impact"}),(0,Ln.jsx)("div",{className:"grid grid-cols-4 gap-4",children:vn.copyInsights.lengthBreakdown.map((e,t)=>{const n=e.messages>0?e.replies/e.messages*100:0;return(0,Ln.jsxs)("div",{className:"p-4 rounded-lg transition-colors duration-300",style:{backgroundColor:Ke.tertiaryBg},children:[(0,Ln.jsx)("div",{className:"text-sm font-medium mb-2 transition-colors duration-300",style:{color:Ke.textPrimary},children:e.range}),(0,Ln.jsxs)("div",{className:"text-2xl font-bold mb-1 transition-colors duration-300",style:{color:Ke.accent},children:[n.toFixed(1),"%"]}),(0,Ln.jsxs)("div",{className:"text-xs transition-colors duration-300",style:{color:Ke.textMuted},children:[e.messages," messages sent"]})]},t)})})]}),(0,Ln.jsxs)("div",{className:"mb-8",children:[(0,Ln.jsx)("h4",{className:"text-sm font-medium mb-4 transition-colors duration-300",style:{color:Ke.textSecondary},children:"Message Pattern Success"}),(0,Ln.jsx)("div",{className:"space-y-4",children:[{label:"Contains Questions",data:vn.copyInsights.withQuestions},{label:"Suggests Call/Meeting",data:vn.copyInsights.withCalls},{label:"Discusses Pricing",data:vn.copyInsights.withPricing},{label:"Value Proposition",data:vn.copyInsights.withValueProps}].map((e,t)=>{const n=e.data.total>0?e.data.success/e.data.total*100:0;return(0,Ln.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Ln.jsxs)("div",{className:"flex-1",children:[(0,Ln.jsxs)("div",{className:"flex justify-between mb-2",children:[(0,Ln.jsx)("span",{className:"text-sm transition-colors duration-300",style:{color:Ke.textPrimary},children:e.label}),(0,Ln.jsxs)("span",{className:"text-sm font-medium transition-colors duration-300",style:{color:Ke.accent},children:[n.toFixed(1),"% success"]})]}),(0,Ln.jsx)("div",{className:"h-2 rounded-full transition-colors duration-300",style:{backgroundColor:Ke.tertiaryBg},children:(0,Ln.jsx)("div",{className:"h-2 rounded-full transition-all duration-500",style:{width:"".concat(n,"%"),backgroundColor:Ke.accent}})})]}),(0,Ln.jsxs)("div",{className:"text-xs transition-colors duration-300",style:{color:Ke.textMuted},children:[e.data.success,"/",e.data.total," replies"]})]},t)})})]}),(0,Ln.jsxs)("div",{children:[(0,Ln.jsx)("h4",{className:"text-sm font-medium mb-4 transition-colors duration-300",style:{color:Ke.textSecondary},children:"Average Response Time by Pattern"}),(0,Ln.jsx)("div",{className:"grid grid-cols-4 gap-4",children:[{label:"Questions",time:vn.copyInsights.avgReplyTime.withQuestion},{label:"Call/Meeting",time:vn.copyInsights.avgReplyTime.withCall},{label:"Pricing",time:vn.copyInsights.avgReplyTime.withPricing},{label:"Value Prop",time:vn.copyInsights.avgReplyTime.withValueProp}].map((e,t)=>(0,Ln.jsxs)("div",{className:"p-4 rounded-lg transition-colors duration-300",style:{backgroundColor:Ke.tertiaryBg},children:[(0,Ln.jsx)("div",{className:"text-sm mb-2 transition-colors duration-300",style:{color:Ke.textPrimary},children:e.label}),(0,Ln.jsx)("div",{className:"text-xl font-bold transition-colors duration-300",style:{color:Ke.accent},children:Nn(e.time)})]},t))})]})]}),(0,Ln.jsxs)("div",{className:"p-6 rounded-2xl shadow-lg transition-colors duration-300",style:{backgroundColor:Ke.secondaryBg,border:"1px solid ".concat(Ke.border)},children:[(0,Ln.jsx)("h3",{className:"text-xl font-bold mb-4 transition-colors duration-300",style:{color:Ke.textPrimary},children:"Top Performing Campaigns"}),(0,Ln.jsx)("div",{className:"overflow-x-auto",children:(0,Ln.jsxs)("table",{className:"w-full",children:[(0,Ln.jsx)("thead",{children:(0,Ln.jsxs)("tr",{className:"border-b transition-colors duration-300",style:{borderColor:Ke.border},children:[(0,Ln.jsx)("th",{className:"text-left py-3 px-4 font-medium transition-colors duration-300",style:{color:Ke.textSecondary},children:"Campaign"}),(0,Ln.jsx)("th",{className:"text-left py-3 px-4 font-medium transition-colors duration-300",style:{color:Ke.textSecondary},children:"Leads"}),(0,Ln.jsx)("th",{className:"text-left py-3 px-4 font-medium transition-colors duration-300",style:{color:Ke.textSecondary},children:"Avg Engagement"}),(0,Ln.jsx)("th",{className:"text-left py-3 px-4 font-medium transition-colors duration-300",style:{color:Ke.textSecondary},children:"Avg Replies"}),(0,Ln.jsx)("th",{className:"text-left py-3 px-4 font-medium transition-colors duration-300",style:{color:Ke.textSecondary},children:"Avg Response Time"})]})}),(0,Ln.jsx)("tbody",{children:vn.campaignStats.slice(0,5).map((e,t)=>(0,Ln.jsxs)("tr",{className:"border-b transition-colors duration-300",style:{borderColor:Ke.border},children:[(0,Ln.jsx)("td",{className:"py-3 px-4 transition-colors duration-300",style:{color:Ke.textPrimary},children:e.name}),(0,Ln.jsx)("td",{className:"py-3 px-4 transition-colors duration-300",style:{color:Ke.textPrimary},children:e.totalLeads}),(0,Ln.jsx)("td",{className:"py-3 px-4",children:(0,Ln.jsxs)("span",{className:"px-2 py-1 rounded-full text-xs font-medium transition-colors duration-300",style:{backgroundColor:e.avgEngagement>=80?"".concat(Ke.success,"20"):e.avgEngagement>=50?"".concat(Ke.warning,"20"):"".concat(Ke.error,"20"),color:e.avgEngagement>=80?Ke.success:e.avgEngagement>=50?Ke.warning:Ke.error},children:[e.avgEngagement.toFixed(0),"%"]})}),(0,Ln.jsx)("td",{className:"py-3 px-4 transition-colors duration-300",style:{color:Ke.textPrimary},children:e.avgRepliesPerLead.toFixed(1)}),(0,Ln.jsx)("td",{className:"py-3 px-4 transition-colors duration-300",style:{color:Ke.textPrimary},children:e.avgResponseTime>0?Nn(e.avgResponseTime):"N/A"})]},t))})]})})]}),(0,Ln.jsxs)("div",{className:"p-6 rounded-2xl shadow-lg transition-colors duration-300",style:{backgroundColor:Ke.secondaryBg,border:"1px solid ".concat(Ke.border)},children:[(0,Ln.jsx)("h3",{className:"text-xl font-bold mb-4 transition-colors duration-300",style:{color:Ke.textPrimary},children:"Performance by Lead Category"}),(0,Ln.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:vn.categoryStats.map((e,t)=>(0,Ln.jsxs)("div",{className:"p-4 rounded-lg transition-colors duration-300",style:{backgroundColor:Ke.tertiaryBg,border:"1px solid ".concat(Ke.border)},children:[(0,Ln.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,Ln.jsx)("span",{className:"font-medium transition-colors duration-300",style:{color:Ke.textPrimary},children:e.category}),(0,Ln.jsxs)("span",{className:"text-sm transition-colors duration-300",style:{color:Ke.textMuted},children:[e.totalLeads," leads"]})]}),(0,Ln.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,Ln.jsx)("span",{className:"text-xs transition-colors duration-300",style:{color:Ke.textMuted},children:"Engagement:"}),(0,Ln.jsx)("div",{className:"flex-1 rounded-full h-2 transition-colors duration-300",style:{backgroundColor:Ke.tertiaryBg},children:(0,Ln.jsx)("div",{className:"h-2 rounded-full transition-all duration-500",style:{width:"".concat(e.avgEngagement,"%"),backgroundColor:Ke.success}})}),(0,Ln.jsxs)("span",{className:"text-xs font-bold w-10 text-right transition-colors duration-300",style:{color:Ke.textPrimary},children:[e.avgEngagement.toFixed(0),"%"]})]}),(0,Ln.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,Ln.jsxs)("span",{className:"transition-colors duration-300",style:{color:Ke.textMuted},children:["Avg replies: ",(0,Ln.jsx)("span",{className:"font-medium transition-colors duration-300",style:{color:Ke.textPrimary},children:e.avgRepliesPerLead.toFixed(1)})]}),(0,Ln.jsxs)("span",{className:"transition-colors duration-300",style:{color:Ke.textMuted},children:["Avg response: ",(0,Ln.jsx)("span",{className:"font-medium transition-colors duration-300",style:{color:Ke.textPrimary},children:e.avgResponseTime>0?Nn(e.avgResponseTime):"N/A"})]})]})]},t))})]})]}):(0,Ln.jsxs)("div",{className:"text-center py-12",children:[(0,Ln.jsx)(x,{className:"w-16 h-16 mx-auto mb-4 opacity-50 transition-colors duration-300",style:{color:Ke.textMuted}}),(0,Ln.jsx)("p",{className:"text-lg transition-colors duration-300",style:{color:Ke.textPrimary},children:"No data available"}),(0,Ln.jsx)("p",{className:"transition-colors duration-300",style:{color:Ke.textSecondary},children:"Lead data will appear here once you have conversations"})]})]})}),("inbox"===Q||"all"===Q||"need_response"===Q||"recently_sent"===Q)&&(0,Ln.jsxs)(Ln.Fragment,{children:[(0,Ln.jsx)("div",{className:"absolute inset-0 opacity-30 pointer-events-none",children:(0,Ln.jsx)("div",{className:"absolute inset-0 animate-pulse",style:{background:"radial-gradient(circle at 20% 50%, rgba(84, 252, 255, 0.1) 0%, transparent 50%), \n                        radial-gradient(circle at 80% 20%, rgba(34, 197, 94, 0.08) 0%, transparent 50%), \n                        radial-gradient(circle at 40% 80%, rgba(168, 85, 247, 0.06) 0%, transparent 50%)",animation:"gradientShift 8s ease-in-out infinite"}})}),(0,Ln.jsx)("div",{className:"absolute inset-0 pointer-events-none overflow-hidden",children:[...Array(6)].map((e,t)=>(0,Ln.jsx)("div",{className:"absolute w-1 h-1 rounded-full opacity-20",style:{backgroundColor:"#54FCFF",left:"".concat(100*Math.random(),"%"),top:"".concat(100*Math.random(),"%"),animation:"float ".concat(4+4*Math.random(),"s ease-in-out infinite"),animationDelay:"".concat(4*Math.random(),"s")}},t))}),(0,Ln.jsxs)("div",{className:"w-1/2 flex flex-col shadow-lg relative z-50 transition-colors duration-300",style:{backgroundColor:Ke.secondaryBg,borderRadius:"12px",margin:"8px",marginRight:"4px",backdropFilter:"blur(10px)",border:"1px solid ".concat(Ke.border)},children:[(0,Ln.jsxs)("div",{className:"p-6 relative transition-colors duration-300",style:{backgroundColor:Ke.tertiaryBg,borderRadius:"12px 12px 0 0",borderBottom:"1px solid ".concat(Ke.border)},children:[(0,Ln.jsx)("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 w-20 h-0.5 rounded-full",style:{background:"linear-gradient(90deg, transparent, ".concat(Ke.accent,", transparent)"),animation:"glow 2s ease-in-out infinite alternate"}}),(0,Ln.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Ln.jsxs)("h1",{className:"text-2xl font-bold relative transition-colors duration-300",style:{color:Ke.textPrimary},children:["Inbox Manager",(0,Ln.jsx)("div",{className:"absolute -bottom-1 left-0 w-full h-0.5 bg-gradient-to-r from-transparent to-transparent opacity-50",style:{background:"linear-gradient(90deg, transparent, ".concat(Ke.accent,", transparent)")}})]}),(0,Ln.jsxs)("button",{onClick:()=>It(!At),className:"text-sm transition-all duration-300 hover:scale-105 relative group",style:{color:Ke.accent},children:[(0,Ln.jsxs)("span",{className:"relative z-10",children:[At?"Hide":"Show"," Metrics"]}),(0,Ln.jsx)("div",{className:"absolute inset-0 rounded opacity-0 group-hover:opacity-20 transition-opacity duration-300",style:{backgroundColor:Ke.accent}})]})]}),At&&(0,Ln.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[(0,Ln.jsxs)("button",{onClick:()=>Mn("urgent-response"),className:"p-6 rounded-xl shadow-lg backdrop-blur-sm flex-1 text-left hover:scale-105 transition-all duration-300 cursor-pointer relative group active:animate-gradient-flash",style:{backgroundColor:"rgba(239, 68, 68, 0.5)"},children:[(0,Ln.jsx)("div",{className:"absolute inset-0 bg-red-400 rounded-xl opacity-0 group-hover:opacity-20 group-active:opacity-40 transition-opacity duration-300"}),(0,Ln.jsxs)("div",{className:"relative z-10",children:[(0,Ln.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,Ln.jsx)(C,{className:"w-4 h-4",style:{color:Ke.textPrimary}}),(0,Ln.jsx)("span",{className:"font-bold text-sm",style:{color:Ke.textPrimary},children:"\ud83d\udea8 URGENT"}),(null===(n=nn.urgency)||void 0===n?void 0:n.includes("urgent-response"))&&(0,Ln.jsx)("span",{className:"text-xs px-2 py-1 rounded-full",style:{backgroundColor:"".concat(Ke.textPrimary,"20"),color:Ke.textPrimary},children:"ACTIVE"})]}),(0,Ln.jsx)("div",{className:"text-2xl font-bold",style:{color:Ke.textPrimary},children:l.filter(e=>"urgent-response"===Ge(e)).length}),(0,Ln.jsx)("div",{className:"text-xs mt-1",style:{color:Ke.textSecondary},children:"Needs attention (they replied, 24h+ ago)"})]})]}),(0,Ln.jsxs)("button",{onClick:()=>Mn("needs-response"),className:"p-6 rounded-xl shadow-lg backdrop-blur-sm flex-1 text-left hover:scale-105 transition-all duration-300 cursor-pointer relative group active:animate-gradient-flash",style:{backgroundColor:"rgba(234, 179, 8, 0.5)"},children:[(0,Ln.jsx)("div",{className:"absolute inset-0 bg-yellow-400 rounded-xl opacity-0 group-hover:opacity-20 group-active:opacity-40 transition-opacity duration-300"}),(0,Ln.jsxs)("div",{className:"relative z-10",children:[(0,Ln.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,Ln.jsx)(E,{className:"w-4 h-4",style:{color:Ke.textPrimary}}),(0,Ln.jsx)("span",{className:"font-bold text-sm",style:{color:Ke.textPrimary},children:"\u26a1 NEEDS RESPONSE"}),(null===(o=nn.urgency)||void 0===o?void 0:o.includes("needs-response"))&&(0,Ln.jsx)("span",{className:"text-xs px-2 py-1 rounded-full",style:{backgroundColor:"".concat(Ke.textPrimary,"20"),color:Ke.textPrimary},children:"ACTIVE"})]}),(0,Ln.jsx)("div",{className:"text-2xl font-bold",style:{color:Ke.textPrimary},children:l.filter(e=>"needs-response"===Ge(e)).length}),(0,Ln.jsx)("div",{className:"text-xs mt-1",style:{color:Ke.textSecondary},children:"They replied, awaiting your response (<24h)"})]})]}),(0,Ln.jsxs)("button",{onClick:()=>Mn("needs-followup"),className:"p-6 rounded-xl shadow-lg backdrop-blur-sm flex-1 text-left hover:scale-105 transition-all duration-300 cursor-pointer relative group active:animate-gradient-flash",style:{backgroundColor:"rgba(34, 197, 94, 0.5)"},children:[(0,Ln.jsx)("div",{className:"absolute inset-0 bg-green-400 rounded-xl opacity-0 group-hover:opacity-20 group-active:opacity-40 transition-opacity duration-300"}),(0,Ln.jsxs)("div",{className:"relative z-10",children:[(0,Ln.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,Ln.jsx)(L,{className:"w-4 h-4",style:{color:Ke.textPrimary}}),(0,Ln.jsx)("span",{className:"font-bold text-sm",style:{color:Ke.textPrimary},children:"\ud83d\udcde NEEDS FOLLOWUP"}),(null===(a=nn.urgency)||void 0===a?void 0:a.includes("needs-followup"))&&(0,Ln.jsx)("span",{className:"text-xs px-2 py-1 rounded-full",style:{backgroundColor:"".concat(Ke.textPrimary,"20"),color:Ke.textPrimary},children:"ACTIVE"})]}),(0,Ln.jsx)("div",{className:"text-2xl font-bold",style:{color:Ke.textPrimary},children:l.filter(e=>"needs-followup"===Ge(e)).length}),(0,Ln.jsx)("div",{className:"text-xs mt-1",style:{color:Ke.textSecondary},children:"You sent last, no reply 3+ days"})]})]})]}),(0,Ln.jsxs)("div",{className:"relative mb-6",children:[(0,Ln.jsx)(R,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 transition-colors duration-300",style:{color:Ke.accent}}),(0,Ln.jsx)("input",{type:"text",placeholder:"Search leads, tags, emails...",value:Nt,onChange:e=>Ct(e.target.value),className:"w-full pl-10 pr-4 py-2 rounded-lg backdrop-blur-sm focus:ring-2 transition-colors duration-300",style:{backgroundColor:Ke.tertiaryBg,border:"1px solid ".concat(Ke.border),color:Ke.textPrimary,"--tw-ring-color":Ke.accent}})]}),(0,Ln.jsxs)("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[(0,Ln.jsxs)("div",{className:"relative",children:[(0,Ln.jsxs)("button",{onClick:()=>Yt(!Gt),className:"w-full flex items-center justify-between px-4 py-2 rounded-lg hover:opacity-80 backdrop-blur-sm transition-all",style:{backgroundColor:Ke.tertiaryBg,border:"1px solid ".concat(Ke.border)},children:[(0,Ln.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Ln.jsx)(x,{className:"w-4 h-4",style:{color:Ke.accent}}),(0,Ln.jsx)("span",{className:"text-sm font-medium",style:{color:Ke.textPrimary},children:"Sort"}),en.length>0&&(0,Ln.jsx)("span",{className:"px-2 py-1 rounded-full text-xs",style:{backgroundColor:"".concat(Ke.accent,"20"),color:Ke.accent},children:en.length})]}),(0,Ln.jsx)(y,{className:"w-4 h-4",style:{color:Ke.textMuted}})]}),Gt&&(0,Ln.jsx)("div",{className:"absolute top-full left-0 right-0 mt-2 rounded-lg shadow-lg z-50 max-h-96 overflow-y-auto transition-colors duration-300",style:{backgroundColor:Ke.primaryBg,border:"1px solid ".concat(Ke.border)},children:(0,Ln.jsxs)("div",{className:"p-4",children:[(0,Ln.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,Ln.jsx)("h4",{className:"font-medium transition-colors duration-300",style:{color:Ke.textPrimary},children:"Sort Options"}),(0,Ln.jsx)("button",{onClick:()=>Yt(!1),className:"transition-colors duration-300 hover:opacity-80",style:{color:Ke.textMuted},children:(0,Ln.jsx)(_,{className:"w-4 h-4"})})]}),en.length>0&&(0,Ln.jsxs)("div",{className:"mb-4",children:[(0,Ln.jsx)("h5",{className:"text-xs font-medium mb-2 transition-colors duration-300",style:{color:Ke.textSecondary},children:"ACTIVE SORTS"}),(0,Ln.jsx)("div",{className:"space-y-2",children:en.map((e,t)=>{const n=it.find(t=>t.field===e.field);return(0,Ln.jsxs)("div",{className:"flex items-center justify-between px-3 py-2 rounded-lg transition-colors duration-300",style:{backgroundColor:"".concat(Ke.accent,"20"),border:"1px solid ".concat(Ke.accent)},children:[(0,Ln.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Ln.jsx)("span",{className:"text-xs px-2 py-1 rounded transition-colors duration-300",style:{backgroundColor:Ke.accent,color:Ce?"#1A1C1A":"#FFFFFF"},children:t+1}),(0,Ln.jsx)("span",{className:"text-sm transition-colors duration-300",style:{color:Ke.textPrimary},children:null===n||void 0===n?void 0:n.label}),(0,Ln.jsx)("button",{onClick:()=>fn(e.field,"desc"===e.direction?"asc":"desc"),className:"text-xs hover:opacity-80 transition-colors duration-300",style:{color:Ke.accent},children:"desc"===e.direction?"\u2193":"\u2191"})]}),(0,Ln.jsx)("button",{onClick:()=>{return t=e.field,tn(e=>e.filter(e=>e.field!==t)),void(1===en.length&&tn([{field:"last_reply",direction:"desc"}]));var t},className:"hover:opacity-80 transition-colors duration-300",style:{color:Ke.textMuted},children:(0,Ln.jsx)(_,{className:"w-3 h-3"})})]},e.field)})})]}),(0,Ln.jsxs)("div",{children:[(0,Ln.jsx)("h5",{className:"text-xs font-medium mb-2 transition-colors duration-300",style:{color:Ke.textSecondary},children:"ADD SORT"}),(0,Ln.jsx)("div",{className:"space-y-1",children:it.map(e=>{const t=en.some(t=>t.field===e.field);return(0,Ln.jsxs)("button",{onClick:()=>!t&&fn(e.field),disabled:t,className:"w-full text-left px-3 py-2 rounded-lg text-sm transition-colors duration-300",style:{backgroundColor:Ke.tertiaryBg,color:t?Ke.textMuted:Ke.textPrimary,cursor:t?"not-allowed":"pointer"},children:[e.label,t&&(0,Ln.jsx)("span",{className:"text-xs ml-2",style:{color:Ke.textMuted},children:"(active)"})]},e.field)})})]})]})})]}),(0,Ln.jsxs)("div",{className:"relative",children:[(0,Ln.jsxs)("button",{onClick:()=>Zt(!Xt),className:"w-full flex items-center justify-between px-4 py-2 rounded-lg hover:opacity-80 backdrop-blur-sm transition-all",style:{backgroundColor:Ke.tertiaryBg,border:"1px solid ".concat(Ke.border)},children:[(0,Ln.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Ln.jsx)(O,{className:"w-4 h-4",style:{color:Ke.accent}}),(0,Ln.jsx)("span",{className:"text-sm font-medium",style:{color:Ke.textPrimary},children:"Filter"}),In()>0&&(0,Ln.jsx)("span",{className:"px-2 py-1 rounded-full text-xs",style:{backgroundColor:"".concat(Ke.accent,"20"),color:Ke.accent},children:In()})]}),(0,Ln.jsx)(y,{className:"w-4 h-4",style:{color:Ke.textMuted}})]}),Xt&&(0,Ln.jsx)("div",{className:"absolute top-full left-0 right-0 mt-2 rounded-lg shadow-lg z-50 max-h-96 overflow-y-auto transition-colors duration-300",style:{backgroundColor:Ke.primaryBg,border:"1px solid ".concat(Ke.border)},children:(0,Ln.jsxs)("div",{className:"p-4",children:[(0,Ln.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,Ln.jsx)("h4",{className:"font-medium transition-colors duration-300",style:{color:Ke.textPrimary},children:"Filter Options"}),(0,Ln.jsxs)("div",{className:"flex gap-2",children:[In()>0&&(0,Ln.jsx)("button",{onClick:()=>{rn({}),Zt(!1)},className:"text-xs transition-colors duration-300",style:{color:Ke.error},children:"Clear All"}),(0,Ln.jsx)("button",{onClick:()=>Zt(!1),className:"transition-colors duration-300 hover:opacity-80",style:{color:Ke.textMuted},children:(0,Ln.jsx)(_,{className:"w-4 h-4"})})]})]}),In()>0&&(0,Ln.jsxs)("div",{className:"mb-4",children:[(0,Ln.jsx)("h5",{className:"text-xs font-medium mb-2 transition-colors duration-300",style:{color:Ke.textSecondary},children:"ACTIVE FILTERS"}),(0,Ln.jsx)("div",{className:"flex flex-wrap gap-2",children:Object.entries(nn).map(e=>{let[t,n]=e;return(n||[]).map(e=>{const n=pn[t],r=null===n||void 0===n?void 0:n.options.find(t=>t.value===e);return r?(0,Ln.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs",style:{backgroundColor:Ke.accent,color:Ce?"#1A1C1A":"#FFFFFF"},children:[r.label,(0,Ln.jsx)("button",{onClick:()=>gn(t,e),className:"hover:opacity-80",children:(0,Ln.jsx)(_,{className:"w-3 h-3"})})]},"".concat(t,"-").concat(e)):null})})})]}),(0,Ln.jsx)("div",{className:"space-y-4",children:Object.entries(pn).map(e=>{let[t,n]=e;return(0,Ln.jsxs)("div",{children:[(0,Ln.jsx)("h5",{className:"text-xs font-medium mb-2 uppercase transition-colors duration-300",style:{color:Ke.textSecondary},children:n.label}),(0,Ln.jsx)("div",{className:"space-y-1",children:n.options.map(e=>{var n;const r=null===(n=nn[t])||void 0===n?void 0:n.includes(e.value);return(0,Ln.jsx)("button",{onClick:()=>{r?gn(t,e.value):mn(t,e.value)},className:"w-full text-left px-3 py-2 rounded-lg text-sm transition-colors duration-300",style:{backgroundColor:r?"".concat(Ke.accent,"20"):Ke.tertiaryBg,color:Ke.textPrimary,border:"1px solid ".concat(r?Ke.accent:Ke.border)},children:(0,Ln.jsxs)("div",{className:"flex items-center justify-between",children:[e.label,r&&(0,Ln.jsx)("span",{style:{color:Ke.accent},children:"\u2713"})]})},e.value)})})]},t)})})]})})]})]}),(0,Ln.jsxs)("div",{className:"flex gap-2 mb-6",children:[(0,Ln.jsx)("button",{onClick:()=>G("all"),className:"px-4 py-2 rounded-lg text-sm font-medium transition-all backdrop-blur-sm ".concat("all"===Q?"opacity-100":"opacity-80 hover:opacity-90"),style:{backgroundColor:"all"===Q?"".concat(Ke.accent,"20"):Ke.tertiaryBg,color:"all"===Q?Ke.accent:Ke.textPrimary,border:"1px solid ".concat(Ke.border)},disabled:h,children:h?(0,Ln.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Ln.jsx)(S,{className:"w-4 h-4 animate-spin"}),"Loading..."]}):"All Leads"}),(0,Ln.jsx)("button",{onClick:()=>G("need_response"),className:"px-4 py-2 rounded-lg text-sm font-medium transition-all backdrop-blur-sm ".concat("need_response"===Q?"opacity-100":"opacity-80 hover:opacity-90"),style:{backgroundColor:"need_response"===Q?"".concat(Ke.accent,"20"):Ke.tertiaryBg,color:"need_response"===Q?Ke.accent:Ke.textPrimary,border:"1px solid ".concat(Ke.border)},disabled:h,children:h?(0,Ln.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Ln.jsx)(S,{className:"w-4 h-4 animate-spin"}),"Loading..."]}):(0,Ln.jsxs)(Ln.Fragment,{children:["Need Response","need_response"!==Q&&(0,Ln.jsx)("span",{className:"ml-2 px-2 py-1 rounded-full text-xs",style:{backgroundColor:Ke.tertiaryBg,color:Ke.textMuted},children:l.filter(e=>(e=>{if(!e||0===e.length)return!1;const t=e[e.length-1];return t&&"REPLY"===t.type})(e.conversation)).length})]})}),(0,Ln.jsx)("button",{onClick:()=>G("recently_sent"),className:"px-4 py-2 rounded-lg text-sm font-medium transition-all backdrop-blur-sm ".concat("recently_sent"===Q?"opacity-100":"opacity-80 hover:opacity-90"),style:{backgroundColor:"recently_sent"===Q?"".concat(Ke.accent,"20"):Ke.tertiaryBg,color:"recently_sent"===Q?Ke.accent:Ke.textPrimary,border:"1px solid ".concat(Ke.border)},disabled:h,children:h?(0,Ln.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Ln.jsx)(S,{className:"w-4 h-4 animate-spin"}),"Loading..."]}):(0,Ln.jsxs)(Ln.Fragment,{children:["Recently Sent","recently_sent"!==Q&&(0,Ln.jsx)("span",{className:"ml-2 px-2 py-1 rounded-full text-xs",style:{backgroundColor:Ke.tertiaryBg,color:Ke.textMuted},children:l.filter(e=>{if(0===e.conversation.length)return!1;const t=e.conversation[e.conversation.length-1],n=Math.floor((new Date-new Date(t.time))/36e5);return"SENT"===t.type&&n<=24}).length})]})})]})]}),(0,Ln.jsx)("div",{className:"flex-1 overflow-y-auto overflow-x-hidden",style:{scrollbarWidth:"thin",scrollbarColor:"#54FCFF rgba(26, 28, 26, 0.5)",minHeight:0},children:(0,Ln.jsxs)("div",{className:"pb-4",children:[0===bn.length?(0,Ln.jsx)("div",{className:"text-center p-8 text-white",children:(0,Ln.jsx)("p",{children:"No leads found for current filter"})}):null,bn.map((e,t)=>{try{xn(e.intent),e.conversation&&e.conversation.length>0&&e.conversation[e.conversation.length-1];const n=Ge(e),r=((e,t)=>t.tags||[])(e.conversation,e),o=()=>"urgent-response"===n?(0,Ln.jsxs)("div",{className:"bg-red-600 text-white px-4 py-2 rounded-lg text-xs font-bold mb-3 shadow-lg relative overflow-hidden",children:[(0,Ln.jsx)("div",{className:"absolute inset-0 bg-white opacity-20 animate-pulse"}),(0,Ln.jsx)("span",{className:"relative z-10",children:"\ud83d\udea8 URGENT NEEDS RESPONSE"})]}):"needs-response"===n?(0,Ln.jsxs)("div",{className:"bg-red-500 text-white px-4 py-2 rounded-lg text-xs font-medium mb-3 shadow-md relative overflow-hidden",children:[(0,Ln.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white to-transparent opacity-10 transform -skew-x-12 animate-shimmer"}),(0,Ln.jsx)("span",{className:"relative z-10",children:"\u26a1 NEEDS RESPONSE"})]}):"needs-followup"===n?(0,Ln.jsxs)("div",{className:"bg-green-600 text-white px-4 py-2 rounded-lg text-xs font-medium mb-3 shadow-md relative overflow-hidden",children:[(0,Ln.jsx)("div",{className:"absolute inset-0 bg-white opacity-10 animate-pulse"}),(0,Ln.jsx)("span",{className:"relative z-10",children:"\ud83d\udcde NEEDS FOLLOWUP"})]}):null;return(0,Ln.jsxs)("div",{onClick:()=>{ct(e),fe([]),ge(null),ve(!1)},className:"p-5 cursor-pointer transition-all duration-300 ease-out relative m-2 rounded-lg group",style:{backgroundColor:(null===lt||void 0===lt?void 0:lt.id)===e.id?"".concat(Ke.accent,"20"):Ke.tertiaryBg,border:(null===lt||void 0===lt?void 0:lt.id)===e.id?"2px solid ".concat(Ke.accent,"80"):"1px solid ".concat(Ke.border),borderLeft:"none"!==n?"4px solid ".concat(Ke.accent):"1px solid ".concat(Ke.border),boxShadow:(null===lt||void 0===lt?void 0:lt.id)===e.id?"0 0 30px ".concat(Ke.accent,"30"):"none",animationDelay:"".concat(.1*t,"s"),backdropFilter:"blur(5px)"},children:[(0,Ln.jsx)("div",{className:"absolute inset-0 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none",style:{background:"linear-gradient(45deg, ".concat(Ke.accent,"10 0%, ").concat(Ke.accent,"05 100%)")}}),(0,Ln.jsxs)("div",{className:"relative z-10",children:[o(),(0,Ln.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,Ln.jsxs)("h3",{className:"transition-all duration-300 ".concat("none"!==n?"font-bold":"font-medium"," flex items-center gap-2"),style:{color:(null===lt||void 0===lt?void 0:lt.id)===e.id?Ke.accent:Ke.textPrimary},children:[(0,Ln.jsxs)("span",{children:[e.first_name," ",e.last_name]}),"none"!==n&&(0,Ln.jsx)("span",{className:"text-sm animate-pulse",style:{color:Ke.error},children:"\u25cf"}),Pe[e.id]&&(0,Ln.jsxs)("span",{className:"px-2 py-1 text-xs rounded-full transition-all duration-300 flex items-center gap-1",style:{backgroundColor:"".concat(Ke.warning,"20"),border:"1px solid ".concat(Ke.warning),color:Ke.warning},title:"Has unsaved draft",children:[(0,Ln.jsx)(A,{className:"w-3 h-3"}),"Draft"]}),"CRM"===e.status&&(0,Ln.jsx)("span",{className:"ml-2 px-2 py-1 rounded-full text-xs bg-blue-900 text-blue-300",children:"CRM"})]}),(0,Ln.jsx)("div",{className:"flex items-center gap-1",children:(0,Ln.jsx)("span",{className:"px-2 py-1 text-xs rounded-full transition-all duration-300 transform group-hover:scale-110",style:{backgroundColor:"".concat(Ke.accent,"15"),border:"1px solid ".concat(Ke.border),color:Ke.textPrimary},children:e.intent})})]}),(0,Ln.jsx)("p",{className:"text-sm mb-1 transition-colors duration-300",style:{color:Ke.textSecondary},children:e.email}),(0,Ln.jsx)("p",{className:"text-sm mb-2 transition-all duration-300 ".concat("none"!==n?"font-bold":"font-medium"),style:{color:(null===lt||void 0===lt?void 0:lt.id)===e.id?Ke.accent:Ke.textPrimary},children:e.subject}),(0,Ln.jsxs)("div",{className:"flex flex-wrap gap-2 mb-3",children:[(0,Ln.jsx)("div",{className:"relative category-dropdown",style:{zIndex:1e4},children:(()=>{const n=ot.find(t=>t.value===e.lead_category)||ot[0],r=Ie.has(e.id);return(0,Ln.jsx)(Ln.Fragment,{children:(0,Ln.jsxs)("button",{ref:t=>{t&&(Be.current[e.id]=t)},onClick:t=>{var n;t.stopPropagation(),n=e.id,Fe(e=>{const t=new Set(e);if(t.has(n))t.delete(n),De(e=>{const t=c({},e);return delete t[n],t});else{t.clear(),t.add(n);const e=Be.current[n];if(e){const t=e.getBoundingClientRect();De(e=>c(c({},e),{},{[n]:{top:t.bottom+8,left:t.left,width:t.width}}))}}return t})},className:"text-sm px-4 py-2 rounded-lg transition-all duration-300 transform hover:scale-105 flex items-center gap-2 font-semibold",style:{backgroundColor:"".concat(n.color,"30"),color:n.color,border:"2px solid ".concat(n.color),animation:"tagFadeIn 0.5s ease-out ".concat(.1*t,"s both"),boxShadow:"0 2px 8px ".concat(n.color,"20")},children:[(0,Ln.jsx)("span",{children:n.label}),(0,Ln.jsx)(y,{className:"w-4 h-4 transition-transform duration-200 ".concat(r?"rotate-180":"")})]})})})()}),r.slice(1,3).map((e,n)=>(0,Ln.jsx)("span",{className:"text-xs px-3 py-1 rounded-full transition-all duration-300 transform hover:scale-110",style:{backgroundColor:"".concat(Ke.accent,"15"),color:Ke.textPrimary,border:"1px solid ".concat(Ke.border),animation:"tagFadeIn 0.5s ease-out ".concat(.1*t+.1*(n+1),"s both")},children:e},e)),r.length>3&&(0,Ln.jsxs)("span",{className:"text-xs transition-colors duration-300",style:{color:Ke.textSecondary},children:["+",r.length-3]})]}),(0,Ln.jsxs)("div",{className:"flex items-center justify-between text-xs",style:{color:Ke.textSecondary},children:[(0,Ln.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Ln.jsxs)("div",{className:"flex items-center transition-all duration-300",children:[(0,Ln.jsx)(I,{className:"w-3 h-3 mr-1 transition-transform duration-300 group-hover:rotate-12"}),"Last followup: ",(()=>{const t=e.conversation.filter(e=>"SENT"===e.type);if(0===t.length)return"N/A";const n=Math.floor((new Date-new Date(t[t.length-1].time))/864e5);return"".concat(n,"d ago")})()]}),(0,Ln.jsxs)("div",{className:"flex items-center transition-all duration-300",children:[(0,Ln.jsx)(g,{className:"w-3 h-3 mr-1 transition-transform duration-300 group-hover:rotate-12"}),"Last reply: ",(()=>{const t=Qe(e.conversation);if(!t)return"None";const n=Math.floor((new Date-new Date(t))/864e5);return"".concat(n,"d ago")})()]})]}),(0,Ln.jsx)("div",{className:"flex items-center gap-2",children:(0,Ln.jsxs)("span",{className:"px-3 py-1 rounded-full text-xs transition-all duration-300 transform group-hover:scale-105",style:{backgroundColor:Ke.tertiaryBg,border:"1px solid ".concat(Ke.border),color:Ke.textPrimary},children:[e.conversation.length," messages"]})})]})]})]},e.id)}catch(U){return console.error("Error rendering lead:",e.first_name,U),(0,Ln.jsxs)("div",{className:"p-4 m-2 bg-red-500/20 text-white rounded",children:["Error rendering ",e.first_name||"Unknown",": ",U.message]},e.id||t)}})]})})]}),(0,Ln.jsx)("div",{className:"flex-1 flex flex-col shadow-lg transition-colors duration-300",style:{backgroundColor:Ke.secondaryBg,borderRadius:"12px",margin:"8px",marginLeft:"4px",border:"1px solid ".concat(Ke.border)},children:lt?(0,Ln.jsxs)(Ln.Fragment,{children:[(0,Ln.jsx)("div",{className:"p-8 transition-colors duration-300",style:{backgroundColor:Ke.tertiaryBg,borderRadius:"12px 12px 0 0",borderBottom:"1px solid ".concat(Ke.border)},children:(0,Ln.jsxs)("div",{className:"flex justify-between items-start",children:[(0,Ln.jsxs)("div",{children:[(0,Ln.jsxs)("h2",{className:"text-3xl font-bold transition-colors duration-300",style:{color:Ke.textPrimary},children:[lt.first_name," ",lt.last_name]}),(0,Ln.jsx)("p",{className:"mt-2 font-medium transition-colors duration-300",style:{color:Ke.textSecondary},children:lt.email}),lt.phone?(0,Ln.jsxs)("p",{className:"text-sm mt-2 flex items-center gap-2 transition-colors duration-300",style:{color:Ke.accent},children:[(0,Ln.jsx)(F,{className:"w-3 h-3"}),(0,Ln.jsx)("span",{className:"font-medium",children:lt.phone})]}):(0,Ln.jsxs)("p",{className:"text-sm mt-2 flex items-center gap-2 transition-colors duration-300",style:{color:Ke.textMuted},children:[(0,Ln.jsx)(F,{className:"w-3 h-3"}),(0,Ln.jsx)("span",{children:"No phone number found"})]}),lt.website&&(0,Ln.jsx)("p",{className:"text-sm mt-2",children:(0,Ln.jsxs)("a",{href:"https://".concat(lt.website),target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 hover:opacity-80 transition-colors duration-300",style:{color:Ke.accent},children:[lt.website,(0,Ln.jsx)(M,{className:"w-3 h-3"})]})})]}),(0,Ln.jsxs)("div",{className:"flex items-center gap-4",children:[(()=>{const e=xn(lt.intent);return(0,Ln.jsxs)("span",{className:"px-3 py-1 rounded-full text-sm font-medium transition-colors duration-300",style:{backgroundColor:"".concat(Ke.accent,"15"),border:"1px solid ".concat(Ke.border),color:Ke.textPrimary},children:[e.label," (",lt.intent,"/10)"]})})(),(0,Ln.jsxs)("button",{onClick:()=>(ln(lt),void an(!0)),className:"px-3 py-2 rounded-lg transition-colors duration-300 flex items-center gap-2 text-sm hover:opacity-80",title:"Delete lead",style:{border:"1px solid ".concat(Ke.border),backgroundColor:Ke.tertiaryBg,color:Ke.textPrimary},children:[(0,Ln.jsx)(_,{className:"w-4 h-4"}),"Delete"]}),(0,Ln.jsx)("button",{onClick:()=>ct(null),className:"p-2 rounded-lg transition-colors duration-300 hover:opacity-80",style:{border:"1px solid ".concat(Ke.border),backgroundColor:Ke.tertiaryBg,color:Ke.textMuted},children:(0,Ln.jsx)(_,{className:"w-5 h-5"})}),lt&&"CRM"!==lt.status&&(0,Ln.jsx)("button",{onClick:()=>(async e=>{if(e&&Ye){u(t=>t.map(t=>t.id===e.id?c(c({},t),{},{status:"CRM"}):t)),ct(t=>(null===t||void 0===t?void 0:t.id)===e.id?c(c({},t),{},{status:"CRM"}):t);try{const{error:t}=await En.from("retention_harbor").update({status:"CRM"}).eq("id",e.id);if(t)throw t;Je("Lead moved to CRM!","success")}catch(t){u(t=>t.map(t=>t.id===e.id?c(c({},t),{},{status:"INBOX"}):t)),ct(t=>(null===t||void 0===t?void 0:t.id)===e.id?c(c({},t),{},{status:"INBOX"}):t),Je("Error moving lead to CRM: "+t.message,"error")}}})(lt),className:"px-3 py-2 rounded-lg transition-colors duration-300 flex items-center gap-2 text-sm bg-blue-600 text-white hover:bg-blue-700",style:{marginRight:"8px"},title:"Move to CRM",children:"Add to CRM"}),lt&&"CRM"===lt.status&&(0,Ln.jsx)("button",{onClick:()=>(async e=>{if(e&&Ye){u(t=>t.map(t=>t.id===e.id?c(c({},t),{},{status:"INBOX"}):t)),ct(t=>(null===t||void 0===t?void 0:t.id)===e.id?c(c({},t),{},{status:"INBOX"}):t);try{const{error:t}=await En.from("retention_harbor").update({status:"INBOX"}).eq("id",e.id);if(t)throw t;Je("Lead removed from CRM!","success")}catch(t){u(t=>t.map(t=>t.id===e.id?c(c({},t),{},{status:"CRM"}):t)),ct(t=>(null===t||void 0===t?void 0:t.id)===e.id?c(c({},t),{},{status:"CRM"}):t),Je("Error removing lead from CRM: "+t.message,"error")}}})(lt),className:"px-3 py-2 rounded-lg transition-colors duration-300 flex items-center gap-2 text-sm bg-red-600 text-white hover:bg-red-700",style:{marginRight:"8px"},title:"Remove from CRM",children:"Remove from CRM"}),"CRM"===lt.status&&(0,Ln.jsx)("span",{className:"ml-2 px-2 py-1 rounded-full text-xs bg-blue-900 text-blue-300",children:"CRM"})]})]})}),(0,Ln.jsx)("div",{className:"flex-1 overflow-y-auto p-8 transition-colors duration-300",style:{scrollbarWidth:"thin",scrollbarColor:"".concat(Ke.accent," ").concat(Ke.primaryBg,"50")},children:(0,Ln.jsxs)("div",{className:"space-y-8",children:[(0,Ln.jsxs)("div",{className:"rounded-2xl p-6 shadow-lg transition-colors duration-300",style:{backgroundColor:Ke.tertiaryBg,border:"1px solid ".concat(Ke.border)},children:[(0,Ln.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Ln.jsxs)("h3",{className:"font-bold flex items-center text-lg transition-colors duration-300",style:{color:Ke.textPrimary},children:[(0,Ln.jsx)(w,{className:"w-4 h-4 mr-2 transition-colors duration-300",style:{color:Ke.accent}}),"Lead Information"]}),(0,Ln.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Ln.jsx)("button",{onClick:()=>(async e=>{_e(t=>new Set([...t,e.id]));try{var t,n,r,o,a;const s=await fetch("https://reidsickels.app.n8n.cloud/webhook/0b5749de-2324-45da-aa36-20971addef0b",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c(c({},e),(()=>{const t=Tn(e,Z);return{esp_provider:(null===t||void 0===t?void 0:t.esp.provider)||"",esp_api_key:(null===t||void 0===t?void 0:t.esp.key)||"",account_name:(null===t||void 0===t?void 0:t.name)||"",account_id:(null===t||void 0===t?void 0:t.id)||"",fullenrich_api_key:Z.fullenrich}})()))});if(!s.ok)throw new Error("Failed to find phone number");const i=await s.json();console.log("Raw webhook response:",i);const l=(null===i||void 0===i||null===(t=i.datas)||void 0===t||null===(n=t[0])||void 0===n||null===(r=n.contact)||void 0===r||null===(o=r.phones)||void 0===o||null===(a=o[0])||void 0===a?void 0:a.number)||null,d=c(c({},e),{},{phone:l});u(t=>t.map(t=>t.id===e.id?d:t)),(null===lt||void 0===lt?void 0:lt.id)===e.id&&ct(d);const h="".concat(e.first_name," ").concat(e.last_name).trim();l?Je("Phone found for ".concat(h),"success",e.id):Je("No phone found for ".concat(h),"error",e.id)}catch(U){console.error("Error finding phone number:",U),console.error("Error details:",{message:U.message,stack:U.stack});const n="".concat(e.first_name," ").concat(e.last_name).trim();Je("Error searching phone for ".concat(n),"error",e.id)}finally{_e(t=>{const n=new Set(t);return n.delete(e.id),n})}})(lt),disabled:ke.has(lt.id),className:"px-4 py-2 rounded-lg text-sm font-medium transition-all backdrop-blur-sm hover:opacity-80 disabled:opacity-50 flex items-center gap-2",style:{backgroundColor:"".concat(Ke.accent,"20"),color:Ke.accent,border:"1px solid ".concat(Ke.accent,"30")},children:ke.has(lt.id)?(0,Ln.jsxs)(Ln.Fragment,{children:[(0,Ln.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2",style:{borderColor:Ke.accent}}),"Searching..."]}):(0,Ln.jsxs)(Ln.Fragment,{children:[(0,Ln.jsx)(F,{className:"w-4 h-4"}),"Find Phone"]})}),(0,Ln.jsx)("button",{onClick:()=>(async e=>{we(t=>new Set([...t,e.id]));try{const t=await fetch("https://reidsickels.app.n8n.cloud/webhook/9894a38a-ac26-46b8-89a2-ef2e80e83504",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c(c({},e),(()=>{const t=Tn(e,Z);return{esp_provider:(null===t||void 0===t?void 0:t.esp.provider)||"",esp_api_key:(null===t||void 0===t?void 0:t.esp.key)||"",account_name:(null===t||void 0===t?void 0:t.name)||"",account_id:(null===t||void 0===t?void 0:t.id)||"",fullenrich_api_key:Z.fullenrich}})()))});if(!t.ok)throw new Error("Failed to enrich lead data");const n=await t.json();console.log("Raw webhook response:",n);const r=c(c({},e),{},{role:n.Role||null,company_data:n["Company Summary"]||null,personal_linkedin_url:n["Personal LinkedIn"]||null,business_linkedin_url:n["Business LinkedIn"]||null,last_name:n["Last Name"]||e.last_name||""});u(t=>t.map(t=>t.id===e.id?r:t)),(null===lt||void 0===lt?void 0:lt.id)===e.id&&ct(r);const o="".concat(e.first_name," ").concat(e.last_name).trim();n.Role||n["Company Summary"]||n["Personal LinkedIn"]||n["Business LinkedIn"]?Je("Data enriched for ".concat(o),"success",e.id):Je("No additional data found for ".concat(o),"error",e.id)}catch(U){console.error("Error enriching lead:",U),console.error("Error details:",{message:U.message,stack:U.stack});const n="".concat(e.first_name," ").concat(e.last_name).trim();Je("Error enriching data for ".concat(n),"error",e.id)}finally{we(t=>{const n=new Set(t);return n.delete(e.id),n})}})(lt),disabled:be.has(lt.id),className:"px-4 py-2 rounded-lg text-sm font-medium transition-all backdrop-blur-sm hover:opacity-80 disabled:opacity-50 flex items-center gap-2",style:{backgroundColor:"".concat(Ke.accent,"20"),color:Ke.accent,border:"1px solid ".concat(Ke.accent,"30")},children:be.has(lt.id)?(0,Ln.jsxs)(Ln.Fragment,{children:[(0,Ln.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2",style:{borderColor:Ke.accent}}),"Enriching..."]}):(0,Ln.jsxs)(Ln.Fragment,{children:[(0,Ln.jsx)(D,{className:"w-4 h-4"}),"Enrich"]})})]})]}),(0,Ln.jsx)("div",{className:"mb-6 p-4 rounded-lg transition-colors duration-300",style:{backgroundColor:Ke.tertiaryBg,border:"1px solid ".concat(Ke.border)},children:(0,Ln.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,Ln.jsxs)("div",{className:"flex items-center gap-6",children:[(0,Ln.jsxs)("div",{children:[(0,Ln.jsx)("span",{className:"transition-colors duration-300",style:{color:Ke.textMuted},children:"Last Reply"}),(0,Ln.jsx)("p",{className:"font-medium mt-1 transition-colors duration-300",style:{color:Ke.textPrimary},children:(()=>{const e=Qe(lt.conversation);return e?wn(e):"No replies yet"})()})]}),(0,Ln.jsxs)("div",{children:[(0,Ln.jsx)("span",{className:"transition-colors duration-300",style:{color:Ke.textMuted},children:"Last Followup"}),(0,Ln.jsx)("p",{className:"font-medium mt-1 transition-colors duration-300",style:{color:Ke.textPrimary},children:(()=>{const e=lt.conversation.filter(e=>"SENT"===e.type);return e.length>0?wn(e[e.length-1].time):"N/A"})()})]}),(0,Ln.jsxs)("div",{children:[(0,Ln.jsx)("span",{className:"transition-colors duration-300",style:{color:Ke.textMuted},children:"Avg Response"}),(0,Ln.jsx)("p",{className:"font-medium mt-1 transition-colors duration-300",style:{color:Ke.textPrimary},children:Nn(lt.response_time_avg)})]})]}),(0,Ln.jsxs)("div",{className:"px-3 py-1 rounded-full text-sm transition-colors duration-300",style:{backgroundColor:"".concat(Ke.accent,"15"),border:"1px solid ".concat(Ke.accent,"20")},children:[(0,Ln.jsx)("span",{className:"font-medium transition-colors duration-300",style:{color:Ke.textPrimary},children:lt.conversation.filter(e=>"REPLY"===e.type).length}),(0,Ln.jsx)("span",{className:"transition-colors duration-300",style:{color:Ke.textMuted},children:" replies"})]})]})}),(0,Ln.jsxs)("div",{className:"space-y-2",children:[(0,Ln.jsxs)("div",{className:"rounded-lg overflow-hidden transition-all duration-200",style:{backgroundColor:Ke.tertiaryBg},children:[(0,Ln.jsx)("button",{onClick:()=>An("general"),className:"w-full px-4 py-3 flex items-center justify-between hover:opacity-80 transition-colors duration-300",children:(0,Ln.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Ln.jsx)(B,{className:"w-4 h-4 transition-transform duration-200 ".concat(Ft.includes("general")?"rotate-90":""),style:{color:Ke.accent}}),(0,Ln.jsx)("span",{className:"font-medium transition-colors duration-300",style:{color:Ke.textPrimary},children:"General Information"})]})}),Ft.includes("general")&&(0,Ln.jsx)("div",{className:"px-4 pb-4",children:(0,Ln.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm pl-6",children:[(0,Ln.jsxs)("div",{children:[(0,Ln.jsx)("span",{className:"transition-colors duration-300",style:{color:Ke.textSecondary},children:"Subject:"}),(0,Ln.jsx)("p",{className:"font-medium transition-colors duration-300",style:{color:Ke.textPrimary},children:lt.subject})]}),(0,Ln.jsxs)("div",{children:[(0,Ln.jsx)("span",{className:"transition-colors duration-300",style:{color:Ke.textSecondary},children:"Website:"}),(0,Ln.jsx)("p",{className:"font-medium",children:lt.website?(0,Ln.jsxs)("a",{href:"https://".concat(lt.website),target:"_blank",rel:"noopener noreferrer",className:"hover:opacity-80 flex items-center gap-1 transition-colors duration-300",style:{color:Ke.accent},children:[lt.website,(0,Ln.jsx)(M,{className:"w-3 h-3"})]}):(0,Ln.jsx)("span",{className:"transition-colors duration-300",style:{color:Ke.textPrimary},children:"N/A"})})]}),(0,Ln.jsxs)("div",{className:"col-span-2",children:[(0,Ln.jsx)("span",{className:"transition-colors duration-300",style:{color:Ke.textSecondary},children:"Tags:"}),(0,Ln.jsx)("div",{className:"flex flex-wrap gap-1 mt-1",children:lt.tags.map(e=>(0,Ln.jsx)("span",{className:"text-xs px-2 py-1 rounded-full transition-colors duration-300",style:{backgroundColor:"".concat(Ke.accent,"15"),border:"1px solid ".concat(Ke.border),color:Ke.textPrimary},children:e},e))})]})]})})]}),(0,Ln.jsxs)("div",{className:"rounded-lg overflow-hidden transition-all duration-200",style:{backgroundColor:Ke.tertiaryBg},children:[(0,Ln.jsxs)("button",{onClick:()=>An("enrichment"),className:"w-full px-4 py-3 flex items-center justify-between hover:opacity-80 transition-colors duration-300",children:[(0,Ln.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Ln.jsx)(B,{className:"w-4 h-4 transition-transform duration-200 ".concat(Ft.includes("enrichment")?"rotate-90":""),style:{color:Ke.accent}}),(0,Ln.jsx)("span",{className:"font-medium transition-colors duration-300",style:{color:Ke.textPrimary},children:"Enrichment Data"})]}),!lt.role&&!lt.company_data&&!lt.personal_linkedin_url&&!lt.business_linkedin_url&&(0,Ln.jsx)("span",{className:"text-xs transition-colors duration-300",style:{color:Ke.textMuted},children:"No data yet"})]}),Ft.includes("enrichment")&&(0,Ln.jsx)("div",{className:"px-4 pb-4",children:lt.role||lt.company_data||lt.personal_linkedin_url||lt.business_linkedin_url?(0,Ln.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm pl-6",children:[(0,Ln.jsxs)("div",{children:[(0,Ln.jsx)("span",{className:"transition-colors duration-300",style:{color:Ke.textSecondary},children:"Role:"}),(0,Ln.jsx)("p",{className:"font-medium transition-colors duration-300",style:{color:Ke.textPrimary},children:lt.role||"N/A"})]}),(0,Ln.jsxs)("div",{className:"col-span-2",children:[(0,Ln.jsx)("span",{className:"transition-colors duration-300",style:{color:Ke.textSecondary},children:"Company Summary:"}),(0,Ln.jsx)("p",{className:"font-medium mt-1 transition-colors duration-300",style:{color:Ke.textPrimary},children:lt.company_data||"N/A"})]}),(0,Ln.jsxs)("div",{children:[(0,Ln.jsx)("span",{className:"transition-colors duration-300",style:{color:Ke.textSecondary},children:"Personal LinkedIn:"}),lt.personal_linkedin_url?(0,Ln.jsxs)("a",{href:lt.personal_linkedin_url,target:"_blank",rel:"noopener noreferrer",className:"font-medium hover:opacity-80 flex items-center gap-1 transition-colors duration-300",style:{color:Ke.accent},children:["View Profile",(0,Ln.jsx)(M,{className:"w-3 h-3"})]}):(0,Ln.jsx)("p",{className:"font-medium transition-colors duration-300",style:{color:Ke.textPrimary},children:"N/A"})]}),(0,Ln.jsxs)("div",{children:[(0,Ln.jsx)("span",{className:"transition-colors duration-300",style:{color:Ke.textSecondary},children:"Company LinkedIn:"}),lt.business_linkedin_url?(0,Ln.jsxs)("a",{href:lt.business_linkedin_url,target:"_blank",rel:"noopener noreferrer",className:"font-medium hover:opacity-80 flex items-center gap-1 transition-colors duration-300",style:{color:Ke.accent},children:["View Company",(0,Ln.jsx)(M,{className:"w-3 h-3"})]}):(0,Ln.jsx)("p",{className:"font-medium transition-colors duration-300",style:{color:Ke.textPrimary},children:"N/A"})]})]}):(0,Ln.jsxs)("div",{className:"text-center py-6 rounded-lg mx-6 transition-colors duration-300",style:{color:Ke.textMuted,border:"1px solid ".concat(Ke.border)},children:[(0,Ln.jsx)(D,{className:"w-8 h-8 mx-auto mb-3 opacity-50"}),(0,Ln.jsx)("p",{className:"text-sm",children:"Click the Enrich button above to fetch additional data"})]})})]}),(0,Ln.jsxs)("div",{className:"rounded-lg overflow-hidden transition-all duration-200",style:{backgroundColor:Ke.tertiaryBg},children:[(0,Ln.jsx)("button",{onClick:()=>An("engagement"),className:"w-full px-4 py-3 flex items-center justify-between hover:opacity-80 transition-colors duration-300",children:(0,Ln.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Ln.jsx)(B,{className:"w-4 h-4 transition-transform duration-200 ".concat(Ft.includes("engagement")?"rotate-90":""),style:{color:Ke.accent}}),(0,Ln.jsx)("span",{className:"font-medium transition-colors duration-300",style:{color:Ke.textPrimary},children:"Engagement Metrics"})]})}),Ft.includes("engagement")&&(0,Ln.jsx)("div",{className:"px-4 pb-4",children:(0,Ln.jsx)("div",{className:"grid grid-cols-3 gap-4 text-sm pl-6",children:(0,Ln.jsx)("div",{className:"col-span-3 p-4 rounded-lg transition-colors duration-300",style:{backgroundColor:Ke.tertiaryBg,border:"1px solid ".concat(Ke.border)},children:(0,Ln.jsxs)("div",{className:"grid grid-cols-3 gap-8",children:[(0,Ln.jsxs)("div",{children:[(0,Ln.jsx)("span",{className:"transition-colors duration-300",style:{color:Ke.textMuted},children:"Avg Response Time"}),(0,Ln.jsx)("p",{className:"text-2xl font-bold mt-1 transition-colors duration-300",style:{color:Ke.textPrimary},children:Nn(lt.response_time_avg)})]}),(0,Ln.jsxs)("div",{children:[(0,Ln.jsx)("span",{className:"transition-colors duration-300",style:{color:Ke.textMuted},children:"Intent Score"}),(0,Ln.jsxs)("p",{className:"text-2xl font-bold mt-1 transition-colors duration-300",style:{color:Ke.accent},children:[lt.intent,"/10"]})]}),(0,Ln.jsxs)("div",{children:[(0,Ln.jsx)("span",{className:"transition-colors duration-300",style:{color:Ke.textMuted},children:"Reply Rate"}),(0,Ln.jsxs)("p",{className:"text-2xl font-bold mt-1 transition-colors duration-300",style:{color:Ke.textPrimary},children:[lt.conversation.filter(e=>"REPLY"===e.type).length,"/",lt.conversation.filter(e=>"SENT"===e.type).length]})]})]})})})})]})]})]}),(0,Ln.jsxs)("div",{className:"rounded-2xl p-6 shadow-lg transition-colors duration-300",style:{backgroundColor:Ke.tertiaryBg,border:"1px solid ".concat(Ke.border)},children:[(0,Ln.jsxs)("h3",{className:"font-bold mb-4 flex items-center text-lg transition-colors duration-300",style:{color:Ke.textPrimary},children:[(0,Ln.jsx)(T,{className:"w-4 h-4 mr-2 transition-colors duration-300",style:{color:Ke.accent}}),"Conversation History (",lt.conversation.length," messages)"]}),(0,Ln.jsx)("div",{className:"space-y-6 max-h-96 overflow-y-auto",style:{scrollbarWidth:"thin",scrollbarColor:"".concat(Ke.accent," ").concat(Ke.primaryBg,"50")},children:lt.conversation.map((e,t)=>(0,Ln.jsxs)("div",{className:"p-5 rounded-xl border shadow-sm transition-colors duration-300",style:{backgroundColor:"SENT"===e.type?"".concat(Ke.accent,"08"):Ke.tertiaryBg,borderColor:"SENT"===e.type?"".concat(Ke.accent,"30"):Ke.border},children:[(0,Ln.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,Ln.jsxs)("div",{className:"text-sm",children:[(0,Ln.jsx)("span",{className:"font-medium transition-colors duration-300",style:{color:"SENT"===e.type?Ke.accent:Ke.textPrimary},children:"SENT"===e.type?"Outbound":"Reply"}),(0,Ln.jsx)("span",{className:"ml-2 transition-colors duration-300",style:{color:Ke.textSecondary},children:wn(e.time)}),e.response_time&&(0,Ln.jsxs)("span",{className:"ml-2 text-xs transition-colors duration-300",style:{color:Ke.success},children:["\u2022 ",Nn(e.response_time)," response"]})]}),(0,Ln.jsx)("div",{className:"flex items-center gap-2",children:(0,Ln.jsx)("span",{className:"px-2 py-1 text-xs rounded-full transition-colors duration-300",style:{backgroundColor:"SENT"===e.type?"".concat(Ke.accent,"15"):Ke.tertiaryBg,border:"1px solid ".concat(Ke.border),color:"SENT"===e.type?Ke.accent:Ke.textPrimary},children:e.type})})]}),(0,Ln.jsxs)("div",{className:"mb-3 text-xs space-y-1 transition-colors duration-300",style:{color:Ke.textMuted},children:[(0,Ln.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,Ln.jsxs)("span",{children:[(0,Ln.jsx)("strong",{children:"From:"})," ",e.from||"N/A"]}),(0,Ln.jsxs)("span",{children:[(0,Ln.jsx)("strong",{children:"To:"})," ",e.to||"N/A"]})]}),e.cc&&Array.isArray(e.cc)&&e.cc.length>0&&(0,Ln.jsxs)("div",{children:[(0,Ln.jsx)("strong",{children:"CC:"})," ",e.cc.map(e=>"string"===typeof e?e:e&&e.address?e.address:e&&e.name&&""!==e.name.trim()?e.name:"").filter(Boolean).join(", ")]}),e.subject&&(0,Ln.jsxs)("div",{children:[(0,Ln.jsx)("strong",{children:"Subject:"})," ",e.subject]})]}),(0,Ln.jsx)("div",{className:"text-sm whitespace-pre-wrap leading-relaxed transition-colors duration-300",style:{color:Ke.textPrimary},children:e.content})]},t))})]}),(0,Ln.jsxs)("div",{className:"rounded-2xl p-6 shadow-lg transition-colors duration-300",style:{backgroundColor:Ke.tertiaryBg,border:"1px solid ".concat(Ke.border)},children:[(0,Ln.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Ln.jsxs)("h3",{className:"font-bold flex items-center text-lg transition-colors duration-300",style:{color:Ke.textPrimary},children:[(0,Ln.jsx)(m,{className:"w-4 h-4 mr-2 transition-colors duration-300",style:{color:Ke.accent}}),"Compose Response"]}),(0,Ln.jsxs)("div",{className:"flex items-center gap-2 text-xs transition-colors duration-300",style:{color:Ke.textMuted},children:[He&&(0,Ln.jsxs)("span",{className:"flex items-center gap-1",children:[(0,Ln.jsx)("div",{className:"animate-spin w-3 h-3 border border-t-transparent rounded-full",style:{borderColor:Ke.accent}}),"Saving draft..."]}),lt&&Pe[lt.id]&&!He&&(0,Ln.jsxs)("span",{className:"flex items-center gap-1",style:{color:Ke.success},children:[(0,Ln.jsx)(f,{className:"w-3 h-3"}),"Draft saved ",new Date(Pe[lt.id].savedAt).toLocaleTimeString()]})]})]}),(0,Ln.jsxs)("div",{className:"space-y-6",children:[(0,Ln.jsxs)("div",{className:"p-4 rounded-lg transition-colors duration-300",style:{backgroundColor:Ke.tertiaryBg,border:"1px solid ".concat(Ke.border)},children:[(0,Ln.jsxs)("h4",{className:"font-medium mb-3 flex items-center text-sm transition-colors duration-300",style:{color:Ke.textPrimary},children:[(0,Ln.jsx)(m,{className:"w-4 h-4 mr-2 transition-colors duration-300",style:{color:Ke.accent}}),"Email Recipients"]}),(0,Ln.jsxs)("div",{className:"grid grid-cols-1 gap-3",children:[(0,Ln.jsxs)("div",{children:[(0,Ln.jsx)("label",{className:"text-xs block mb-1 transition-colors duration-300",style:{color:Ke.textSecondary},children:"To:"}),(0,Ln.jsx)("input",{type:"email",value:zt,onChange:e=>Ut(e.target.value),className:"w-full px-3 py-2 rounded-lg text-sm focus:ring-2 transition-colors duration-300",style:{backgroundColor:Ke.secondaryBg,border:"1px solid ".concat(Ke.border),color:Ke.textPrimary,"--tw-ring-color":Ke.accent},placeholder:"Primary recipient email"})]}),(0,Ln.jsxs)("div",{children:[(0,Ln.jsx)("label",{className:"text-xs block mb-1 transition-colors duration-300",style:{color:Ke.textSecondary},children:"CC: (separate multiple emails with commas)"}),(0,Ln.jsx)("input",{type:"text",value:qt,onChange:e=>Ht(e.target.value),className:"w-full px-3 py-2 rounded-lg text-sm focus:ring-2 transition-colors duration-300",style:{backgroundColor:Ke.secondaryBg,border:"1px solid ".concat(Ke.border),color:Ke.textPrimary,"--tw-ring-color":Ke.accent},placeholder:"CC recipients (optional)"})]}),(0,Ln.jsx)("div",{className:"text-xs transition-colors duration-300",style:{color:Ke.textMuted},children:"Auto-populated based on conversation. Edit as needed before sending."})]})]}),(0,Ln.jsxs)("div",{className:"flex gap-3",children:[(0,Ln.jsxs)("button",{onClick:async()=>{if(lt){Lt(!0),console.log("Generating draft for lead:",lt);try{const t=lt.conversation[lt.conversation.length-1],n=Ge(lt),r=e=>e?e.replace(/\r\n/g," ").replace(/\n/g," ").replace(/\r/g," ").replace(/\t/g," ").replace(/[\x00-\x1F\x7F-\x9F]/g,"").replace(/"/g,"'").replace(/\s+/g," ").trim():"",o=(lt.id,r(lt.email),r(lt.first_name),r(lt.last_name),r(lt.subject),lt.intent,lt.engagement_score,null===t||void 0===t||t.type,r(((null===t||void 0===t?void 0:t.content)||"").substring(0,300)),lt.conversation.filter(e=>"REPLY"===e.type).length,Math.floor((new Date-new Date((null===t||void 0===t?void 0:t.time)||new Date))/864e5),r(lt.website||""),r(lt.content_brief||""),lt.conversation.map(e=>c(c({},e),{},{content:r(e.content),from:r(e.from||""),to:r(e.to||"")})),{id:lt.id,email:r(lt.email),first_name:r(lt.first_name),last_name:r(lt.last_name),subject:r(lt.subject),intent:lt.intent,engagement_score:lt.engagement_score,urgency:n,last_message_type:(null===t||void 0===t?void 0:t.type)||"SENT",last_message_content:r(((null===t||void 0===t?void 0:t.content)||"").substring(0,300)),reply_count:lt.conversation.filter(e=>"REPLY"===e.type).length,days_since_last_message:Math.floor((new Date-new Date((null===t||void 0===t?void 0:t.time)||new Date))/864e5),website:r(lt.website||""),content_brief:r(lt.content_brief||""),conversation:lt.conversation.map(e=>c(c({},e),{},{content:r(e.content),from:r(e.from||""),to:r(e.to||"")})),email_message_body:lt.email_message_body||""});console.log("=== WEBHOOK DEBUG INFO ==="),console.log("Payload being sent:",JSON.stringify(o,null,2)),console.log("Payload size (characters):",JSON.stringify(o).length),console.log("URL:","https://reidsickels.app.n8n.cloud/webhook/8021dcee-ebfd-4cd0-a424-49d7eeb5b66b"),console.log("Request method: POST"),console.log("Content-Type: application/json");const a=await fetch("https://reidsickels.app.n8n.cloud/webhook/draftmessage",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});console.log("=== RESPONSE DEBUG INFO ==="),console.log("Response status:",a.status),console.log("Response headers:",Object.fromEntries(a.headers.entries()));const s=await a.text();if(console.log("Raw response text:",s),console.log("Response text length:",s.length),console.log("Response text type:",typeof s),!a.ok)throw console.error("=== ERROR DETAILS ==="),console.error("Status:",a.status),console.error("Status Text:",a.statusText),console.error("Response Body:",s),new Error("HTTP error! status: ".concat(a.status,", body: ").concat(s));if(!s||""===s.trim())throw console.error("Empty response from webhook"),new Error("Empty response from webhook");let i;try{i=JSON.parse(s),console.log("Parsed response data:",i)}catch(e){throw console.error("JSON parsing failed. Raw response:",s),console.error("JSON parse error:",e.message),new Error("Invalid JSON response from webhook. Raw response: ".concat(s))}if(i.text){const e=i.text.replace(/\\n/g,"\n").replace(/\\r/g,"\r").trim();Pt(e);const t=jn(e);Qt(t);const n=document.querySelector("[contenteditable]");n&&(n.innerHTML=t),console.log("Draft set successfully from object format")}else{if(!(i&&i.length>0&&i[0].text))throw console.error("No text found in response:",i),new Error("No text content in webhook response");{const e=i[0].text.replace(/\\n/g,"\n").replace(/\\r/g,"\r").trim();Pt(e);const t=jn(e);Qt(t);const n=document.querySelector("[contenteditable]");n&&(n.innerHTML=t),console.log("Draft set successfully from array format")}}}catch(U){console.error("=== FULL ERROR DETAILS ==="),console.error("Error message:",U.message),console.error("Error stack:",U.stack),console.error("Selected lead data:",lt),Pt("Hi ".concat(lt.first_name,",\n\nThank you for your message.\n\nBest regards"))}finally{Lt(!1)}}else console.error("No lead selected")},disabled:Tt,className:"px-4 py-2 rounded-lg hover:opacity-80 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 transition-all duration-300",style:{backgroundColor:Ke.accent,color:Ce?"#1A1C1A":"#FFFFFF"},children:[(0,Ln.jsx)(A,{className:"w-4 h-4"}),Tt?"Generating...":"Generate Smart Draft"]}),(0,Ln.jsxs)("button",{onClick:()=>he(!0),className:"px-4 py-2 rounded-lg hover:opacity-80 flex items-center gap-2 transition-all duration-300",style:{backgroundColor:"".concat(Ke.accent,"20"),color:Ke.accent,border:"1px solid ".concat(Ke.accent,"30")},children:[(0,Ln.jsx)(v,{className:"w-4 h-4"}),"Use Template"]})]}),(0,Ln.jsxs)("div",{className:"space-y-3",children:[(0,Ln.jsxs)("div",{className:"flex flex-wrap gap-2 p-3 rounded-lg transition-colors duration-300",style:{backgroundColor:Ke.tertiaryBg,border:"1px solid ".concat(Ke.border)},children:[(0,Ln.jsx)("button",{type:"button",onClick:()=>kn("bold"),className:"px-3 py-1 rounded text-xs font-bold hover:opacity-80 transition-all duration-300",style:{backgroundColor:Ke.tertiaryBg,color:Ke.textPrimary},title:"Bold",children:"B"}),(0,Ln.jsx)("button",{type:"button",onClick:()=>kn("italic"),className:"px-3 py-1 rounded text-xs italic hover:opacity-80 transition-all duration-300",style:{backgroundColor:Ke.tertiaryBg,color:Ke.textPrimary},title:"Italic",children:"I"}),(0,Ln.jsx)("button",{type:"button",onClick:()=>kn("underline"),className:"px-3 py-1 rounded text-xs underline hover:opacity-80 transition-all duration-300",style:{backgroundColor:Ke.tertiaryBg,color:Ke.textPrimary},title:"Underline",children:"U"}),(0,Ln.jsx)("button",{type:"button",onClick:()=>{const e=window.getSelection(),t=e.toString().trim(),n=e.rangeCount>0?e.getRangeAt(0):null,r=document.querySelector("[contenteditable]"),o=document.createElement("div");o.style.cssText="\n      position: fixed;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      background: rgba(0, 0, 0, 0.5);\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      z-index: 1000;\n    ";const a=document.createElement("div");a.style.cssText="\n      background: #1A1C1A;\n      border: 1px solid rgba(255, 255, 255, 0.2);\n      border-radius: 8px;\n      padding: 24px;\n      width: 400px;\n      max-width: 90vw;\n    ";const s=document.createElement("h3");s.textContent="Insert Link",s.style.cssText="\n      color: white;\n      font-weight: bold;\n      margin: 0 0 20px 0;\n      font-size: 16px;\n    ";const i=document.createElement("div");i.style.marginBottom="16px";const l=document.createElement("label");l.textContent="Text to display:",l.style.cssText="\n      display: block;\n      color: white;\n      font-size: 12px;\n      margin-bottom: 4px;\n    ";const c=document.createElement("input");c.type="text",c.value=t,c.placeholder="Link text",c.style.cssText="\n          width: 100%;\n          padding: 8px 12px;\n          border: 1px solid rgba(255, 255, 255, 0.2);\n          border-radius: 6px;\n          background: rgba(255, 255, 255, 0.05);\n          color: white;\n      font-size: 14px;\n      box-sizing: border-box;\n      outline: none;\n    ";const d=document.createElement("div");d.style.marginBottom="24px";const u=document.createElement("label");u.textContent="URL:",u.style.cssText=l.style.cssText;const h=document.createElement("input");h.type="text",h.placeholder="https://example.com",h.style.cssText=c.style.cssText;const p=document.createElement("div");p.style.cssText="\n      color: #ff4444;\n      font-size: 12px;\n          margin-bottom: 16px;\n      min-height: 16px;\n    ";const f=document.createElement("div");f.style.cssText="\n      display: flex;\n      justify-content: flex-end;\n      gap: 8px;\n    ";const m=document.createElement("button");m.textContent="Cancel",m.style.cssText="\n            padding: 8px 16px;\n            border: 1px solid rgba(255, 255, 255, 0.2);\n            border-radius: 6px;\n            background: rgba(255, 255, 255, 0.05);\n            color: white;\n            cursor: pointer;\n      font-size: 14px;\n    ";const g=document.createElement("button");g.textContent="Insert Link",g.style.cssText="\n            padding: 8px 16px;\n            border: none;\n            border-radius: 6px;\n            background: #54FCFF;\n            color: #1A1C1A;\n            cursor: pointer;\n            font-weight: bold;\n      font-size: 14px;\n    ",i.appendChild(l),i.appendChild(c),d.appendChild(u),d.appendChild(h),f.appendChild(m),f.appendChild(g),a.appendChild(s),a.appendChild(i),a.appendChild(d),a.appendChild(p),a.appendChild(f),o.appendChild(a),document.body.appendChild(o),setTimeout(()=>{t?h.focus():c.focus()},50);const y=()=>{const e=c.value.trim();let t=h.value.trim();if(e)if(t){t.startsWith("http://")||t.startsWith("https://")||(t="https://"+t);try{new URL(t)}catch(a){return void(p.textContent="Please enter a valid URL")}if(n&&r){const o=document.createElement("span");o.style.position="relative",o.style.display="inline-block";const a=document.createElement("a");a.href=t,a.textContent=e,a.target="_blank",a.rel="noopener noreferrer",a.style.cssText="\n          color: #0066cc;\n          text-decoration: underline;\n          cursor: pointer;\n        ";const s=document.createElement("span");s.textContent="\xd7",s.style.cssText="\n          position: absolute;\n          top: -8px;\n          right: -12px;\n          background: #e0e0e0;\n          color: #333;\n          border-radius: 50%;\n          width: 16px;\n          height: 16px;\n          font-size: 12px;\n          line-height: 16px;\n          text-align: center;\n          cursor: pointer;\n          user-select: none;\n          opacity: 0;\n          transition: opacity 0.2s;\n        ",o.addEventListener("mouseenter",()=>{s.style.opacity="1",a.style.color="#004499"}),o.addEventListener("mouseleave",()=>{s.style.opacity="0",a.style.color="#0066cc"}),s.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation();const t=document.createTextNode(a.textContent);o.parentNode.replaceChild(t,o),_n({target:r})}),o.appendChild(a),o.appendChild(s),n.deleteContents(),n.insertNode(o),_n({target:r})}document.body.removeChild(o)}else p.textContent="Please enter a URL";else p.textContent="Please enter the text to display"};m.addEventListener("click",()=>document.body.removeChild(o)),g.addEventListener("click",y),[c,h].forEach(e=>{e.addEventListener("keydown",e=>{"Enter"===e.key&&(e.preventDefault(),y())})}),o.addEventListener("click",e=>{e.target===o&&document.body.removeChild(o)}),document.addEventListener("keydown",function e(t){"Escape"===t.key&&(document.body.removeChild(o),document.removeEventListener("keydown",e))})},className:"px-3 py-1 rounded text-xs hover:opacity-80 transition-all duration-300 flex items-center gap-1",style:{backgroundColor:Ke.tertiaryBg,color:Ke.textPrimary},title:"Insert Link",children:"\ud83d\udd17 Link"}),(0,Ln.jsx)("button",{type:"button",onClick:()=>{document.execCommand("insertUnorderedList",!1,null);const e=document.querySelector("[contenteditable]");e&&_n({target:e})},className:"px-3 py-1 rounded text-xs hover:opacity-80 transition-all duration-300",style:{backgroundColor:Ke.tertiaryBg,color:Ke.textPrimary},title:"Bullet List",children:"\u2022 List"}),(0,Ln.jsx)("div",{className:"mx-2",style:{borderLeft:"1px solid ".concat(Ke.border)}}),(0,Ln.jsx)("input",{type:"file",multiple:!0,accept:".pdf,.doc,.docx,.txt,.jpg,.jpeg,.png,.gif",className:"hidden",id:"attachment-input",onChange:e=>{const t=Array.from(e.target.files).map(e=>({id:Date.now()+Math.random(),file:e,name:e.name,size:e.size,type:e.type}));fe(e=>[...e,...t]),e.target.value=""}}),(0,Ln.jsx)("label",{htmlFor:"attachment-input",className:"px-3 py-1 rounded text-xs hover:opacity-80 transition-all duration-300 cursor-pointer flex items-center gap-1",style:{backgroundColor:Ke.tertiaryBg,color:Ke.textPrimary},title:"Attach File",children:"\ud83d\udcce Attach"})]}),pe.length>0&&(0,Ln.jsxs)("div",{className:"p-3 rounded-lg transition-colors duration-300",style:{backgroundColor:Ke.tertiaryBg,border:"1px solid ".concat(Ke.border)},children:[(0,Ln.jsxs)("h4",{className:"text-sm font-medium mb-2 transition-colors duration-300",style:{color:Ke.textPrimary},children:["Attached Files (",pe.length,")"]}),(0,Ln.jsx)("div",{className:"space-y-2",children:pe.map(e=>(0,Ln.jsxs)("div",{className:"flex items-center justify-between p-2 rounded-lg transition-colors duration-300",style:{backgroundColor:Ke.secondaryBg,border:"1px solid ".concat(Ke.border)},children:[(0,Ln.jsxs)("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[(0,Ln.jsx)("div",{className:"flex-shrink-0",children:e.type.startsWith("image/")?(0,Ln.jsx)("span",{className:"text-lg",children:"\ud83d\uddbc\ufe0f"}):e.type.includes("pdf")?(0,Ln.jsx)("span",{className:"text-lg",children:"\ud83d\udcc4"}):e.type.includes("doc")?(0,Ln.jsx)("span",{className:"text-lg",children:"\ud83d\udcdd"}):(0,Ln.jsx)("span",{className:"text-lg",children:"\ud83d\udcce"})}),(0,Ln.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Ln.jsx)("p",{className:"text-sm font-medium truncate transition-colors duration-300",style:{color:Ke.textPrimary},children:e.name}),(0,Ln.jsx)("p",{className:"text-xs transition-colors duration-300",style:{color:Ke.textMuted},children:Sn(e.size)})]})]}),(0,Ln.jsx)("button",{onClick:()=>{return t=e.id,void fe(e=>e.filter(e=>e.id!==t));var t},className:"flex-shrink-0 p-1 rounded-lg hover:opacity-80 transition-all duration-300",style:{color:Ke.error},title:"Remove attachment",children:(0,Ln.jsx)(_,{className:"w-4 h-4"})})]},e.id))})]}),(0,Ln.jsx)("div",{contentEditable:!0,suppressContentEditableWarning:!0,onInput:_n,onKeyDown:e=>{if(e.ctrlKey||e.metaKey)switch(e.key){case"b":e.preventDefault(),kn("bold");break;case"i":e.preventDefault(),kn("italic");break;case"u":e.preventDefault(),kn("underline");break;case"z":e.preventDefault(),e.shiftKey?document.execCommand("redo",!1,null):document.execCommand("undo",!1,null),_n({target:e.target});break;case"y":e.preventDefault(),document.execCommand("redo",!1,null),_n({target:e.target})}else if("Enter"===e.key&&e.shiftKey){const t=window.getSelection();if(t.rangeCount>0){let n=t.getRangeAt(0).startContainer;for(;n&&n.nodeType!==Node.ELEMENT_NODE;)n=n.parentNode;if(n&&"LI"===n.tagName){e.preventDefault();const r=n.closest("ul, ol");if(r){const n=document.createElement("div");n.innerHTML="<br>",r.parentNode.insertBefore(n,r.nextSibling);const o=document.createRange();o.setStart(n,0),o.collapse(!0),t.removeAllRanges(),t.addRange(o),_n({target:e.target})}}}}else if("Tab"===e.key){e.preventDefault();const t=window.getSelection();if(t.rangeCount>0){let n=t.getRangeAt(0).startContainer;for(;n&&n.nodeType!==Node.ELEMENT_NODE;)n=n.parentNode;n&&("LI"===n.tagName||n.closest("ul, ol"))?e.shiftKey?document.execCommand("outdent",!1,null):document.execCommand("indent",!1,null):e.shiftKey?document.execCommand("outdent",!1,null):document.execCommand("insertHTML",!1,"&nbsp;&nbsp;&nbsp;&nbsp;")}_n({target:e.target})}else if("Backspace"===e.key){const t=window.getSelection();if(t.rangeCount>0){const n=t.getRangeAt(0);let r=n.startContainer;for(;r&&r.nodeType!==Node.ELEMENT_NODE;)r=r.parentNode;if(r&&"LI"===r.tagName){const t=""===r.textContent.trim(),o=0===n.startOffset;t&&o&&(e.preventDefault(),document.execCommand("outdent",!1,null),_n({target:e.target}))}}}},className:"w-full p-3 rounded-lg resize-none focus:ring-2 focus:outline-none overflow-y-auto transition-colors duration-300",style:{backgroundColor:Ke.secondaryBg,border:"1px solid ".concat(Ke.border),color:Ke.textPrimary,"--tw-ring-color":Ke.accent,minHeight:"320px"},"data-placeholder":"Start typing your response... Keyboard shortcuts:\n\u2022 Ctrl+B/I/U - Bold/Italic/Underline\n\u2022 Ctrl+Z/Y - Undo/Redo  \n\u2022 Tab/Shift+Tab - Indent/Outdent\n\u2022 Bullet button - Toggle lists\n\u2022 Backspace on empty bullet - Exit list\n\u2022 Shift+Enter in bullet - Exit to normal text"}),$t&&(0,Ln.jsxs)("details",{className:"text-xs",children:[(0,Ln.jsx)("summary",{className:"cursor-pointer transition-colors duration-300",style:{color:Ke.textMuted},children:"HTML Preview"}),(0,Ln.jsx)("pre",{className:"mt-2 p-2 rounded whitespace-pre-wrap transition-colors duration-300",style:{backgroundColor:Ke.tertiaryBg,color:Ke.textSecondary},children:$t})]})]}),(0,Ln.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ln.jsxs)("div",{className:"relative scheduler-container",children:[(0,Ln.jsxs)("button",{onClick:()=>ve(!ye),className:"px-4 py-2 rounded-lg hover:opacity-80 flex items-center gap-2 transition-all duration-300",style:{backgroundColor:"".concat(Ke.accent,"20"),color:Ke.accent,border:"1px solid ".concat(Ke.accent,"30")},children:[(0,Ln.jsx)(g,{className:"w-4 h-4"}),me?"Scheduled":"Schedule"]}),ye&&(0,Ln.jsxs)("div",{className:"absolute left-0 bottom-full mb-2 p-4 rounded-lg shadow-lg z-50 min-w-[300px] transition-colors duration-300",style:{backgroundColor:Ke.secondaryBg,border:"1px solid ".concat(Ke.border)},children:[(0,Ln.jsx)("h4",{className:"font-medium mb-3 transition-colors duration-300",style:{color:Ke.textPrimary},children:"Schedule Message"}),(0,Ln.jsxs)("div",{className:"space-y-3",children:[(0,Ln.jsxs)("div",{children:[(0,Ln.jsx)("label",{className:"text-xs block mb-1 transition-colors duration-300",style:{color:Ke.textSecondary},children:"Send Date & Time:"}),(0,Ln.jsx)("input",{type:"datetime-local",value:me?new Date(me.getTime()-6e4*me.getTimezoneOffset()).toISOString().slice(0,16):"",onChange:e=>{e.target.value?ge(new Date(e.target.value)):ge(null)},min:(new Date).toISOString().slice(0,16),className:"w-full px-3 py-2 rounded-lg text-sm focus:ring-2 transition-colors duration-300",style:{backgroundColor:Ke.tertiaryBg,border:"1px solid ".concat(Ke.border),color:Ke.textPrimary,"--tw-ring-color":Ke.accent}})]}),(0,Ln.jsxs)("div",{className:"flex gap-2",children:[(0,Ln.jsx)("button",{onClick:()=>{ge(null),ve(!1)},className:"flex-1 px-3 py-2 rounded-lg text-sm hover:opacity-80 transition-all duration-300",style:{backgroundColor:Ke.tertiaryBg,color:Ke.textMuted,border:"1px solid ".concat(Ke.border)},children:"Clear"}),(0,Ln.jsx)("button",{onClick:()=>ve(!1),className:"flex-1 px-3 py-2 rounded-lg text-sm hover:opacity-80 transition-all duration-300",style:{backgroundColor:Ke.accent,color:Ce?"#1A1C1A":"#FFFFFF"},children:"Done"})]})]})]})]}),(0,Ln.jsxs)("div",{className:"flex items-center gap-2",children:[me&&(0,Ln.jsxs)("span",{className:"text-xs transition-colors duration-300",style:{color:Ke.textMuted},children:["Scheduled for ",me.toLocaleString()]}),(0,Ln.jsxs)("button",{onClick:async()=>{var e,t;const n=(null===(e=document.querySelector("[contenteditable]"))||void 0===e?void 0:e.textContent)||Et,r=(null===(t=document.querySelector("[contenteditable]"))||void 0===t?void 0:t.innerHTML)||jn(Et);console.log("\ud83d\udd10 SECURE SEND: API keys will never leave this device"),console.log("\ud83d\udce7 Processing message for secure direct send...");const o=Wn(Vn(r));if(n.trim()){Ot(!0);try{const e=Tn(lt,Z);if(!e||!e.esp.key)throw new Error("No API key available for sending messages");console.log("\ud83c\udfaf Using ".concat(e.esp.provider," provider (Account: ").concat(e.name,")"));const t=c(c({},lt),{},{sl_lead_email:zt.trim(),to_name:lt.to_name||lt.first_name,email:zt.trim()});let n;switch(console.log("\ud83d\udccb Lead data for API call:",{campaign_id:t.campaign_id,email_stats_id:t.email_stats_id,to_email:t.sl_lead_email,provider:e.esp.provider}),e.esp.provider){case"smartlead":n=await(async(e,t,n,r)=>{console.log("\ud83d\udce7 Sending via Smartlead directly...");const o="https://server.smartlead.ai/api/v1/campaigns/".concat(t.campaign_id,"/reply-email-thread?api_key=").concat(e),a={email_stats_id:t.email_stats_id,email_body:n.replace(/\n/g,"<br>"),reply_email_time:r?new Date(r).toISOString():void 0,reply_email_body:n.replace(/\n/g,"<br>"),to_email:t.sl_lead_email||t.email};console.log("\ud83c\udfaf Smartlead payload:",a);const s=await fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!s.ok){const e=await s.text();throw new Error("Smartlead API error: ".concat(s.status," - ").concat(e))}const i=await s.json();return console.log("\u2705 Smartlead response:",i),i})(e.esp.key,t,o,me);break;case"email_bison":n=await(async(e,t,n,r)=>{console.log("\ud83d\udce7 Sending via Email Bison directly...");const o={api_key:e,to:t.sl_lead_email,to_name:t.to_name||t.first_name,from:t.from_email,subject:t.subject,html:n,scheduled_time:r?new Date(r).toISOString():null},a=await fetch("https://api.emailbison.com/v1/send",{method:"POST",headers:{"Content-Type":"application/json","X-API-Key":e},body:JSON.stringify(o)});if(!a.ok){const e=await a.text();throw new Error("Email Bison API error: ".concat(a.status," - ").concat(e))}return await a.json()})(e.esp.key,t,o,me);break;case"instantly":n=await(async(e,t,n,r)=>{console.log("\ud83d\udce7 Sending via Instantly directly...");const o={api_key:e,to_email:t.sl_lead_email,to_name:t.to_name||t.first_name,from_email:t.from_email,subject:t.subject,body_html:n,send_time:r?new Date(r).toISOString():null},a=await fetch("https://api.instantly.ai/api/v1/send/email",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify(o)});if(!a.ok){const e=await a.text();throw new Error("Instantly API error: ".concat(a.status," - ").concat(e))}return await a.json()})(e.esp.key,t,o,me);break;default:throw new Error("Unsupported ESP provider: ".concat(e.esp.provider))}console.log("\u2705 Email sent successfully via",e.esp.provider),await(async(e,t,n)=>{console.log("\ud83d\udcbe Updating conversation and lead status in Supabase...");try{const{data:o,error:a}=await En.from("retention_harbor").select("email_message_body, conversation_count, last_reply_at").eq("id",e).single();if(a)throw a;let s=[];if(o.email_message_body)try{s=JSON.parse(o.email_message_body)}catch(r){console.warn("Failed to parse existing conversation:",r)}const i={id:crypto.randomUUID(),type:"SENT",content:t.message,html_content:t.message,time:t.sent_at,from:"user",scheduled_time:t.scheduled_time,esp_provider:t.esp_provider,account_name:t.account_name,message_id:(null===n||void 0===n?void 0:n.message_id)||(null===n||void 0===n?void 0:n.id)||null,smartlead_response:n,status:"sent"};s.push(i);const{error:l}=await En.from("retention_harbor").update({email_message_body:JSON.stringify(s),conversation_count:s.length,last_reply_at:t.sent_at,updated_at:(new Date).toISOString(),status:"replied"}).eq("id",e);if(l)throw l;return console.log("\u2705 Conversation and lead status updated in Supabase"),console.log("\ud83d\udcca Updated fields:",{conversation_length:s.length,last_reply:t.sent_at,message_id:i.message_id}),!0}catch(U){throw console.error("\u274c Failed to update conversation:",U),U}})(lt.id,{message:o,sent_at:(new Date).toISOString(),scheduled_time:me?me.toISOString():null,esp_provider:e.esp.provider,account_name:e.name},n),console.log("\ud83d\udcbe Conversation updated in database (securely)"),dn(!0),Pt(""),Qt("");const r=document.querySelector("[contenteditable]");r&&(r.innerHTML=""),fe([]),ge(null),ve(!1),await tt(),console.log("\ud83c\udfaf SECURE SEND COMPLETE: No API keys were transmitted over network")}catch(U){console.error("\u274c Secure send failed:",U),alert("Failed to send message securely: ".concat(U.message))}finally{Ot(!1)}}},disabled:!Et.trim()||Rt,className:"px-6 py-2 rounded-lg hover:opacity-80 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 transition-all duration-300",style:{backgroundColor:Ke.success,color:"#FFFFFF"},children:[(0,Ln.jsx)(z,{className:"w-4 h-4"}),Rt?"Sending...":me?"Schedule Message":"Send Message"]})]})]})]})]})]})})]}):(0,Ln.jsx)("div",{className:"flex-1 flex items-center justify-center transition-colors duration-300",style:{color:Ke.textMuted},children:(0,Ln.jsxs)("div",{className:"text-center",children:[(0,Ln.jsx)(m,{className:"w-12 h-12 mx-auto mb-4 transition-colors duration-300",style:{color:Ke.accent}}),(0,Ln.jsx)("p",{className:"text-lg font-medium transition-colors duration-300",style:{color:Ke.textPrimary},children:"Select a lead to view details"}),(0,Ln.jsx)("p",{className:"text-sm transition-colors duration-300",style:{color:Ke.textSecondary},children:"Choose a lead from the inbox to see their conversation history and respond"})]})})}),on&&sn&&(0,Ln.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Ln.jsxs)("div",{className:"rounded-lg p-6 max-w-md w-mx mx-4 shadow-xl",style:{backgroundColor:"#1A1C1A",border:"1px solid white"},children:[(0,Ln.jsx)("h3",{className:"text-lg font-semibold text-white mb-2",children:"Delete Lead"}),(0,Ln.jsxs)("p",{className:"text-gray-300 mb-6",children:["Are you sure you want to delete ",(0,Ln.jsxs)("strong",{className:"text-white",children:[sn.first_name," ",sn.last_name]}),"? This action cannot be undone."]}),(0,Ln.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,Ln.jsx)("button",{onClick:()=>{an(!1),ln(null)},className:"px-4 py-2 text-white hover:opacity-80 rounded-lg transition-colors",style:{border:"1px solid white"},children:"Cancel"}),(0,Ln.jsx)("button",{onClick:()=>(async e=>{try{console.log("Deleting lead:",e);const t=await fetch("https://reidsickels.app.n8n.cloud/webhook/bfffab96-188f-4a4a-9ae2-62aa9e0a02f4",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c(c({},e),(()=>{const t=Tn(e,Z);return{esp_provider:(null===t||void 0===t?void 0:t.esp.provider)||"",esp_api_key:(null===t||void 0===t?void 0:t.esp.key)||"",account_name:(null===t||void 0===t?void 0:t.name)||"",account_id:(null===t||void 0===t?void 0:t.id)||"",fullenrich_api_key:Z.fullenrich}})()))});if(console.log("Delete response status:",t.status),!t.ok){const e=await t.text();throw console.error("Delete webhook error:",e),new Error("Failed to delete lead: ".concat(t.status))}console.log("Lead deleted successfully"),u(t=>t.filter(t=>t.id!==e.id)),(null===lt||void 0===lt?void 0:lt.id)===e.id&&ct(null),an(!1),ln(null)}catch(U){console.error("Error deleting lead:",U),alert("Error deleting lead: ".concat(U.message)),an(!1),ln(null)}})(sn),className:"px-4 py-2 bg-red-600 text-white hover:bg-red-700 rounded-lg transition-colors",children:"Delete Lead"})]})]})}),cn&&(0,Ln.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Ln.jsxs)("div",{className:"rounded-lg p-6 max-w-md w-mx mx-4 shadow-xl",style:{backgroundColor:"#1A1C1A",border:"1px solid white"},children:[(0,Ln.jsx)("h3",{className:"text-lg font-semibold text-green-400 mb-2",children:"Message Sent Successfully!"}),(0,Ln.jsx)("p",{className:"text-gray-300 mb-6",children:"Your message has been sent and the conversation has been updated."}),(0,Ln.jsx)("div",{className:"flex gap-3 justify-end",children:(0,Ln.jsx)("button",{onClick:()=>{dn(!1),ct(null)},className:"px-4 py-2 bg-green-600 text-white hover:bg-green-700 rounded-lg transition-colors",children:"Close"})})]})}),J&&H&&(0,Ln.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Ln.jsxs)("div",{className:"rounded-lg p-6 max-w-md w-full mx-4 shadow-xl",style:{backgroundColor:"#1A1C1A",border:"1px solid rgba(84, 252, 255, 0.3)"},children:[(0,Ln.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Ln.jsx)("h3",{className:"text-lg font-semibold",style:{color:"#54FCFF"},children:"Enriched Lead Data"}),(0,Ln.jsx)("button",{onClick:()=>$(!1),className:"text-gray-400 hover:text-white",children:(0,Ln.jsx)(_,{className:"w-5 h-5"})})]}),(0,Ln.jsxs)("div",{className:"space-y-4",children:[(0,Ln.jsxs)("div",{children:[(0,Ln.jsx)("label",{className:"text-gray-400 text-sm",children:"Role"}),(0,Ln.jsx)("p",{className:"text-white font-medium",children:H.role||"N/A"})]}),(0,Ln.jsxs)("div",{children:[(0,Ln.jsx)("label",{className:"text-gray-400 text-sm",children:"Company Summary"}),(0,Ln.jsx)("p",{className:"text-white font-medium",children:H.companySummary||"N/A"})]}),(0,Ln.jsxs)("div",{children:[(0,Ln.jsx)("label",{className:"text-gray-400 text-sm",children:"LinkedIn"}),H.linkedin?(0,Ln.jsxs)("a",{href:H.linkedin,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 hover:opacity-80 transition-colors mt-1",style:{color:"#54FCFF"},children:[H.linkedin,(0,Ln.jsx)(M,{className:"w-4 h-4"})]}):(0,Ln.jsx)("p",{className:"text-white",children:"N/A"})]})]})]})})]}),"crm"===Q&&(0,Ln.jsx)("div",{className:"w-full flex flex-col shadow-lg transition-colors duration-300",style:{backgroundColor:Ke.secondaryBg,borderRadius:"12px",margin:"8px",border:"1px solid ".concat(Ke.border)},children:(0,Ln.jsx)(On,{brandId:Ye,onGoToInboxLead:e=>{G("inbox");const t=l.find(t=>t.id===e);t&&ct(t)}})}),"templates"===Q&&(0,Ln.jsx)("div",{className:"w-full flex flex-col shadow-lg transition-colors duration-300",style:{backgroundColor:Ke.secondaryBg,borderRadius:"12px",margin:"8px",border:"1px solid ".concat(Ke.border)},children:(0,Ln.jsx)(Bn,{user:s,brandId:Ye})})]}),ue&&(0,Ln.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[20000] p-4",children:(0,Ln.jsx)("div",{className:"w-full max-w-4xl h-[80vh] rounded-xl shadow-xl overflow-hidden",style:{backgroundColor:Ke.secondaryBg,border:"1px solid ".concat(Ke.border)},children:(0,Ln.jsx)(Bn,{user:s,brandId:Ye,selectionMode:!0,onTemplateSelect:e=>{if(!e||!lt)return;Pt(e.content);const t=e.html_content||jn(e.content);Qt(t);const n=document.querySelector("[contenteditable]");n&&(n.innerHTML=t),lt&&We(lt.id,e.content,t),he(!1),Je('Template "'.concat(e.name,'" applied!'),"success")},onClose:()=>he(!1)})})}),bn.map(e=>{const t=Ie.has(e.id),n=Me[e.id];return t?(0,Ln.jsx)(at,{leadId:e.id,lead:e,position:n,onClose:()=>Fe(new Set),onSelect:Fn},"dropdown-".concat(e.id)):null}),Oe&&(0,Ln.jsx)(st,{position:ze,onClose:()=>{Ae(!1),Ue(null)}})]})},Jn=p("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),$n=p("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),Qn=p("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),Gn=e=>{let{onAuthSuccess:t}=e;const[n,o]=(0,r.useState)(!1),[a,s]=(0,r.useState)(""),[i,l]=(0,r.useState)(""),[c,d]=(0,r.useState)(!1),[u,h]=(0,r.useState)(""),[p,f]=(0,r.useState)(!1),[g,y]=(0,r.useState)(!1),[v,x]=(0,r.useState)(null),b=async e=>{if(!e)return;const{data:t}=await En.from("profiles").select("*").eq("id",e.id).single();t||await En.from("profiles").insert([{id:e.id,email:e.email,brand_id:"1"}])};return(0,r.useEffect)(()=>{let e;return g&&v&&(e=setInterval(async()=>{var e;const{data:n}=await En.auth.getUser();null!==n&&void 0!==n&&null!==(e=n.user)&&void 0!==e&&e.email_confirmed_at&&(f(!1),y(!1),await b(n.user),t(n.user))},3e3)),()=>clearInterval(e)},[g,v]),(0,Ln.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:(0,Ln.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,Ln.jsxs)("div",{className:"text-center",children:[(0,Ln.jsx)("h2",{className:"mt-6 text-3xl font-extrabold text-gray-900 dark:text-white",children:n?"Create your account":"Sign in to your account"}),(0,Ln.jsx)("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:n?"Get started with your multi-brand inbox":"Access your multi-brand inbox"})]}),p?(0,Ln.jsxs)("div",{className:"text-center bg-white dark:bg-gray-800 p-8 rounded-lg shadow-lg",children:[(0,Ln.jsx)("h2",{className:"text-2xl font-bold mb-4 text-gray-900 dark:text-white",children:"Verify your email"}),(0,Ln.jsxs)("p",{className:"mb-4 text-gray-700 dark:text-gray-300",children:["We've sent a confirmation link to ",(0,Ln.jsx)("span",{className:"font-semibold",children:null===v||void 0===v?void 0:v.email}),".",(0,Ln.jsx)("br",{}),"Please check your inbox and click the link to verify your email."]}),(0,Ln.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Once verified, this page will automatically update."})]}):(0,Ln.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:async e=>{e.preventDefault(),d(!0),h("");try{let e=null;if(n){var r;const{data:t,error:n}=await(async(e,t)=>{const{data:n,error:r}=await En.auth.signUp({email:e,password:t});return{data:n,error:r}})(a,i);if(n)return h(n.message),void d(!1);if(e=null===t||void 0===t?void 0:t.user,e&&await En.from("profiles").insert([{id:e.id,email:e.email,brand_id:"1"}]),null===(r=e)||void 0===r||!r.email_confirmed_at)return f(!0),y(!0),x(e),void d(!1)}const{data:o,error:s}=await Pn(a,i);s?h(s.message):null!==o&&void 0!==o&&o.user&&(await b(o.user),t(o.user))}catch(o){h("An unexpected error occurred")}finally{d(!1)}},children:[(0,Ln.jsxs)("div",{className:"space-y-4",children:[(0,Ln.jsxs)("div",{children:[(0,Ln.jsx)("label",{htmlFor:"email",className:"sr-only",children:"Email address"}),(0,Ln.jsxs)("div",{className:"relative",children:[(0,Ln.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,Ln.jsx)(m,{className:"h-5 w-5 text-gray-400"})}),(0,Ln.jsx)("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:a,onChange:e=>s(e.target.value),className:"appearance-none relative block w-full px-3 py-2 pl-10 border border-gray-300 dark:border-gray-600 placeholder-gray-500 dark:placeholder-gray-400 text-gray-900 dark:text-white bg-white dark:bg-gray-800 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Email address"})]})]}),(0,Ln.jsxs)("div",{children:[(0,Ln.jsx)("label",{htmlFor:"password",className:"sr-only",children:"Password"}),(0,Ln.jsxs)("div",{className:"relative",children:[(0,Ln.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,Ln.jsx)(Jn,{className:"h-5 w-5 text-gray-400"})}),(0,Ln.jsx)("input",{id:"password",name:"password",type:"password",autoComplete:n?"new-password":"current-password",required:!0,value:i,onChange:e=>l(e.target.value),className:"appearance-none relative block w-full px-3 py-2 pl-10 border border-gray-300 dark:border-gray-600 placeholder-gray-500 dark:placeholder-gray-400 text-gray-900 dark:text-white bg-white dark:bg-gray-800 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Password"})]})]})]}),u&&(0,Ln.jsxs)("div",{className:"flex items-center space-x-2 text-red-600 dark:text-red-400 text-sm",children:[(0,Ln.jsx)(C,{className:"h-4 w-4"}),(0,Ln.jsx)("span",{children:u})]}),(0,Ln.jsx)("div",{children:(0,Ln.jsx)("button",{type:"submit",disabled:c,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:c?(0,Ln.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):(0,Ln.jsx)(Ln.Fragment,{children:n?(0,Ln.jsxs)(Ln.Fragment,{children:[(0,Ln.jsx)($n,{className:"h-5 w-5 mr-2"}),"Sign up"]}):(0,Ln.jsxs)(Ln.Fragment,{children:[(0,Ln.jsx)(Qn,{className:"h-5 w-5 mr-2"}),"Sign in"]})})})}),(0,Ln.jsx)("div",{className:"text-center",children:(0,Ln.jsx)("button",{type:"button",onClick:()=>o(!n),className:"text-sm text-blue-600 dark:text-blue-400 hover:text-blue-500 dark:hover:text-blue-300",children:n?"Already have an account? Sign in":"Don't have an account? Sign up"})})]})]})})};const Yn=function(){const[e,t]=(0,r.useState)(null),[n,o]=(0,r.useState)(!0),[a,s]=(0,r.useState)(!1),[i,l]=(0,r.useState)(null),[c,d]=(0,r.useState)("inbox"),[u,h]=(0,r.useState)(null);return(0,r.useEffect)(()=>{(async()=>{if(!e)return h(null);const{data:t}=await En.from("profiles").select("brand_id").eq("id",e.id).single();h((null===t||void 0===t?void 0:t.brand_id)||null)})()},[e]),(0,r.useEffect)(()=>{(async()=>{try{const{data:{user:e}}=await En.auth.getUser();e?e.email_confirmed_at?(t(e),s(!1),l(null)):(s(!0),l(e),t(null)):(t(null),s(!1),l(null))}catch(e){t(null),s(!1),l(null)}finally{o(!1)}})();const{data:{subscription:e}}=(n=async(e,n)=>{null!==n&&void 0!==n&&n.user?n.user.email_confirmed_at?(t(n.user),s(!1),l(null)):(s(!0),l(n.user),t(null)):(t(null),s(!1),l(null)),o(!1)},En.auth.onAuthStateChange(n));var n;return()=>e.unsubscribe()},[]),(0,r.useEffect)(()=>{let e;return a&&i&&(e=setInterval(async()=>{var e;const{data:n}=await En.auth.getUser();null!==n&&void 0!==n&&null!==(e=n.user)&&void 0!==e&&e.email_confirmed_at&&(t(n.user),s(!1),l(null))},3e3)),()=>clearInterval(e)},[a,i]),n?(0,Ln.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:(0,Ln.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):a&&i?(0,Ln.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:(0,Ln.jsx)("div",{className:"max-w-md w-full space-y-8",children:(0,Ln.jsxs)("div",{className:"text-center bg-white dark:bg-gray-800 p-8 rounded-lg shadow-lg",children:[(0,Ln.jsx)("h2",{className:"text-2xl font-bold mb-4 text-gray-900 dark:text-white",children:"Verify your email"}),(0,Ln.jsxs)("p",{className:"mb-4 text-gray-700 dark:text-gray-300",children:["We've sent a confirmation link to ",(0,Ln.jsx)("span",{className:"font-semibold",children:null===i||void 0===i?void 0:i.email}),".",(0,Ln.jsx)("br",{}),"Please check your inbox and click the link to verify your email."]}),(0,Ln.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Once verified, this page will automatically update."})]})})}):(0,Ln.jsx)("div",{className:"App min-h-screen bg-gray-50 dark:bg-gray-900",children:e?(0,Ln.jsx)(Kn,{user:e,onSignOut:async()=>{await En.auth.signOut(),t(null),h(null)}}):(0,Ln.jsx)(Gn,{onAuthSuccess:t})})};o.createRoot(document.getElementById("root")).render((0,Ln.jsx)(r.StrictMode,{children:(0,Ln.jsx)(Yn,{})}))})();
//# sourceMappingURL=main.5399a2d4.js.map